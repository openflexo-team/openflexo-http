import{n as vi,o7 as _i,D as _,E as g,o8 as L,a2 as k,t as Si,y as Gi,bT as u,o9 as st,oa as D,e_ as Oi,ob as ot,d0 as nt,b3 as S,_ as m,a as l,O as ci,L as Q,fi as Wi,aL as W,bv as b,oc as di,od as v,dz as ai,aF as U,oe as A,e as K,fj as Hi,B as d,aN as $,aH as X,be as Ui,of as $i,c0 as G,bj as I,bO as J,fY as at,av as x,Q as Mi,cd as rt,X as Xi,w as ti,b9 as zi,og as ct,P as dt,K as lt,d as Ti,aa as Z,b0 as ri,ac as Y,b7 as Ai,U as ht,oh as li,nP as ft,ir as ut,$ as gt,oi as wi,b1 as mt,ad as pt,ae as bt,oj as Ct,l as ei,ok as ji,a9 as yt,en as ii,ba as q,V as Yi,Y as qi,dx as Qi,a0 as Ji,cy as vt,bx as Nt,dI as Zi,ol as wt,m as hi,bp as Dt,df as it,om as It,N as _t,on as Di,oo as St,op as Tt,oq as At,or as Et,os as xt,nR as Lt,ot as kt,k as Ot,jC as Mt}from"./index-1e6bb64c.js";var Rt=".monaco-workbench>.notifications-toasts{bottom:26px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{border-radius:4px;margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";vi(Rt,{});var Ft=".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);border-radius:inherit;color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{border-radius:4px;box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .monaco-scrollable-element{border-radius:4px}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0;height:2px}";vi(Ft,{});class Vt extends _{constructor(i,t){super(),this.item=i,this.onClose=t,this._onDidClose=this._register(new g),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new g),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(i=>this._onDidChangeVisibility.fire(i))),k.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(i){this.item.updateSeverity(i)}updateMessage(i){this.item.updateMessage(i)}updateActions(i){this.item.updateActions(i)}close(){this.onClose(this.item),this.dispose()}}class Ni extends _{constructor(){super(...arguments),this._onDidChangeNotification=this._register(new g),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new g),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new g),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter=L.OFF}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(i){this.filter=i,this._onDidChangeFilter.fire(i)}addNotification(i){const t=this.createViewItem(i);if(!t)return Ni.NO_OP_NOTIFICATION;const e=this.findNotification(t);return e==null||e.close(),this._notifications.splice(0,0,t),this._onDidChangeNotification.fire({item:t,index:0,kind:0}),new Vt(t,s=>this.onClose(s))}onClose(i){const t=this.findNotification(i);t&&t!==i?t.close():i.close()}findNotification(i){return this._notifications.find(t=>t.equals(i))}createViewItem(i){const t=w.create(i,this.filter);if(!t)return;const e=(n,a)=>{const r=this._notifications.indexOf(t);r>=0&&this._onDidChangeNotification.fire({item:t,index:r,kind:n,detail:a})},s=t.onDidChangeExpansion(()=>e(2)),o=t.onDidChangeContent(n=>e(1,n.kind));return k.once(t.onDidClose)(()=>{s.dispose(),o.dispose();const n=this._notifications.indexOf(t);n>=0&&(this._notifications.splice(n,1),this._onDidChangeNotification.fire({item:t,index:n,kind:3}))}),t}showStatusMessage(i,t){const e=Pt.create(i,t);return e?(this._statusMessage=e,this._onDidChangeStatusMessage.fire({kind:0,item:e}),Si(()=>{this._statusMessage===e&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:1,item:e}))})):_.None}}Ni.NO_OP_NOTIFICATION=new _i;function Ei(c){return c instanceof w}class Ht extends _{constructor(){super(),this._onDidChange=this._register(new g),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(i){this._state.total!==i&&(this._state.total=i,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(i){typeof this._state.worked=="number"?this._state.worked+=i:this._state.worked=i,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}}class w extends _{static create(i,t=L.OFF){if(!i||!i.message||Gi(i.message))return;let e;typeof i.severity=="number"?e=i.severity:e=u.Info;const s=w.parseNotificationMessage(i.message);if(!s)return;let o;i.actions?o=i.actions:st(i.message)&&(o={primary:i.message.actions});let n=i.priority??D.DEFAULT;return n===D.DEFAULT&&(t===L.SILENT||t===L.ERROR&&i.severity!==u.Error)&&(n=D.SILENT),new w(i.id,e,i.sticky,n,s,i.source,i.progress,o)}static parseNotificationMessage(i){let t;if(i instanceof Error?t=Oi(i,!1):typeof i=="string"&&(t=i),!t)return;const e=t;t.length>w.MAX_MESSAGE_LENGTH&&(t=`${t.substr(0,w.MAX_MESSAGE_LENGTH)}...`),t=t.replace(/(\r\n|\n|\r)/gm," ").trim();const s=ot(t);return{raw:e,linkedText:s,original:i}}constructor(i,t,e,s,o,n,a,r){super(),this.id=i,this._severity=t,this._sticky=e,this._priority=s,this._message=o,this._source=n,this._visible=!1,this._onDidChangeExpansion=this._register(new g),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new g),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new g),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new g),this.onDidChangeVisibility=this._onDidChangeVisibility.event,a&&this.setProgress(a),this.setActions(r)}setProgress(i){i.infinite?this.progress.infinite():i.total&&(this.progress.total(i.total),i.worked&&this.progress.worked(i.worked))}setActions(i={primary:[],secondary:[]}){this._actions={primary:Array.isArray(i.primary)?i.primary:[],secondary:Array.isArray(i.secondary)?i.secondary:[]},this._expanded=i.primary&&i.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;const i=this.hasActions;return!!(i&&this._severity===u.Error||!i&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!this._actions||!this._actions.primary?!1:this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new Ht),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:3})))),this._progress}get message(){return this._message}get source(){return typeof this._source=="string"?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&typeof this._source!="string"&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(i){i!==this._severity&&(this._severity=i,this._onDidChangeContent.fire({kind:0}))}updateMessage(i){const t=w.parseNotificationMessage(i);!t||t.raw===this._message.raw||(this._message=t,this._onDidChangeContent.fire({kind:1}))}updateActions(i){this.setActions(i),this._onDidChangeContent.fire({kind:2})}updateVisibility(i){this._visible!==i&&(this._visible=i,this._onDidChangeVisibility.fire(i))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(i){!this._expanded||!this.canCollapse||(this._expanded=!1,i||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(i){if(this.hasProgress||i.hasProgress)return!1;if(typeof this.id=="string"||typeof i.id=="string")return this.id===i.id;if(typeof this._source=="object"){if(this._source.label!==i.source||this._source.id!==i.sourceId)return!1}else if(this._source!==i.source)return!1;if(this._message.raw!==i.message.raw)return!1;const t=this._actions&&this._actions.primary||[],e=i.actions&&i.actions.primary||[];return nt(t,e,(s,o)=>s.id+s.label===o.id+o.label)}}w.MAX_MESSAGE_LENGTH=1e3;class si extends S{constructor(i,t){super(i,t.label,void 0,!0,async()=>{t.run(),this._onDidRun.fire()}),this._onDidRun=this._register(new g),this.onDidRun=this._onDidRun.event,this._keepOpen=!!t.keepOpen,this._menu=!t.isSecondary&&t.menu?t.menu.map((e,s)=>new si(`${i}.${s}`,e)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class Pt{static create(i,t){if(!i||Gi(i))return;let e;if(i instanceof Error?e=Oi(i,!1):typeof i=="string"&&(e=i),!!e)return{message:e,options:t}}}var Bt=".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}";vi(Bt,{});function fi(c,i,t){return{id:Wi(c.toString()).toString(),silent:t,source:i||"core"}}let xi=class extends _{constructor(i,t){super(),this.telemetryService=i,this.notificationService=t,this.registerListeners()}registerListeners(){this._register(this.notificationService.onDidAddNotification(i=>{const t=i.source&&typeof i.source!="string"?i.source.id:i.source;this.telemetryService.publicLog2("notification:show",fi(i.message,t,i.priority===D.SILENT))})),this._register(this.notificationService.onDidRemoveNotification(i=>{const t=i.source&&typeof i.source!="string"?i.source.id:i.source;this.telemetryService.publicLog2("notification:close",fi(i.message,t,i.priority===D.SILENT))}))}};xi=m([l(0,ci),l(1,Q)],xi);const Pi="notifications.showList",ui="notifications.hideList",Kt="notifications.toggleList",Ii="notifications.hideToasts",Bi="notifications.focusToasts",Gt="notifications.focusNextToast",Wt="notifications.focusPreviousToast",Ut="notifications.focusFirstToast",$t="notifications.focusLastToast",Ri="notification.collapse",Fi="notification.expand",Ki="notification.acceptPrimaryAction",Xt="notification.toggle",Vi="notification.clear",gi="notifications.clearAll",mi="notifications.toggleDoNotDisturbMode";function zt(c,i,t){function e(o,n){if(Ei(n))return n;const a=o.lastFocusedList;if(a instanceof $i){const r=a.getFocusedElements()[0];if(Ei(r))return r}}W.registerCommand(Pi,()=>{i.hide(),c.show()}),b.registerCommandAndKeybindingRule({id:ui,weight:200+50,when:di,primary:9,handler:o=>{const n=o.get(ci);for(const a of t.notifications)a.visible&&n.publicLog2("notification:hide",fi(a.message.original,a.sourceId,a.priority===D.SILENT));c.hide()}}),W.registerCommand(Kt,o=>{c.isVisible?c.hide():(i.hide(),c.show())}),b.registerCommandAndKeybindingRule({id:Vi,weight:200,when:v,primary:20,mac:{primary:2049},handler:(o,n)=>{const a=e(o.get(ai),n);a&&!a.hasProgress&&a.close()}}),b.registerCommandAndKeybindingRule({id:Fi,weight:200,when:v,primary:17,handler:(o,n)=>{const a=e(o.get(ai),n);a==null||a.expand()}}),b.registerCommandAndKeybindingRule({id:Ki,weight:200,when:U.and(A),primary:3103,handler:o=>{var h;const n=o.get(K).createInstance(oi),a=Hi(t.notifications);if(!a)return;const r=(h=a.actions)!=null&&h.primary?Hi(a.actions.primary):void 0;r&&(n.run(r,a),a.close())}}),b.registerCommandAndKeybindingRule({id:Ri,weight:200,when:v,primary:15,handler:(o,n)=>{const a=e(o.get(ai),n);a==null||a.collapse()}}),b.registerCommandAndKeybindingRule({id:Xt,weight:200,when:v,primary:10,secondary:[3],handler:o=>{const n=e(o.get(ai));n==null||n.toggle()}}),W.registerCommand(Ii,o=>{const n=o.get(ci);for(const a of t.notifications)a.visible&&n.publicLog2("notification:hide",fi(a.message.original,a.sourceId,a.priority===D.SILENT));i.hide()}),b.registerKeybindingRule({id:Ii,weight:200-50,when:A,primary:9}),b.registerKeybindingRule({id:Ii,weight:200+100,when:U.and(A,v),primary:9}),W.registerCommand(Bi,()=>i.focus()),b.registerCommandAndKeybindingRule({id:Gt,weight:200,when:U.and(v,A),primary:18,handler:()=>{i.focusNext()}}),b.registerCommandAndKeybindingRule({id:Wt,weight:200,when:U.and(v,A),primary:16,handler:()=>{i.focusPrevious()}}),b.registerCommandAndKeybindingRule({id:Ut,weight:200,when:U.and(v,A),primary:11,secondary:[14],handler:()=>{i.focusFirst()}}),b.registerCommandAndKeybindingRule({id:$t,weight:200,when:U.and(v,A),primary:12,secondary:[13],handler:()=>{i.focusLast()}}),W.registerCommand(gi,()=>c.clearAll()),W.registerCommand(mi,o=>{const n=o.get(Q);n.doNotDisturbMode=!n.doNotDisturbMode});const s={value:d("notifications","Notifications"),original:"Notifications"};$.appendMenuItem(X.CommandPalette,{command:{id:Pi,title:{value:d("showNotifications","Show Notifications"),original:"Show Notifications"},category:s}}),$.appendMenuItem(X.CommandPalette,{command:{id:ui,title:{value:d("hideNotifications","Hide Notifications"),original:"Hide Notifications"},category:s},when:di}),$.appendMenuItem(X.CommandPalette,{command:{id:gi,title:{value:d("clearAllNotifications","Clear All Notifications"),original:"Clear All Notifications"},category:s}}),$.appendMenuItem(X.CommandPalette,{command:{id:Ki,title:{value:d("acceptNotificationPrimaryAction","Accept Notification Primary Action"),original:"Accept Notification Primary Action"},category:s}}),$.appendMenuItem(X.CommandPalette,{command:{id:mi,title:{value:d("toggleDoNotDisturbMode","Toggle Do Not Disturb Mode"),original:"Toggle Do Not Disturb Mode"},category:s}}),$.appendMenuItem(X.CommandPalette,{command:{id:Bi,title:{value:d("focusNotificationToasts","Focus Notification Toast"),original:"Focus Notification Toast"},category:s},when:A})}let oi=class extends Ui{constructor(i,t){super(),this.telemetryService=i,this.notificationService=t}async runAction(i,t){this.telemetryService.publicLog2("workbenchActionExecuted",{id:i.id,from:"message"}),Ei(t)&&this.telemetryService.publicLog2("notification:actionExecuted",{id:Wi(t.message.original.toString()).toString(),actionLabel:i.label,source:t.sourceId||"core",silent:t.priority===D.SILENT});try{await super.runAction(i,t)}catch(e){this.notificationService.error(e)}}};oi=m([l(0,ci),l(1,Q)],oi);const jt=G("notifications-clear",I.close,d("clearIcon","Icon for the clear action in notifications.")),Yt=G("notifications-clear-all",I.clearAll,d("clearAllIcon","Icon for the clear all action in notifications.")),qt=G("notifications-hide",I.chevronDown,d("hideIcon","Icon for the hide action in notifications.")),Qt=G("notifications-expand",I.chevronUp,d("expandIcon","Icon for the expand action in notifications.")),Jt=G("notifications-collapse",I.chevronDown,d("collapseIcon","Icon for the collapse action in notifications.")),Zt=G("notifications-configure",I.gear,d("configureIcon","Icon for the configure action in notifications.")),ie=G("notifications-do-not-disturb",I.bellSlash,d("doNotDisturbIcon","Icon for the mute all action in notifications."));let M=class extends S{constructor(i,t,e){super(i,t,x.asClassName(jt)),this.commandService=e}async run(i){this.commandService.executeCommand(Vi,i)}};M.ID=Vi;M.LABEL=d("clearNotification","Clear Notification");M=m([l(2,J)],M);let R=class extends S{constructor(i,t,e){super(i,t,x.asClassName(Yt)),this.commandService=e}async run(){this.commandService.executeCommand(gi)}};R.ID=gi;R.LABEL=d("clearNotifications","Clear All Notifications");R=m([l(2,J)],R);let F=class extends S{constructor(i,t,e){super(i,t,x.asClassName(ie)),this.commandService=e}async run(){this.commandService.executeCommand(mi)}};F.ID=mi;F.LABEL=d("toggleDoNotDisturbMode","Toggle Do Not Disturb Mode");F=m([l(2,J)],F);let V=class extends S{constructor(i,t,e){super(i,t,x.asClassName(qt)),this.commandService=e}async run(){this.commandService.executeCommand(ui)}};V.ID=ui;V.LABEL=d("hideNotificationsCenter","Hide Notifications");V=m([l(2,J)],V);let H=class extends S{constructor(i,t,e){super(i,t,x.asClassName(Qt)),this.commandService=e}async run(i){this.commandService.executeCommand(Fi,i)}};H.ID=Fi;H.LABEL=d("expandNotification","Expand Notification");H=m([l(2,J)],H);let P=class extends S{constructor(i,t,e){super(i,t,x.asClassName(Jt)),this.commandService=e}async run(i){this.commandService.executeCommand(Ri,i)}};P.ID=Ri;P.LABEL=d("collapseNotification","Collapse Notification");P=m([l(2,J)],P);class j extends S{constructor(i,t,e){super(i,t,x.asClassName(Zt)),this.configurationActions=e}}j.ID="workbench.action.configureNotification";j.LABEL=d("configureNotification","Configure Notification");let B=class extends S{constructor(i,t,e){super(i,t),this.clipboardService=e}run(i){return this.clipboardService.writeText(i.message.raw)}};B.ID="workbench.action.copyNotificationMessage";B.LABEL=d("copyNotification","Copy Text");B=m([l(2,at)],B);class N{constructor(i){this.offsetHelper=this.createOffsetHelper(i)}createOffsetHelper(i){const t=document.createElement("div");return t.classList.add("notification-offset-helper"),i.appendChild(t),t}getHeight(i){if(!i.expanded)return N.ROW_HEIGHT;let t=N.ROW_HEIGHT;const e=this.computePreferredHeight(i);if(N.LINE_HEIGHT<e){const o=e-N.LINE_HEIGHT;t+=o}return(i.source||li(i.actions&&i.actions.primary))&&(t+=N.ROW_HEIGHT),t===N.ROW_HEIGHT&&i.collapse(!0),t}computePreferredHeight(i){let t=1;i.canCollapse&&t++,li(i.actions&&i.actions.secondary)&&t++,this.offsetHelper.style.width=`${450-(10+26+t*(24+8)-4)}px`;const e=tt.render(i.message);this.offsetHelper.appendChild(e);const s=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return Ai(this.offsetHelper),s}getTemplateId(i){if(i instanceof w)return ni.TEMPLATE_ID;throw new Error("unknown element type: "+i)}}N.ROW_HEIGHT=42;N.LINE_HEIGHT=22;class tt{static render(i,t){const e=document.createElement("span");for(const s of i.linkedText.nodes)if(typeof s=="string")e.appendChild(document.createTextNode(s));else{let o=s.title;!o&&s.href.startsWith("command:")?o=d("executeCommand","Click to execute command '{0}'",s.href.substr(8)):o||(o=s.href);const n=gt("a",{href:s.href,title:o,tabIndex:0},s.label);if(t){const a=T=>{Ct(T)&&ri.stop(T,!0),t.callback(s.href)},r=t.toDispose.add(new wi(n,Y.CLICK)).event,h=t.toDispose.add(new wi(n,Y.KEY_DOWN)).event,p=t.toDispose.add(k.chain(h)).filter(T=>{const y=new mt(T);return y.equals(10)||y.equals(3)}).event;t.toDispose.add(pt.addTarget(n));const f=t.toDispose.add(new wi(n,bt.Tap)).event;k.any(r,f,p)(a,null,t.toDispose)}e.appendChild(n)}return e}}let ni=class et{constructor(i,t,e){this.actionRunner=i,this.contextMenuService=t,this.instantiationService=e}get templateId(){return et.TEMPLATE_ID}renderTemplate(i){const t=Object.create(null);t.toDispose=new ti,t.container=document.createElement("div"),t.container.classList.add("notification-list-item"),t.mainRow=document.createElement("div"),t.mainRow.classList.add("notification-list-item-main-row"),t.icon=document.createElement("div"),t.icon.classList.add("notification-list-item-icon","codicon"),t.message=document.createElement("div"),t.message.classList.add("notification-list-item-message");const e=document.createElement("div");return e.classList.add("notification-list-item-toolbar-container"),t.toolbar=new zi(e,{ariaLabel:d("notificationActions","Notification Actions"),actionViewItemProvider:s=>{if(s&&s instanceof j){const o=new ct(s,s.configurationActions,this.contextMenuService,{actionRunner:this.actionRunner,classNames:s.class});return t.toDispose.add(o),o}},actionRunner:this.actionRunner}),t.toDispose.add(t.toolbar),t.detailsRow=document.createElement("div"),t.detailsRow.classList.add("notification-list-item-details-row"),t.source=document.createElement("div"),t.source.classList.add("notification-list-item-source"),t.buttonsContainer=document.createElement("div"),t.buttonsContainer.classList.add("notification-list-item-buttons-container"),i.appendChild(t.container),t.container.appendChild(t.detailsRow),t.detailsRow.appendChild(t.source),t.detailsRow.appendChild(t.buttonsContainer),t.container.appendChild(t.mainRow),t.mainRow.appendChild(t.icon),t.mainRow.appendChild(t.message),t.mainRow.appendChild(e),t.progress=new dt(i,lt),t.toDispose.add(t.progress),t.renderer=this.instantiationService.createInstance(pi,t,this.actionRunner),t.toDispose.add(t.renderer),t}renderElement(i,t,e){e.renderer.setInput(i)}disposeTemplate(i){Ti(i.toDispose)}};ni.TEMPLATE_ID="notification";ni=m([l(1,Mi),l(2,K)],ni);let pi=class E extends _{constructor(i,t,e,s,o,n){super(),this.template=i,this.actionRunner=t,this.openerService=e,this.instantiationService=s,this.keybindingService=o,this.contextMenuService=n,this.inputDisposables=this._register(new ti),E.closeNotificationAction||(E.closeNotificationAction=s.createInstance(M,M.ID,M.LABEL),E.expandNotificationAction=s.createInstance(H,H.ID,H.LABEL),E.collapseNotificationAction=s.createInstance(P,P.ID,P.LABEL))}setInput(i){this.inputDisposables.clear(),this.render(i)}render(i){this.template.container.classList.toggle("expanded",i.expanded),this.inputDisposables.add(Z(this.template.container,Y.MOUSE_UP,e=>{e.button===1&&ri.stop(e,!0)})),this.inputDisposables.add(Z(this.template.container,Y.AUXCLICK,e=>{!i.hasProgress&&e.button===1&&(ri.stop(e,!0),i.close())})),this.renderSeverity(i);const t=this.renderMessage(i);this.renderSecondaryActions(i,t),this.renderSource(i),this.renderButtons(i),this.renderProgress(i),this.inputDisposables.add(i.onDidChangeContent(e=>{switch(e.kind){case 0:this.renderSeverity(i);break;case 3:this.renderProgress(i);break;case 1:this.renderMessage(i);break}}))}renderSeverity(i){E.SEVERITIES.forEach(t=>{i.severity!==t&&this.template.icon.classList.remove(...x.asClassNameArray(this.toSeverityIcon(t)))}),this.template.icon.classList.add(...x.asClassNameArray(this.toSeverityIcon(i.severity)))}renderMessage(i){Ai(this.template.message),this.template.message.appendChild(tt.render(i.message,{callback:e=>this.openerService.open(ht.parse(e),{allowCommands:!0}),toDispose:this.inputDisposables}));const t=i.canCollapse&&!i.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return t?this.template.message.title=this.template.message.textContent+"":this.template.message.removeAttribute("title"),t}renderSecondaryActions(i,t){const e=[],s=i.actions?i.actions.secondary:void 0;if(li(s)){const n=this.instantiationService.createInstance(j,j.ID,j.LABEL,s);e.push(n),this.inputDisposables.add(n)}let o=!1;i.canCollapse&&(i.expanded||i.source||t)&&(o=!0),o&&e.push(i.expanded?E.collapseNotificationAction:E.expandNotificationAction),i.hasProgress||e.push(E.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=i,e.forEach(n=>this.template.toolbar.push(n,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(n)}))}renderSource(i){i.expanded&&i.source?(this.template.source.textContent=d("notificationSource","Source: {0}",i.source),this.template.source.title=i.source):(this.template.source.textContent="",this.template.source.removeAttribute("title"))}renderButtons(i){Ai(this.template.buttonsContainer);const t=i.actions?i.actions.primary:void 0;if(i.expanded&&li(t)){const e=this,s=new class extends Ui{async runAction(n){e.actionRunner.run(n,i),(!(n instanceof si)||!n.keepOpen)&&i.close()}},o=this.inputDisposables.add(new ft(this.template.buttonsContainer));for(let n=0;n<t.length;n++){const a=t[n],r={title:!0,secondary:n>0,...ut},h=a instanceof si?a.menu:void 0,p=this.inputDisposables.add(h?o.addButtonWithDropdown({...r,contextMenuProvider:this.contextMenuService,actions:h,actionRunner:s}):o.addButton(r));p.label=a.label,this.inputDisposables.add(p.onDidClick(f=>{f&&ri.stop(f,!0),s.run(a)}))}}}renderProgress(i){if(!i.hasProgress){this.template.progress.stop().hide();return}const t=i.progress.state;t.infinite?this.template.progress.infinite().show():typeof t.total=="number"||typeof t.worked=="number"?(typeof t.total=="number"&&!this.template.progress.hasTotal()&&this.template.progress.total(t.total),typeof t.worked=="number"&&this.template.progress.setWorked(t.worked).show()):this.template.progress.done().hide()}toSeverityIcon(i){switch(i){case u.Warning:return I.warning;case u.Error:return I.error}return I.info}getKeybindingLabel(i){const t=this.keybindingService.lookupKeybinding(i.id);return t?t.getLabel():null}};pi.SEVERITIES=[u.Info,u.Warning,u.Error];pi=m([l(2,rt),l(3,K),l(4,Xi),l(5,Mi)],pi);let bi=class extends _{constructor(i,t,e,s){super(),this.container=i,this.options=t,this.instantiationService=e,this.contextMenuService=s,this.viewModel=[]}show(i){if(this.isVisible){i&&ei(this.list).domFocus();return}this.list||this.createNotificationsList(),this.isVisible=!0,i&&ei(this.list).domFocus()}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const i=this._register(this.instantiationService.createInstance(oi)),t=this.instantiationService.createInstance(ni,i),e=this.listDelegate=new N(this.listContainer),s=this.options,o=this.list=this._register(this.instantiationService.createInstance($i,"NotificationsList",this.listContainer,e,[t],{...s,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:ji},accessibilityProvider:{getAriaLabel(r){return r.source?d("notificationWithSourceAriaLabel","{0}, source: {1}, notification",r.message.raw,r.source):d("notificationAriaLabel","{0}, notification",r.message.raw)},getWidgetAriaLabel(){return s.widgetAriaLabel??d("notificationsList","Notifications List")},getRole(){return"dialog"}}})),n=this._register(this.instantiationService.createInstance(B,B.ID,B.LABEL));this._register(o.onContextMenu(r=>{r.element&&this.contextMenuService.showContextMenu({getAnchor:()=>r.anchor,getActions:()=>[n],getActionsContext:()=>r.element,actionRunner:i})})),this._register(o.onMouseDblClick(r=>r.element.toggle()));const a=this._register(yt(o.getHTMLElement()));this._register(a.onDidBlur(()=>{document.hasFocus()&&o.setFocus([])})),v.bindTo(o.contextKeyService),this._register(o.onDidChangeSelection(r=>{r.indexes.length>0&&o.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(i,t,e=[]){const[s,o]=ii(this.list,this.listContainer),n=q(document.activeElement,o),a=s.getFocus()[0],r=this.viewModel[a];let h=null;if(typeof a=="number"&&(h=s.getRelativeTop(a)),this.viewModel.splice(i,t,...e),s.splice(i,t,e),s.layout(),this.viewModel.length===0)this.hide();else if(typeof a=="number"){let p=0;if(r){let f=this.viewModel.indexOf(r);f===-1&&(f=a-1),f<this.viewModel.length&&f>=0&&(p=f)}typeof h=="number"&&s.reveal(p,h),s.setFocus([p])}this.isVisible&&n&&s.domFocus()}updateNotificationHeight(i){const t=this.viewModel.indexOf(i);if(t===-1)return;const[e,s]=ii(this.list,this.listDelegate);e.updateElementHeight(t,s.getHeight(i)),e.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){!this.isVisible||!this.list||(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return!this.isVisible||!this.listContainer?!1:q(document.activeElement,this.listContainer)}layout(i,t){this.listContainer&&this.list&&(this.listContainer.style.width=`${i}px`,typeof t=="number"&&(this.list.getHTMLElement().style.maxHeight=`${t}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};bi=m([l(2,K),l(3,Mi)],bi);var C;(function(c){c[c.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",c[c.HIDDEN=1]="HIDDEN",c[c.VISIBLE=2]="VISIBLE"})(C||(C={}));let O=class z extends Zi{get isVisible(){return!!this._isVisible}constructor(i,t,e,s,o,n,a,r,h){super(o),this.container=i,this.model=t,this.instantiationService=e,this.layoutService=s,this.editorGroupService=n,this.contextKeyService=a,this.lifecycleService=r,this.hostService=h,this._onDidChangeVisibility=this._register(new g),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.notificationsToastsVisibleContextKey=A.bindTo(this.contextKeyService),this.addedToastsIntervalCounter=new wt(z.SPAM_PROTECTION.interval),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayout(i=>this.layout(hi.lift(i)))),this.lifecycleService.when(3).then(()=>{this.model.notifications.forEach(i=>this.addToast(i)),this._register(this.model.onDidChangeNotification(i=>this.onDidChangeNotification(i)))}),this._register(this.model.onDidChangeFilter(i=>{(i===L.SILENT||i===L.ERROR)&&this.hide()}))}onDidChangeNotification(i){switch(i.kind){case 0:return this.addToast(i.item);case 3:return this.removeToast(i.item)}}addToast(i){if(this.isNotificationsCenterVisible||i.priority===D.SILENT||this.addedToastsIntervalCounter.increment()>z.SPAM_PROTECTION.limit)return;const t=new ti;this.mapNotificationToDisposable.set(i,t),t.add(Dt(()=>this.doAddToast(i,t)))}doAddToast(i,t){let e=this.notificationsToastsContainer;e||(e=this.notificationsToastsContainer=document.createElement("div"),e.classList.add("notifications-toasts"),this.container.appendChild(e)),e.classList.add("visible");const s=document.createElement("div");s.classList.add("notification-toast-container");const o=e.firstChild;o?e.insertBefore(s,o):e.appendChild(s);const n=document.createElement("div");n.classList.add("notification-toast"),s.appendChild(n);const a=this.instantiationService.createInstance(bi,n,{verticalScrollMode:2,widgetAriaLabel:(()=>i.source?d("notificationWithSourceAriaLabel","{0}, source: {1}, notification",i.message.raw,i.source):d("notificationAriaLabel","{0}, notification",i.message.raw))()});t.add(a);const r={item:i,list:a,container:s,toast:n};this.mapNotificationToToast.set(i,r),t.add(Si(()=>this.updateToastVisibility(r,!1))),a.show();const h=this.computeMaxDimensions();this.layoutLists(h.width),a.updateNotificationsList(0,0,[i]),this.layoutContainer(h.height),t.add(i.onDidChangeExpansion(()=>{a.updateNotificationsList(0,1,[i])})),t.add(i.onDidChangeContent(p=>{switch(p.kind){case 2:a.updateNotificationsList(0,1,[i]);break;case 1:i.expanded&&a.updateNotificationHeight(i);break}})),k.once(i.onDidClose)(()=>{this.removeToast(i)}),this.purgeNotification(i,s,a,t),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),n.classList.add("notification-fade-in"),t.add(Z(n,"transitionend",()=>{n.classList.remove("notification-fade-in"),n.classList.add("notification-fade-in-done")})),i.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(i,t,e,s){let o=!1;s.add(Z(t,Y.MOUSE_OVER,()=>o=!0)),s.add(Z(t,Y.MOUSE_OUT,()=>o=!1));let n,a;const r=()=>{n=setTimeout(()=>{this.hostService.hasFocus?i.sticky||e.hasFocus()||o?r():this.removeToast(i):a||(a=this.hostService.onDidChangeFocus(h=>{h&&r()}),s.add(a))},z.PURGE_TIMEOUT[i.severity])};r(),s.add(Si(()=>clearTimeout(n)))}removeToast(i){let t=!1;const e=this.mapNotificationToToast.get(i);e&&(q(document.activeElement,e.container)&&(t=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(i));const s=this.mapNotificationToDisposable.get(i);s&&(Ti(s),this.mapNotificationToDisposable.delete(i)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),t&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(i=>Ti(i)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){var i;(i=this.notificationsToastsContainer)==null||i.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const i=this.notificationsToastsContainer?q(document.activeElement,this.notificationsToastsContainer):!1;this.removeToasts(),i&&this.editorGroupService.activeGroup.focus()}focus(){const i=this.getToasts(C.VISIBLE);return i.length>0?(i[0].list.focusFirst(),!0):!1}focusNext(){const i=this.getToasts(C.VISIBLE);for(let t=0;t<i.length;t++)if(i[t].list.hasFocus()){const s=i[t+1];if(s)return s.list.focusFirst(),!0;break}return!1}focusPrevious(){const i=this.getToasts(C.VISIBLE);for(let t=0;t<i.length;t++)if(i[t].list.hasFocus()){const s=i[t-1];if(s)return s.list.focusFirst(),!0;break}return!1}focusFirst(){const i=this.getToasts(C.VISIBLE)[0];return i?(i.list.focusFirst(),!0):!1}focusLast(){const i=this.getToasts(C.VISIBLE);return i.length>0?(i[i.length-1].list.focusFirst(),!0):!1}update(i){this.isNotificationsCenterVisible!==i&&(this.isNotificationsCenterVisible=i,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(({toast:i})=>{const t=this.getColor(ji);i.style.background=t||"";const e=this.getColor(it);i.style.boxShadow=e?`0 0 8px 2px ${e}`:"";const s=this.getColor(It);i.style.border=s?`1px solid ${s}`:""})}getToasts(i){const t=[];return this.mapNotificationToToast.forEach(e=>{switch(i){case C.HIDDEN_OR_VISIBLE:t.push(e);break;case C.HIDDEN:this.isToastInDOM(e)||t.push(e);break;case C.VISIBLE:this.isToastInDOM(e)&&t.push(e);break}}),t.reverse()}layout(i){this.workbenchDimensions=i;const t=this.computeMaxDimensions();t.height&&this.layoutContainer(t.height),this.layoutLists(t.width)}computeMaxDimensions(){const i=z.MAX_WIDTH;let t=i,e;return this.workbenchDimensions&&(t=this.workbenchDimensions.width,t-=2*8,e=this.workbenchDimensions.height,this.layoutService.isVisible("workbench.parts.statusbar")&&(e-=22),this.layoutService.isVisible("workbench.parts.titlebar")&&(e-=22),e-=2*12),e=typeof e=="number"?Math.round(e*.618):0,new hi(Math.min(i,t),e)}layoutLists(i){this.mapNotificationToToast.forEach(({list:t})=>t.layout(i))}layoutContainer(i){let t=0;for(const e of this.getToasts(C.HIDDEN_OR_VISIBLE)){e.container.style.opacity="0",this.updateToastVisibility(e,!0),i-=e.container.offsetHeight;let s=!1;t===z.MAX_NOTIFICATIONS?s=!1:i>=0&&(s=!0),this.updateToastVisibility(e,s),e.container.style.opacity="",s&&t++}}updateToastVisibility(i,t){if(this.isToastInDOM(i)===t)return;const e=ei(this.notificationsToastsContainer);t?e.appendChild(i.container):e.removeChild(i.container),i.item.updateVisibility(t)}isToastInDOM(i){return!!i.container.parentElement}};O.MAX_WIDTH=450;O.MAX_NOTIFICATIONS=3;O.PURGE_TIMEOUT={[u.Info]:15e3,[u.Warning]:18e3,[u.Error]:2e4};O.SPAM_PROTECTION={interval:800,limit:O.MAX_NOTIFICATIONS};O=m([l(2,K),l(3,Yi),l(4,qi),l(5,Qi),l(6,Ji),l(7,vt),l(8,Nt)],O);let Ci=class Li extends _{constructor(i){super(),this.storageService=i,this.model=this._register(new Ni),this._onDidAddNotification=this._register(new g),this.onDidAddNotification=this._onDidAddNotification.event,this._onDidRemoveNotification=this._register(new g),this.onDidRemoveNotification=this._onDidRemoveNotification.event,this._onDidChangeDoNotDisturbMode=this._register(new g),this.onDidChangeDoNotDisturbMode=this._onDidChangeDoNotDisturbMode.event,this._doNotDisturbMode=this.storageService.getBoolean(Li.DND_SETTINGS_KEY,-1,!1),this.updateDoNotDisturbFilters(),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(i=>{switch(i.kind){case 0:case 3:{const t={message:i.item.message.original,severity:i.item.severity,source:typeof i.item.sourceId=="string"&&typeof i.item.source=="string"?{id:i.item.sourceId,label:i.item.source}:i.item.source,priority:i.item.priority};i.kind===0&&this._onDidAddNotification.fire(t),i.kind===3&&this._onDidRemoveNotification.fire(t);break}}}))}get doNotDisturbMode(){return this._doNotDisturbMode}set doNotDisturbMode(i){this._doNotDisturbMode!==i&&(this.storageService.store(Li.DND_SETTINGS_KEY,i,-1,1),this._doNotDisturbMode=i,this.updateDoNotDisturbFilters(),this._onDidChangeDoNotDisturbMode.fire())}updateDoNotDisturbFilters(){let i;this._doNotDisturbMode?i=L.ERROR:i=L.OFF,this.model.setFilter(i)}info(i){if(Array.isArray(i)){i.forEach(t=>this.info(t));return}this.model.addNotification({severity:u.Info,message:i})}warn(i){if(Array.isArray(i)){i.forEach(t=>this.warn(t));return}this.model.addNotification({severity:u.Warning,message:i})}error(i){if(Array.isArray(i)){i.forEach(t=>this.error(t));return}this.model.addNotification({severity:u.Error,message:i})}notify(i){var s,o;const t=new ti;if(i.neverShowAgain){const n=this.toStorageScope(i.neverShowAgain),a=i.neverShowAgain.id;if(this.storageService.getBoolean(a,n))return new _i;const r=t.add(new S("workbench.notification.neverShowAgain",d("neverShowAgain","Don't Show Again"),void 0,!0,async()=>{e.close(),this.storageService.store(a,!0,n,0)})),h={primary:((s=i.actions)==null?void 0:s.primary)||[],secondary:((o=i.actions)==null?void 0:o.secondary)||[]};i.neverShowAgain.isSecondary?h.secondary=[...h.secondary,r]:h.primary=[r,...h.primary],i.actions=h}const e=this.model.addNotification(i);return k.once(e.onDidClose)(()=>t.dispose()),e}toStorageScope(i){switch(i.scope){case Di.APPLICATION:return-1;case Di.PROFILE:return 0;case Di.WORKSPACE:return 1;default:return-1}}prompt(i,t,e,s){const o=new ti;if(s!=null&&s.neverShowAgain){const f=this.toStorageScope(s.neverShowAgain),T=s.neverShowAgain.id;if(this.storageService.getBoolean(T,f))return new _i;const y={label:d("neverShowAgain","Don't Show Again"),run:()=>this.storageService.store(T,!0,f,0),isSecondary:s.neverShowAgain.isSecondary};s.neverShowAgain.isSecondary?e=[...e,y]:e=[y,...e]}let n=!1;const a=[],r=[];e.forEach((f,T)=>{const y=new si(`workbench.dialog.choice.${T}`,f);f.isSecondary?r.push(y):a.push(y),o.add(y.onDidRun(()=>{n=!0,f.keepOpen||p.close()})),o.add(y)});const h={primary:a,secondary:r},p=this.notify({severity:i,message:t,actions:h,sticky:s==null?void 0:s.sticky,priority:s==null?void 0:s.priority});return k.once(p.onDidClose)(()=>{o.dispose(),s&&typeof s.onCancel=="function"&&!n&&s.onCancel()}),p}status(i,t){return this.model.showStatusMessage(i,t)}};Ci.DND_SETTINGS_KEY="notifications.doNotDisturbMode";Ci=m([l(0,_t)],Ci);var te=".monaco-workbench>.notifications-center{border-radius:4px;bottom:31px;display:none;overflow:hidden;position:absolute;right:8px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:8px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row[data-last-element=false]>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container,.monaco-workbench>.notifications-center .notifications-list-container .monaco-scrollable-element,.monaco-workbench>.notifications-center .notifications-list-container .notification-list-item{border-radius:0}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";vi(te,{});let yi=class ki extends Zi{constructor(i,t,e,s,o,n,a,r,h){super(e),this.container=i,this.model=t,this.instantiationService=s,this.layoutService=o,this.contextKeyService=n,this.editorGroupService=a,this.keybindingService=r,this.notificationService=h,this._onDidChangeVisibility=this._register(new g),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=di.bindTo(this.contextKeyService),this.notificationsCenterVisibleContextKey=di.bindTo(n),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(i=>this.onDidChangeNotification(i))),this._register(this.layoutService.onDidLayout(i=>this.layout(hi.lift(i)))),this._register(this.notificationService.onDidChangeDoNotDisturbMode(()=>this.onDidChangeDoNotDisturbMode()))}onDidChangeDoNotDisturbMode(){this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){ei(this.notificationsList).show(!0);return}this.notificationsCenterContainer||this.create(),this.updateTitle();const[i,t]=ii(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,t.classList.add("visible"),i.show(),this.layout(this.workbenchDimensions),i.updateNotificationsList(0,0,this.model.notifications),i.focusFirst(),this.updateStyles(),this.model.notifications.forEach(e=>e.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[i,t]=ii(this.notificationsCenterTitle,this.clearAllAction);this.model.notifications.length===0?(i.textContent=d("notificationsEmpty","No new notifications"),t.enabled=!1):(i.textContent=d("notifications","Notifications"),t.enabled=this.model.notifications.some(e=>!e.hasProgress))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const i=document.createElement("div");i.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(i);const t=this._register(this.instantiationService.createInstance(oi)),e=this._register(new zi(i,{ariaLabel:d("notificationsToolbar","Notification Center Actions"),actionRunner:t}));this.clearAllAction=this._register(this.instantiationService.createInstance(R,R.ID,R.LABEL)),e.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.toggleDoNotDisturbAction=this._register(this.instantiationService.createInstance(F,F.ID,F.LABEL)),e.push(this.toggleDoNotDisturbAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.toggleDoNotDisturbAction)});const s=this._register(this.instantiationService.createInstance(V,V.ID,V.LABEL));e.push(s,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(s)}),this.notificationsList=this.instantiationService.createInstance(bi,this.notificationsCenterContainer,{widgetAriaLabel:d("notificationsCenterWidgetAriaLabel","Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(i){const t=this.keybindingService.lookupKeybinding(i.id);return t?t.getLabel():null}onDidChangeNotification(i){if(!this._isVisible)return;let t=!1;const[e,s]=ii(this.notificationsList,this.notificationsCenterContainer);switch(i.kind){case 0:e.updateNotificationsList(i.index,0,[i.item]),i.item.updateVisibility(!0);break;case 1:switch(i.detail){case 2:e.updateNotificationsList(i.index,1,[i.item]);break;case 1:i.item.expanded&&e.updateNotificationHeight(i.item);break}break;case 2:e.updateNotificationsList(i.index,1,[i.item]);break;case 3:t=q(document.activeElement,s),e.updateNotificationsList(i.index,1),i.item.updateVisibility(!1);break}this.updateTitle(),this.model.notifications.length===0&&(this.hide(),t&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const i=q(document.activeElement,this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach(t=>t.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),i&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const i=this.getColor(it);this.notificationsCenterContainer.style.boxShadow=i?`0 0 8px 2px ${i}`:"";const t=this.getColor(St);this.notificationsCenterContainer.style.border=t?`1px solid ${t}`:"";const e=this.getColor(Tt);this.notificationsCenterHeader.style.color=e??"";const s=this.getColor(At);this.notificationsCenterHeader.style.background=s??""}}layout(i){if(this.workbenchDimensions=i,this._isVisible&&this.notificationsCenterContainer){const t=ki.MAX_DIMENSIONS.width,e=ki.MAX_DIMENSIONS.height;let s=t,o=e;this.workbenchDimensions&&(s=this.workbenchDimensions.width,s-=2*8,o=this.workbenchDimensions.height-35,this.layoutService.isVisible("workbench.parts.statusbar")&&(o-=22),this.layoutService.isVisible("workbench.parts.titlebar")&&(o-=22),o-=2*12),ei(this.notificationsList).layout(Math.min(t,s),Math.min(e,o))}}clearAll(){this.hide();for(const i of[...this.model.notifications])i.hasProgress||i.close()}};yi.MAX_DIMENSIONS=new hi(450,400);yi=m([l(2,qi),l(3,K),l(4,Yi),l(5,Ji),l(6,Qi),l(7,Xi),l(8,Q)],yi);class ee extends _{constructor(i){super(),this.model=i;for(const t of i.notifications)this.triggerAriaAlert(t);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(i=>this.onDidChangeNotification(i)))}onDidChangeNotification(i){i.kind===0&&(this.triggerAriaAlert(i.item),i.item.severity===u.Error&&(i.item.message.original instanceof Error?console.error(i.item.message.original):console.error(Oi(i.item.message.linkedText.toString(),!0))))}triggerAriaAlert(i){if(i.priority===D.SILENT)return;const t=i.onDidChangeContent(e=>{e.kind===1&&this.doTriggerAriaAlert(i)});k.once(i.onDidClose)(()=>t.dispose()),this.doTriggerAriaAlert(i)}doTriggerAriaAlert(i){let t;i.severity===u.Error?t=d("alertErrorMessage","Error: {0}",i.message.linkedText.toString()):i.severity===u.Warning?t=d("alertWarningMessage","Warning: {0}",i.message.linkedText.toString()):t=d("alertInfoMessage","Info: {0}",i.message.linkedText.toString()),Et(t)}}xt(async c=>{const i=c.get(Lt).container,t=c.get(Q).model,e=c.get(K);setTimeout(()=>{const s=e.createInstance(yi,i,t),o=e.createInstance(O,i,t);e.createInstance(ee,t),e.createInstance(xi),zt(s,o,t),o.layout(kt(i))})});function ge(c){return{[Q.toString()]:new Ot(Ci,void 0,!0),...Mt(c)}}export{ge as default};
