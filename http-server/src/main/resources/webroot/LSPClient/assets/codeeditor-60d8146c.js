import{r$ as C,_ as p,a as s,cx as R,X as N,e as k,aS as x,a0 as W,D as b,E as I,w as E,cF as l,iN as y,au as G,b8 as M,$ as v,b7 as S,th as D,rh as c,ec as F,vP as L,ou as w,vQ as A,a6 as T,H as O,gr as B,aH as $,b2 as K}from"./index-1e6bb64c.js";let n=class u extends b{constructor(e){super(),this.editorService=e,this._onHighlightRemoved=this._register(new I),this.onHighlightRemoved=this._onHighlightRemoved.event,this.rangeHighlightDecorationId=null,this.editor=null,this.editorDisposables=this._register(new E)}removeHighlightRange(){if(this.editor&&this.rangeHighlightDecorationId){const e=this.rangeHighlightDecorationId;this.editor.changeDecorations(i=>{i.removeDecoration(e)}),this._onHighlightRemoved.fire()}this.rangeHighlightDecorationId=null}highlightRange(e,i){i=i??this.getEditor(e),l(i)?this.doHighlightRange(i,e):y(i)&&l(i.activeCodeEditor)&&this.doHighlightRange(i.activeCodeEditor,e)}doHighlightRange(e,i){this.removeHighlightRange(),e.changeDecorations(t=>{this.rangeHighlightDecorationId=t.addDecoration(i.range,this.createRangeHighlightDecoration(i.isWholeLine))}),this.setEditor(e)}getEditor(e){var t;const i=(t=this.editorService.activeEditor)==null?void 0:t.resource;if(i&&G(i,e.resource)&&l(this.editorService.activeTextEditorControl))return this.editorService.activeTextEditorControl}setEditor(e){this.editor!==e&&(this.editorDisposables.clear(),this.editor=e,this.editorDisposables.add(this.editor.onDidChangeCursorPosition(i=>{(i.reason===0||i.reason===3||i.reason===5||i.reason===6)&&this.removeHighlightRange()})),this.editorDisposables.add(this.editor.onDidChangeModel(()=>{this.removeHighlightRange()})),this.editorDisposables.add(this.editor.onDidDispose(()=>{this.removeHighlightRange(),this.editor=null})))}createRangeHighlightDecoration(e=!0){return e?u._WHOLE_LINE_RANGE_HIGHLIGHT:u._RANGE_HIGHLIGHT}dispose(){var e;super.dispose(),(e=this.editor)!=null&&e.getModel()&&(this.removeHighlightRange(),this.editor=null)}};n._WHOLE_LINE_RANGE_HIGHLIGHT=C.register({description:"codeeditor-range-highlight-whole",stickiness:1,className:"rangeHighlight",isWholeLine:!0});n._RANGE_HIGHLIGHT=C.register({description:"codeeditor-range-highlight",stickiness:1,className:"rangeHighlight"});n=p([s(0,R)],n);let H=class extends M{constructor(e,i,t,a){if(super(),this.editor=e,this.label=i,this._onClick=this._register(new I),this.onClick=this._onClick.event,this._domNode=v(".floating-click-widget"),this._domNode.style.padding="6px 11px",this._domNode.style.borderRadius="2px",this._domNode.style.cursor="pointer",t){const o=a.lookupKeybinding(t);o&&(this.label+=` (${o.getLabel()})`)}}getId(){return"editor.overlayWidget.floatingClickWidget"}getDomNode(){return this._domNode}getPosition(){return{preference:1}}render(){S(this._domNode),this._domNode.style.backgroundColor=D(L,c(F)),this._domNode.style.color=D(A,c(w)),this._domNode.style.border=`1px solid ${c(T)}`,O(this._domNode,v("")).textContent=this.label,this.onclick(this._domNode,e=>this._onClick.fire()),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}};H=p([s(3,N)],H);let _=class extends b{constructor(e,i,t,a){if(super(),!(e instanceof B)){const o=t.createMenu($.EditorContent,a),r=new E,m=()=>{if(r.clear(),!e.hasModel()||e.getOption(59))return;const d=[];if(K(o,{renderShortTitle:!0,shouldForwardArgs:!0},d),d.length===0)return;const[h]=d,g=i.createInstance(H,e,h.label,h.id);r.add(g),r.add(g.onClick(()=>h.run(e.getModel().uri))),g.render()};this._store.add(o),this._store.add(r),this._store.add(o.onDidChange(m)),m()}}};_.ID="editor.contrib.floatingClickMenu";_=p([s(1,k),s(2,x),s(3,W)],_);export{_ as F,n as R};
