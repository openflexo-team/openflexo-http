import{B as l,_ as v,a as u,X as We,a1 as Ui,sH as Gs,pH as Ho,sI as $o,pz as zo,aO as Qe,iE as qo,aw as Hn,pB as Jo,fD as Gi,aN as Me,kf as Yo,sJ as Ye,sK as rn,sL as Re,sM as ii,mR as Xo,sN as Je,nX as ae,sO as on,nI as Qo,e as j,iV as js,nr as xi,bM as F,U as Y,S as ye,sP as Hs,cW as rt,ic as $n,ay as pe,aQ as ie,E as I,a3 as ge,cA as Ie,sQ as It,s8 as Zo,D as ee,mO as Rt,co as ea,kk as ta,ct as dt,ij as $s,z as zn,cx as O,dx as zs,f as ia,L as qs,bA as it,aV as yt,mK as Jt,b as Js,I as ji,nd as na,bC as Pe,bB as qn,nq as sa,iJ as Ys,sR as Ti,sS as mi,dq as Ss,eo as ra,sT as an,sU as cn,kx as oa,dU as Xs,mN as aa,mU as ca,k7 as da,sA as Jn,sV as la,s9 as vs,aT as Yt,sW as Qs,sX as ga,sY as ua,sZ as Yn,n as St,c0 as me,bj as ue,Q as vt,ao as wt,a0 as _e,cl as Xt,jB as ha,$ as P,av as oe,aa as D,b0 as Ze,ac as _,H as b,b1 as Ge,au as je,b8 as Hi,s_ as dn,b9 as $i,b3 as le,di as pa,rh as X,cM as Xn,cN as Qn,a6 as Zn,a9 as es,s$ as fa,t0 as Zs,t1 as ma,iv as ba,w as G,t as Qt,t2 as ya,t3 as Sa,t4 as va,df as wa,it as Ea,fk as Ca,b7 as Ae,dw as er,or as ts,t5 as ln,t6 as gn,m as is,aW as ns,eb as tr,t7 as ir,bS as xa,t8 as Ta,t9 as ka,ea as Ia,bZ as et,pL as _a,ek as nr,bg as ss,q_ as sr,ta as Se,tb as ve,ov as Da,qp as La,u as Ma,r4 as Ra,tc as rs,cw as Aa,td as Oa,a2 as he,te as Na,tf as Wa,cu as Pa,np as rr,tg as Fa,th as Ka,rr as Ne,io as H,ti as Fe,sm as ni,cV as Ke,rj as si,tj as ri,ri as oi,tk as ai,tl as ci,tm as di,tn as li,to as At,a$ as Ct,O as os,Y as zi,tp as or,fY as as,N as ar,tq as cr,tr as Be,rl as st,dZ as Ba,d_ as Va,ts as Ua,tt as Ga,tu as ja,tv as Ha,tw as $a,dS as dr,mV as fe,tx as $,ty as bi,tz as Ce,tA as lr,tB as gr,tC as ur,tD as ut,cR as hr,tE as za,hQ as qa,iu as Ja,ec as J,aH as W,tF as pr,dF as fr,b5 as ot,tG as ki,tH as mr,tI as br,tJ as yr,tK as Sr,tL as vr,tM as wr,tN as Er,tO as Cr,rg as lt,tP as xt,aI as Ya,tQ as Xa,bz as Qa,aL as at,bH as Za,k5 as xr,eR as Tr,h as ec,r$ as tc,tR as ic,b4 as nc,bE as sc,kn as xe,tS as rc,tT as kr,tU as tt,tV as Ir,tW as ht,tX as w,tY as oc,dT as yi,h_ as ac,d2 as pt,ba as _r,tZ as Dr,r2 as Lr,b_ as Mr,t_ as cs,iq as He,ir as $e,eM as Ii,is as Ve,t$ as we,hP as Rr,u0 as Ar,aR as cc,u1 as qi,bO as ft,bd as dc,j9 as ct,cd as lc,dz as Or,ch as gc,u2 as _i,u3 as Nr,u4 as uc,dc as Wr,d as _t,u5 as hc,u6 as Pr,u7 as Fr,d3 as Kr,u8 as Br,u9 as Vr,ua as Le,sq as pc,ub as fc,uc as Ur,og as mc,ud as Di,ue as de,uf as bc,ug as yc,uh as Gr,dd as Sc,ui as jr,aU as vc,uj as wc,uk as Ec,pd as Cc,k6 as xc,ul as Tc,um as kc,un as Te,uo as Tt,up as Hr,uq as un,ur as $r,us as Ic,ou as _c,c_ as Dc,cZ as Lc,cp as ws,db as Mc,qt as Rc,y as Ac,G as gi,ut as Oc,nV as Nc,x as Es,mW as Wc,iH as Pc,pK as Fc,i_ as Kc,eV as zr,kw as qr,k as Dt,iB as Bc,hp as Vc,aj as L,ak as M,o as Yi,h6 as ui,uu as Cs,aF as k,gs as Uc,fM as Gc,uv as hi,uw as Xi,ux as jc,uy as Hc,uz as $c,uA as zc,bv as se,fO as pi,uB as qc,uC as Jc,uD as Yc,uE as Xc,uF as Qc,dK as nt,cF as Zc,uG as ed,uH as td}from"./index-e8d740ba.js";import{g as id}from"./unboundCommands-b9708867.js";import{F as Jr,c as Yr,I as ds,A as nd,R as sd,h as rd}from"./configuration-d627b20e.js";import{a as od,M as ad,S as cd}from"./simpleEditorOptions-c113d5ce.js";import{R as xs}from"./codeeditor-c160ea7f.js";import{g as hn}from"./settingsMerge-3eb02000.js";import"./snippetsService-69c12ab2.js";import"./languageService-96e25f8d.js";const Ue="keybinding.entry.template",Ts=l("default","System"),ks=l("extension","Extension"),Is=l("user","User"),dd=Ye(on,Re,Je),_s=/@source:\s*(user|default|system|extension)/i,Ds=/@ext:\s*((".+")|([^\s]+))/i;let pn=class ke extends Gs{constructor(e,t,i){super(),this.keybindingsService=t,this.extensionService=i,this._keybindingItems=[],this._keybindingItemsSortedByPrecedence=[],this.modifierLabels={ui:Ho.modifierLabels[e],aria:$o.modifierLabels[e],user:zo.modifierLabels[e]}}fetch(e,t=!1){let i=t?this._keybindingItemsSortedByPrecedence:this._keybindingItems;const n=/@command:\s*(.+)/i.exec(e);if(n&&n[1])return i.filter(s=>s.command===n[1]).map(s=>({id:ke.getId(s),keybindingItem:s,templateId:Ue}));if(_s.test(e))i=this.filterBySource(i,e),e=e.replace(_s,"");else{const s=Ds.exec(e);if(s&&(s[2]||s[3])){const r=s[2]?s[2].substring(1,s[2].length-1):s[3];i=this.filterByExtension(i,r),e=e.replace(Ds,"")}else{const r=/@keybinding:\s*((\".+\")|(\S+))/i.exec(e);r&&(r[2]||r[3])&&(e=r[2]||`"${r[3]}"`)}}return e=e.trim(),e?this.filterByText(i,e):i.map(s=>({id:ke.getId(s),keybindingItem:s,templateId:Ue}))}filterBySource(e,t){return/@source:\s*default/i.test(t)||/@source:\s*system/i.test(t)?e.filter(i=>i.source===Ts):/@source:\s*user/i.test(t)?e.filter(i=>i.source===Is):/@source:\s*extension/i.test(t)?e.filter(i=>!Qe(i.source)||i.source===ks):e}filterByExtension(e,t){return t=t.toLowerCase().trim(),e.filter(i=>{var n;return!Qe(i.source)&&(qo.equals(i.source.identifier,t)||((n=i.source.displayName)==null?void 0:n.toLowerCase())===t.toLowerCase())})}filterByText(e,t){const i=t.charAt(0)==='"',n=t.charAt(t.length-1)==='"',s=i&&n;i&&(t=t.substring(1)),n&&(t=t.substring(0,t.length-1)),t=t.trim();const r=[],o=t.split(" "),c=this.splitKeybindingWords(o);for(const d of e){const g=new ld(this.modifierLabels,d,t,o,c,s);(g.commandIdMatches||g.commandLabelMatches||g.commandDefaultLabelMatches||g.sourceMatches||g.whenMatches||g.keybindingMatches||g.extensionIdMatches||g.extensionLabelMatches)&&r.push({id:ke.getId(d),templateId:Ue,commandLabelMatches:g.commandLabelMatches||void 0,commandDefaultLabelMatches:g.commandDefaultLabelMatches||void 0,keybindingItem:d,keybindingMatches:g.keybindingMatches||void 0,commandIdMatches:g.commandIdMatches||void 0,sourceMatches:g.sourceMatches||void 0,whenMatches:g.whenMatches||void 0,extensionIdMatches:g.extensionIdMatches||void 0,extensionLabelMatches:g.extensionLabelMatches||void 0})}return r}splitKeybindingWords(e){const t=[];for(const i of e)t.push(...Hn(i.split("+")));return t}async resolve(e=new Map){const t=new Qo;for(const s of this.extensionService.extensions)t.set(s.identifier,s);this._keybindingItemsSortedByPrecedence=[];const i=new Map;for(const s of this.keybindingsService.getKeybindings())s.command&&(this._keybindingItemsSortedByPrecedence.push(ke.toKeybindingEntry(s.command,s,e,t)),i.set(s.command,!0));const n=this.keybindingsService.getDefaultKeybindings().map(s=>s.command);for(const s of id(i)){const r=new Jo(void 0,s,null,void 0,n.indexOf(s)===-1,null,!1);this._keybindingItemsSortedByPrecedence.push(ke.toKeybindingEntry(s,r,e,t))}return this._keybindingItemsSortedByPrecedence=Gi(this._keybindingItemsSortedByPrecedence,s=>ke.getId(s)),this._keybindingItems=this._keybindingItemsSortedByPrecedence.slice(0).sort((s,r)=>ke.compareKeybindingData(s,r)),super.resolve()}static getId(e){var t;return e.command+(((t=e==null?void 0:e.keybinding)==null?void 0:t.getAriaLabel())??"")+e.when+(Qe(e.source)?e.source:e.source.identifier.value)}static compareKeybindingData(e,t){return e.keybinding&&!t.keybinding?-1:t.keybinding&&!e.keybinding?1:e.commandLabel&&!t.commandLabel?-1:t.commandLabel&&!e.commandLabel?1:e.commandLabel&&t.commandLabel&&e.commandLabel!==t.commandLabel?e.commandLabel.localeCompare(t.commandLabel):e.command===t.command?e.keybindingItem.isDefault?1:-1:e.command.localeCompare(t.command)}static toKeybindingEntry(e,t,i,n){var c;const s=Me.getCommand(e),r=i.get(e);let o=Is;if(t.isDefault){const d=t.extensionId??(t.resolvedKeybinding||(c=s==null?void 0:s.source)==null?void 0:c.id);o=d?n.get(d)??ks:Ts}return{keybinding:t.resolvedKeybinding,keybindingItem:t,command:e,commandLabel:ke.getCommandLabel(s,r),commandDefaultLabel:ke.getCommandDefaultLabel(s),when:t.when?t.when.serialize():"",source:o}}static getCommandDefaultLabel(e){if(!Yo.isDefaultVariant()&&e&&e.title&&e.title.original){const t=e.category?e.category.original:void 0,i=e.title.original;return t?l("cat.title","{0}: {1}",t,i):i}return null}static getCommandLabel(e,t){if(e){const i=e.category?typeof e.category=="string"?e.category:e.category.value:void 0,n=typeof e.title=="string"?e.title:e.title.value;return i?l("cat.title","{0}: {1}",i,n):n}return t||""}};pn=v([u(1,We),u(2,Ui)],pn);class ld{constructor(e,t,i,n,s,r){this.modifierLabels=e,this.commandIdMatches=null,this.commandLabelMatches=null,this.commandDefaultLabelMatches=null,this.sourceMatches=null,this.whenMatches=null,this.keybindingMatches=null,this.extensionIdMatches=null,this.extensionLabelMatches=null,r||(this.commandIdMatches=this.matches(i,t.command,Ye(Re,rn),n),this.commandLabelMatches=t.commandLabel?this.matches(i,t.commandLabel,(o,c)=>Re(o,t.commandLabel,!0),n):null,this.commandDefaultLabelMatches=t.commandDefaultLabel?this.matches(i,t.commandDefaultLabel,(o,c)=>Re(o,t.commandDefaultLabel,!0),n):null,this.whenMatches=t.when?this.matches(null,t.when,Ye(Re,rn),n):null,Qe(t.source)?this.sourceMatches=this.matches(i,t.source,(o,c)=>Re(o,t.source,!0),n):this.extensionLabelMatches=t.source.displayName?this.matches(i,t.source.displayName,(o,c)=>Re(o,t.commandLabel,!0),n):null),this.keybindingMatches=t.keybinding?this.matchesKeybinding(t.keybinding,i,s,r):null}matches(e,t,i,n){let s=e?dd(e,t):null;return s||(s=this.matchesWords(n,t,i)),s&&(s=this.filterAndSort(s)),s}matchesWords(e,t,i){let n=[];for(const s of e){const r=i(s,t);if(r)n=[...n||[],...r];else{n=null;break}}return n}filterAndSort(e){return Gi(e,t=>t.start+"."+t.end).filter(t=>!e.some(i=>!(i.start===t.start&&i.end===t.end)&&i.start<=t.start&&i.end>=t.end)).sort((t,i)=>t.start-i.start)}matchesKeybinding(e,t,i,n){const[s,r]=e.getChords(),o=e.getUserSettingsLabel(),c=e.getAriaLabel(),d=e.getLabel();if(o&&ii(t,o)===0||c&&ii(t,c)===0||d&&ii(t,d)===0)return{firstPart:this.createCompleteMatch(s),chordPart:this.createCompleteMatch(r)};const g={};let h={};const f=[],m=[];let p=[],y=!0;for(let x=0;x<i.length;x++){const E=i[x];let S=!1,R=!1;y=y&&!g.keyCode;let T=!h.keyCode;if(y&&(S=this.matchPart(s,g,E,n),g.keyCode)){for(const te of p)m.indexOf(te)===-1&&f.splice(f.indexOf(te),1);h={},p=[],T=!1}T&&(R=this.matchPart(r,h,E,n)),S&&m.push(x),R&&p.push(x),(S||R)&&f.push(x),y=y&&this.isModifier(E)}return f.length!==i.length||n&&(!this.isCompleteMatch(s,g)||!Xo(h)&&!this.isCompleteMatch(r,h))?null:this.hasAnyMatch(g)||this.hasAnyMatch(h)?{firstPart:g,chordPart:h}:null}matchPart(e,t,i,n){let s=!1;return this.matchesMetaModifier(e,i)&&(s=!0,t.metaKey=!0),this.matchesCtrlModifier(e,i)&&(s=!0,t.ctrlKey=!0),this.matchesShiftModifier(e,i)&&(s=!0,t.shiftKey=!0),this.matchesAltModifier(e,i)&&(s=!0,t.altKey=!0),this.matchesKeyCode(e,i,n)&&(t.keyCode=!0,s=!0),s}matchesKeyCode(e,t,i){if(!e)return!1;const n=e.keyAriaLabel||"";if(i||n.length===1||t.length===1){if(ii(n,t)===0)return!0}else if(Je(t,n))return!0;return!1}matchesMetaModifier(e,t){return!e||!e.metaKey?!1:this.wordMatchesMetaModifier(t)}matchesCtrlModifier(e,t){return!e||!e.ctrlKey?!1:this.wordMatchesCtrlModifier(t)}matchesShiftModifier(e,t){return!e||!e.shiftKey?!1:this.wordMatchesShiftModifier(t)}matchesAltModifier(e,t){return!e||!e.altKey?!1:this.wordMatchesAltModifier(t)}hasAnyMatch(e){return!!e.altKey||!!e.ctrlKey||!!e.metaKey||!!e.shiftKey||!!e.keyCode}isCompleteMatch(e,t){return e?!(!t.keyCode||e.metaKey&&!t.metaKey||e.altKey&&!t.altKey||e.ctrlKey&&!t.ctrlKey||e.shiftKey&&!t.shiftKey):!0}createCompleteMatch(e){const t={};return e&&(t.keyCode=!0,e.metaKey&&(t.metaKey=!0),e.altKey&&(t.altKey=!0),e.ctrlKey&&(t.ctrlKey=!0),e.shiftKey&&(t.shiftKey=!0)),t}isModifier(e){return!!(this.wordMatchesAltModifier(e)||this.wordMatchesCtrlModifier(e)||this.wordMatchesMetaModifier(e)||this.wordMatchesShiftModifier(e))}wordMatchesAltModifier(e){return!!(ae(this.modifierLabels.ui.altKey,e)||ae(this.modifierLabels.aria.altKey,e)||ae(this.modifierLabels.user.altKey,e)||ae(l("option","option"),e))}wordMatchesCtrlModifier(e){return!!(ae(this.modifierLabels.ui.ctrlKey,e)||ae(this.modifierLabels.aria.ctrlKey,e)||ae(this.modifierLabels.user.ctrlKey,e))}wordMatchesMetaModifier(e){return!!(ae(this.modifierLabels.ui.metaKey,e)||ae(this.modifierLabels.aria.metaKey,e)||ae(this.modifierLabels.user.metaKey,e)||ae(l("meta","meta"),e))}wordMatchesShiftModifier(e){return!!(ae(this.modifierLabels.ui.shiftKey,e)||ae(this.modifierLabels.aria.shiftKey,e)||ae(this.modifierLabels.user.shiftKey,e))}}let Ot=class fn extends js{constructor(e){super(),this.searchOptions=null,this.resource=void 0,this.keybindingsModel=e.createInstance(pn,xi)}get typeId(){return fn.ID}getName(){return l("keybindingsInputName","Keyboard Shortcuts")}async resolve(){return this.keybindingsModel}matches(e){return e instanceof fn}dispose(){this.keybindingsModel.dispose(),super.dispose()}};Ot.ID="workbench.input.keybindings";Ot=v([u(0,j)],Ot);let Nt=class mn extends js{constructor(e){super(),this.resource=Y.from({scheme:ye.vscodeSettings,path:"settingseditor"}),this._settingsModel=e.createSettings2EditorModel()}matches(e){return super.matches(e)||e instanceof mn}get typeId(){return mn.ID}getName(){return l("settingsEditor2InputName","Settings")}async resolve(){return this._settingsModel}dispose(){this._settingsModel.dispose(),super.dispose()}};Nt.ID="workbench.input.settings2";Nt=v([u(0,F)],Nt);function gt(a,...e){return e.some(t=>a.includes(t))}function Ls(a){return a===""||pe(a)}function Xr(a){const e=Array.isArray(a.type)?a.type:[a.type],t=gt(e,"null"),i=(gt(e,"number")||gt(e,"integer"))&&(e.length===1||e.length===2&&t),n=hd(a),s=ud(a),r=pd(a),o=fd(a);return c=>{if(t&&Ls(c))return"";const d=[];if(r){const g=r(c);g&&d.push(g)}if(o){const g=o(c);g&&d.push(g)}return a.type==="boolean"&&c!==!0&&c!==!1&&d.push(l("validations.booleanIncorrectType",'Incorrect type. Expected "boolean".')),i&&(Ls(c)||typeof c=="boolean"||Array.isArray(c)||isNaN(+c)?d.push(l("validations.expectedNumeric","Value must be a number.")):d.push(...n.filter(g=>!g.isValid(+c)).map(g=>g.message))),a.type==="string"&&(a.enum&&!Hs(a.enum)?d.push(l("validations.stringIncorrectEnumOptions","The enum options should be strings, but there is a non-string option. Please file an issue with the extension author.")):Qe(c)?d.push(...s.filter(g=>!g.isValid(c)).map(g=>g.message)):d.push(l("validations.stringIncorrectType",'Incorrect type. Expected "string".'))),d.length?a.errorMessage?[a.errorMessage,...d].join(" "):d.join(" "):""}}function Qr(a,e){if(typeof e>"u")return;if(!(Array.isArray(e)?e:[e]).some(i=>gd(a,i)))return l("invalidTypeError","Setting has an invalid type, expected {0}. Fix in JSON.",JSON.stringify(e))}function gd(a,e){const t=typeof a;return e==="boolean"?t==="boolean":e==="object"?a&&!Array.isArray(a)&&t==="object":e==="null"?a===null:e==="array"?Array.isArray(a):e==="string"?t==="string":e==="number"||e==="integer"?t==="number":!0}function ud(a){const e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;let t;return typeof a.pattern=="string"&&(t=new RegExp(a.pattern)),[{enabled:a.maxLength!==void 0,isValid:i=>i.length<=a.maxLength,message:l("validations.maxLength","Value must be {0} or fewer characters long.",a.maxLength)},{enabled:a.minLength!==void 0,isValid:i=>i.length>=a.minLength,message:l("validations.minLength","Value must be {0} or more characters long.",a.minLength)},{enabled:t!==void 0,isValid:i=>t.test(i),message:a.patternErrorMessage||l("validations.regex","Value must match regex `{0}`.",a.pattern)},{enabled:a.format==="color-hex",isValid:i=>rt.Format.CSS.parseHex(i),message:l("validations.colorFormat","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.")},{enabled:a.format==="uri"||a.format==="uri-reference",isValid:i=>!!i.length,message:l("validations.uriEmpty","URI expected.")},{enabled:a.format==="uri"||a.format==="uri-reference",isValid:i=>e.test(i),message:l("validations.uriMissing","URI is expected.")},{enabled:a.format==="uri",isValid:i=>{const n=i.match(e);return!!(n&&n[2])},message:l("validations.uriSchemeMissing","URI with a scheme is expected.")},{enabled:a.enum!==void 0,isValid:i=>a.enum.includes(i),message:l("validations.invalidStringEnumValue","Value is not accepted. Valid values: {0}.",a.enum?a.enum.map(i=>`"${i}"`).join(", "):"[]")}].filter(i=>i.enabled)}function hd(a){const e=Array.isArray(a.type)?a.type:[a.type],t=gt(e,"null"),i=gt(e,"integer")&&(e.length===1||e.length===2&&t);if(!(gt(e,"number","integer")&&(e.length===1||e.length===2&&t)))return[];let s,r;return typeof a.exclusiveMaximum=="boolean"?s=a.exclusiveMaximum?a.maximum:void 0:s=a.exclusiveMaximum,typeof a.exclusiveMinimum=="boolean"?r=a.exclusiveMinimum?a.minimum:void 0:r=a.exclusiveMinimum,[{enabled:s!==void 0&&(a.maximum===void 0||s<=a.maximum),isValid:o=>o<s,message:l("validations.exclusiveMax","Value must be strictly less than {0}.",s)},{enabled:r!==void 0&&(a.minimum===void 0||r>=a.minimum),isValid:o=>o>r,message:l("validations.exclusiveMin","Value must be strictly greater than {0}.",r)},{enabled:a.maximum!==void 0&&(s===void 0||s>a.maximum),isValid:o=>o<=a.maximum,message:l("validations.max","Value must be less than or equal to {0}.",a.maximum)},{enabled:a.minimum!==void 0&&(r===void 0||r<a.minimum),isValid:o=>o>=a.minimum,message:l("validations.min","Value must be greater than or equal to {0}.",a.minimum)},{enabled:a.multipleOf!==void 0,isValid:o=>o%a.multipleOf===0,message:l("validations.multipleOf","Value must be a multiple of {0}.",a.multipleOf)},{enabled:i,isValid:o=>o%1===0,message:l("validations.expectedInteger","Value must be an integer.")}].filter(o=>o.enabled)}function pd(a){if(a.type==="array"&&a.items&&!Array.isArray(a.items)){const e=a.items;if(e&&!Array.isArray(e.type)){const t=i=>"'"+i+"'";return i=>{if(!i)return null;let n="";if(!Array.isArray(i))return n+=l("validations.arrayIncorrectType","Incorrect type. Expected an array."),n+=`
`,n;const s=i;if(a.uniqueItems&&new Set(s).size<s.length&&(n+=l("validations.stringArrayUniqueItems","Array has duplicate items"),n+=`
`),a.minItems&&s.length<a.minItems&&(n+=l("validations.stringArrayMinItem","Array must have at least {0} items",a.minItems),n+=`
`),a.maxItems&&s.length>a.maxItems&&(n+=l("validations.stringArrayMaxItem","Array must have at most {0} items",a.maxItems),n+=`
`),e.type==="string"){if(!Hs(s))return n+=l("validations.stringArrayIncorrectType","Incorrect type. Expected a string array."),n+=`
`,n;if(typeof e.pattern=="string"){const o=new RegExp(e.pattern);s.forEach(c=>{o.test(c)||(n+=e.patternErrorMessage||l("validations.stringArrayItemPattern","Value {0} must match regex {1}.",t(c),t(e.pattern)))})}const r=e.enum;r&&s.forEach(o=>{r.indexOf(o)===-1&&(n+=l("validations.stringArrayItemEnum","Value {0} is not one of {1}",t(o),"["+r.map(t).join(", ")+"]"),n+=`
`)})}else(e.type==="integer"||e.type==="number")&&s.forEach(r=>{const o=Si(e,r);o&&(n+=`${r}: ${o}
`)});return n}}}return null}function fd(a){if(a.type==="object"){const{properties:e,patternProperties:t,additionalProperties:i}=a;return n=>{if(!n)return null;const s=[];return $n(n)?Object.keys(n).forEach(r=>{const o=n[r];if(e&&r in e){const c=Si(e[r],o);c&&s.push(`${r}: ${c}
`);return}if(t){for(const c in t)if(RegExp(c).test(r)){const d=Si(t[c],o);d&&s.push(`${r}: ${d}
`);return}}if(i===!1)s.push(l("validations.objectPattern",`Property {0} is not allowed.
`,r));else if(typeof i=="object"){const c=Si(i,o);c&&s.push(`${r}: ${c}
`)}}):s.push(l("validations.objectIncorrectType","Incorrect type. Expected an object.")),s.length?a.errorMessage?[a.errorMessage,...s].join(" "):s.join(" "):""}}return null}function Si(a,e){return Xr(a)(e)}const K={startLineNumber:-1,startColumn:-1,endLineNumber:-1,endColumn:-1};function Qi(a){return a.startLineNumber===-1&&a.startColumn===-1&&a.endLineNumber===-1&&a.endColumn===-1}class ls extends Gs{constructor(){super(...arguments),this._currentResultGroups=new Map}updateResultGroup(e,t){return t?this._currentResultGroups.set(e,t):this._currentResultGroups.delete(e),this.removeDuplicateResults(),this.update()}removeDuplicateResults(){const e=new Set;[...this._currentResultGroups.keys()].sort((t,i)=>this._currentResultGroups.get(t).order-this._currentResultGroups.get(i).order).forEach(t=>{const i=this._currentResultGroups.get(t);i.result.filterMatches=i.result.filterMatches.filter(n=>!e.has(n.setting.key)),i.result.filterMatches.forEach(n=>e.add(n.setting.key))})}compareTwoNullableNumbers(e,t){const i=e??Number.MAX_SAFE_INTEGER,n=t??Number.MAX_SAFE_INTEGER;return i<n?-1:i>n?1:0}filterSettings(e,t,i){const n=this.filterGroups,s=[];for(const r of n){const o=t(r);for(const c of r.sections)for(const d of c.settings){const g=i(d,r);(o||g)&&s.push({setting:d,matches:g&&g.matches,matchType:(g==null?void 0:g.matchType)??It.None,score:(g==null?void 0:g.score)??0})}}return s.sort((r,o)=>{if(r.matchType!==o.matchType)return o.matchType-r.matchType;if(r.setting.extensionInfo&&o.setting.extensionInfo&&r.setting.extensionInfo.id===o.setting.extensionInfo.id){if(r.setting.categoryLabel!==o.setting.categoryLabel&&(r.setting.categoryOrder!==void 0||o.setting.categoryOrder!==void 0)&&r.setting.categoryOrder!==o.setting.categoryOrder)return this.compareTwoNullableNumbers(r.setting.categoryOrder,o.setting.categoryOrder);if(r.setting.categoryLabel===o.setting.categoryLabel&&(r.setting.order!==void 0||o.setting.order!==void 0)&&r.setting.order!==o.setting.order)return this.compareTwoNullableNumbers(r.setting.order,o.setting.order)}return o.score-r.score}),s}getPreference(e){for(const t of this.settingsGroups)for(const i of t.sections)for(const n of i.settings)if(e===n.key)return n}collectMetadata(e){const t=Object.create(null);let i=!1;return e.forEach(n=>{n.result.metadata&&(t[n.id]=n.result.metadata,i=!0)}),i?t:null}get filterGroups(){return this.settingsGroups}}class gs extends ls{constructor(e,t){super(),this._configurationTarget=t,this._onDidChangeGroups=this._register(new I),this.onDidChangeGroups=this._onDidChangeGroups.event,this.settingsModel=e.object.textEditorModel,this._register(this.onWillDispose(()=>e.dispose())),this._register(this.settingsModel.onDidChangeContent(()=>{this._settingsGroups=void 0,this._onDidChangeGroups.fire()}))}get uri(){return this.settingsModel.uri}get configurationTarget(){return this._configurationTarget}get settingsGroups(){return this._settingsGroups||this.parse(),this._settingsGroups}get content(){return this.settingsModel.getValue()}findValueMatches(e,t){return this.settingsModel.findMatches(e,t.valueRange,!1,!1,null,!1).map(i=>i.range)}isSettingsProperty(e,t){return t.length===0}parse(){this._settingsGroups=Zr(this.settingsModel,(e,t)=>this.isSettingsProperty(e,t))}update(){const e=[...this._currentResultGroups.values()];if(!e.length)return;const t=[],i=[];e.forEach(o=>{o.result.filterMatches.forEach(c=>{t.push(c.setting),c.matches&&i.push(...c.matches)})});let n;const s=this.settingsGroups[0];s&&(n={id:s.id,range:s.range,sections:[{settings:t}],title:s.title,titleRange:s.titleRange,order:s.order,extensionInfo:s.extensionInfo});const r=this.collectMetadata(e);return{allGroups:this.settingsGroups,filteredGroups:n?[n]:[],matches:i,metadata:r}}}let Li=class extends ls{constructor(e,t){super(),this._defaultSettings=e,this._onDidChangeGroups=this._register(new I),this.onDidChangeGroups=this._onDidChangeGroups.event,this.dirty=!1,this._register(t.onDidChangeConfiguration(i=>{i.source===7&&(this.dirty=!0,this._onDidChangeGroups.fire())})),this._register(ge.as(Ie.Configuration).onDidSchemaChange(i=>{this.dirty=!0,this._onDidChangeGroups.fire()}))}get filterGroups(){return this.settingsGroups.slice(1)}get settingsGroups(){var t;const e=this._defaultSettings.getSettingsGroups(this.dirty);return(t=this.additionalGroups)!=null&&t.length&&e.push(...this.additionalGroups),this.dirty=!1,e}setAdditionalGroups(e){this.additionalGroups=e}findValueMatches(e,t){return[]}update(){throw new Error("Not supported")}};Li=v([u(1,ie)],Li);function Zr(a,e){const t=[];let i=null,n=null,s=[];const r=[];let o=-1;const c={startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0};function d(h,f,m){if(Array.isArray(s)?s.push(h):n&&(s[n]=h),r.length===o+1||r.length===o+2&&i!==null){const p=r.length===o+1?t[t.length-1]:i.overrides[i.overrides.length-1];if(p){const y=a.getPositionAt(f),x=a.getPositionAt(f+m);p.value=h,p.valueRange={startLineNumber:y.lineNumber,startColumn:y.column,endLineNumber:x.lineNumber,endColumn:x.column},p.range=Object.assign(p.range,{endLineNumber:x.lineNumber,endColumn:x.column})}}}const g={onObjectBegin:(h,f)=>{if(e(n,r)){o=r.length;const p=a.getPositionAt(h);c.startLineNumber=p.lineNumber,c.startColumn=p.column}const m={};d(m,h,f),s=m,n=null,r.push(s)},onObjectProperty:(h,f,m)=>{if(n=h,r.length===o+1||r.length===o+2&&i!==null){const p=a.getPositionAt(f),y={description:[],descriptionIsMarkdown:!1,key:h,keyRange:{startLineNumber:p.lineNumber,startColumn:p.column+1,endLineNumber:p.lineNumber,endColumn:p.column+m},range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:0,endColumn:0},value:null,valueRange:K,descriptionRanges:[],overrides:[],overrideOf:zn(i)};r.length===o+1?(t.push(y),Rt.test(h)&&(i=y)):i.overrides.push(y)}},onObjectEnd:(h,f)=>{if(s=r.pop(),o!==-1&&(r.length===o+1||r.length===o+2&&i!==null)){const m=r.length===o+1?t[t.length-1]:i.overrides[i.overrides.length-1];if(m){const p=a.getPositionAt(h+f);m.valueRange=Object.assign(m.valueRange,{endLineNumber:p.lineNumber,endColumn:p.column}),m.range=Object.assign(m.range,{endLineNumber:p.lineNumber,endColumn:p.column})}r.length===o+1&&(i=null)}if(r.length===o){const m=a.getPositionAt(h);c.endLineNumber=m.lineNumber,c.endColumn=m.column,o=-1}},onArrayBegin:(h,f)=>{const m=[];d(m,h,f),r.push(s),s=m,n=null},onArrayEnd:(h,f)=>{if(s=r.pop(),r.length===o+1||r.length===o+2&&i!==null){const m=r.length===o+1?t[t.length-1]:i.overrides[i.overrides.length-1];if(m){const p=a.getPositionAt(h+f);m.valueRange=Object.assign(m.valueRange,{endLineNumber:p.lineNumber,endColumn:p.column}),m.range=Object.assign(m.range,{endLineNumber:p.lineNumber,endColumn:p.column})}}},onLiteralValue:d,onError:h=>{const f=t[t.length-1];f&&(Qi(f.range)||Qi(f.keyRange)||Qi(f.valueRange))&&t.pop()}};return a.isDisposed()||Zo(a.getValue(),g),t.length>0?[{sections:[{settings:t}],title:"",titleRange:K,range:c}]:[]}class bn extends gs{constructor(){super(...arguments),this._configurationGroups=[]}get configurationGroups(){return this._configurationGroups}parse(){super.parse(),this._configurationGroups=Zr(this.settingsModel,(e,t)=>t.length===0)}isSettingsProperty(e,t){return e==="settings"&&t.length===1}}class Zi extends ee{constructor(e,t){super(),this._mostCommonlyUsedSettingsKeys=e,this.target=t,this._settingsByName=new Map,this._onDidChange=this._register(new I),this.onDidChange=this._onDidChange.event}getContent(e=!1){return(!this._content||e)&&this.initialize(),this._content}getContentWithoutMostCommonlyUsed(e=!1){return(!this._contentWithoutMostCommonlyUsed||e)&&this.initialize(),this._contentWithoutMostCommonlyUsed}getSettingsGroups(e=!1){return(!this._allSettingsGroups||e)&&this.initialize(),this._allSettingsGroups}initialize(){this._allSettingsGroups=this.parse(),this._content=this.toContent(this._allSettingsGroups,0),this._contentWithoutMostCommonlyUsed=this.toContent(this._allSettingsGroups,1)}parse(){const e=this.getRegisteredGroups();return this.initAllSettingsMap(e),[this.getMostCommonlyUsedSettings(e),...e]}getRegisteredGroups(){const e=ge.as(Ie.Configuration).getConfigurations().slice(),t=this.removeEmptySettingsGroups(e.sort(this.compareConfigurationNodes).reduce((i,n,s,r)=>this.parseConfig(n,i,r),[]));return this.sortGroups(t)}sortGroups(e){return e.forEach(t=>{t.sections.forEach(i=>{i.settings.sort((n,s)=>n.key.localeCompare(s.key))})}),e}initAllSettingsMap(e){this._settingsByName=new Map;for(const t of e)for(const i of t.sections)for(const n of i.settings)this._settingsByName.set(n.key,n)}getMostCommonlyUsedSettings(e){const t=Hn(this._mostCommonlyUsedSettingsKeys.map(i=>{const n=this._settingsByName.get(i);return n?{description:n.description,key:n.key,value:n.value,keyRange:K,range:K,valueRange:K,overrides:[],scope:4,type:n.type,enum:n.enum,enumDescriptions:n.enumDescriptions,descriptionRanges:[]}:null}));return{id:"mostCommonlyUsed",range:K,title:l("commonlyUsed","Commonly Used"),titleRange:K,sections:[{settings:t}]}}parseConfig(e,t,i,n,s){var o;s=s||{};let r=e.title;if(!r){const c=i.find(d=>d.id===e.id&&d.title);c&&(r=c.title)}if(r&&(n?n.sections[n.sections.length-1].title=r:(n=t.find(c=>{var d,g;return c.title===r&&((d=c.extensionInfo)==null?void 0:d.id)===((g=e.extensionInfo)==null?void 0:g.id)}),n||(n={sections:[{settings:[]}],id:e.id||"",title:r||"",titleRange:K,order:e.order,range:K,extensionInfo:e.extensionInfo},t.push(n)))),e.properties){n||(n={sections:[{settings:[]}],id:e.id||"",title:e.id||"",titleRange:K,order:e.order,range:K,extensionInfo:e.extensionInfo},t.push(n));const c=[];for(const d of[...n.sections[n.sections.length-1].settings,...this.parseSettings(e)])s[d.key]||(c.push(d),s[d.key]=!0);c.length&&(n.sections[n.sections.length-1].settings=c)}return(o=e.allOf)==null||o.forEach(c=>this.parseConfig(c,t,i,n,s)),t}removeEmptySettingsGroups(e){const t=[];for(const i of e)i.sections=i.sections.filter(n=>n.settings.length>0),i.sections.length&&t.push(i);return t}parseSettings(e){var o;const t=[],i=e.properties,n=e.extensionInfo,s=((o=e.extensionInfo)==null?void 0:o.id)===e.id?e.title:e.id,r=e.order;for(const c in i){const d=i[c];if(this.matchesScope(d)){const g=d.default;let h=d.markdownDescription||d.description||"";typeof h!="string"&&(h="");const f=h.split(`
`),m=Rt.test(c)?this.parseOverrideSettings(d.default):[];let p;d.type==="array"&&d.items&&!Array.isArray(d.items)&&d.items.type&&(d.items.enum?p="enum":Array.isArray(d.items.type)||(p=d.items.type));const y=d.type==="object"?d.properties:void 0,x=d.type==="object"?d.patternProperties:void 0,E=d.type==="object"?d.additionalProperties:void 0;let S=d.enum,R=d.markdownEnumDescriptions??d.enumDescriptions,T=!!d.markdownEnumDescriptions;p==="enum"&&!Array.isArray(d.items)&&(S=d.items.enum,R=d.items.markdownEnumDescriptions??d.items.enumDescriptions,T=!!d.items.markdownEnumDescriptions);let te=!1;d.type==="object"&&!d.additionalProperties&&d.properties&&Object.keys(d.properties).length&&(te=Object.keys(d.properties).every(be=>d.properties[be].type==="boolean"));let q=!1;Rt.test(c)&&(q=!0);let ne;if(!q){const be=d;be&&be.defaultValueSource&&(ne=be.defaultValueSource)}t.push({key:c,value:g,description:f,descriptionIsMarkdown:!!d.markdownDescription,range:K,keyRange:K,valueRange:K,descriptionRanges:[],overrides:m,scope:d.scope,type:d.type,arrayItemType:p,objectProperties:y,objectPatternProperties:x,objectAdditionalProperties:E,enum:S,enumDescriptions:R,enumDescriptionsAreMarkdown:T,uniqueItems:d.uniqueItems,tags:d.tags,disallowSyncIgnore:d.disallowSyncIgnore,restricted:d.restricted,extensionInfo:n,deprecationMessage:d.markdownDeprecationMessage||d.deprecationMessage,deprecationMessageIsMarkdown:!!d.markdownDeprecationMessage,validator:Xr(d),enumItemLabels:d.enumItemLabels,allKeysAreBoolean:te,editPresentation:d.editPresentation,order:d.order,nonLanguageSpecificDefaultValueSource:ne,isLanguageTagSetting:q,categoryLabel:s,categoryOrder:r})}}return t}parseOverrideSettings(e){return Object.keys(e).map(t=>({key:t,value:e[t],description:[],descriptionIsMarkdown:!1,range:K,keyRange:K,valueRange:K,descriptionRanges:[],overrides:[]}))}matchesScope(e){return e.scope?this.target===6?Jr.indexOf(e.scope)!==-1:this.target===5?Yr.indexOf(e.scope)!==-1:!0:!0}compareConfigurationNodes(e,t){if(typeof e.order!="number")return 1;if(typeof t.order!="number")return-1;if(e.order===t.order){const i=e.title||"",n=t.title||"";return i.localeCompare(n)}return e.order-t.order}toContent(e,t){const i=new us;for(let n=t;n<e.length;n++)i.pushGroup(e[n],n===t,n===e.length-1);return i.getContent()}}class eo extends ls{constructor(e,t,i){super(),this._uri=e,this.defaultSettings=i,this._onDidChangeGroups=this._register(new I),this.onDidChangeGroups=this._onDidChangeGroups.event,this._register(i.onDidChange(()=>this._onDidChangeGroups.fire())),this._model=t.object.textEditorModel,this._register(this.onWillDispose(()=>t.dispose()))}get uri(){return this._uri}get target(){return this.defaultSettings.target}get settingsGroups(){return this.defaultSettings.getSettingsGroups()}get filterGroups(){return this.settingsGroups.slice(1)}update(){if(this._model.isDisposed())return;const e=[...this._currentResultGroups.values()].sort((o,c)=>o.order-c.order),t=e.filter(o=>o.result.filterMatches.length),i=ea(this.settingsGroups).range.endLineNumber+2,{settingsGroups:n,matches:s}=this.writeResultGroups(t,i),r=this.collectMetadata(e);return e.length?{allGroups:this.settingsGroups,filteredGroups:n,matches:s,metadata:r}:void 0}writeResultGroups(e,t){const i=t-1,n=new us(i),s=[],r=[];e.length&&(n.pushLine(","),e.forEach(f=>{const m=this.getGroup(f);s.push(m),r.push(...this.writeSettingsGroupToBuilder(n,m,f.result.filterMatches))}));const o=n.getContent()+`
`,c=this._model.getLineCount(),d=new ta(t,1,t,1),g={text:o,forceMoveMarkers:!0,range:new dt(t,1,c,1)};this._model.pushEditOperations([d],[g],()=>[d]);const h=Math.min(t+60,this._model.getLineCount());return this._model.tokenization.forceTokenization(h),{matches:r,settingsGroups:s}}writeSettingsGroupToBuilder(e,t,i){return i=i.map(s=>({setting:s.setting,score:s.score,matches:s.matches&&s.matches.map(r=>new dt(r.startLineNumber-s.setting.range.startLineNumber,r.startColumn,r.endLineNumber-s.setting.range.startLineNumber,r.endColumn))})),e.pushGroup(t),$s(i.map(s=>s.matches||[]).map((s,r)=>{const o=t.sections[0].settings[r];return s.map(c=>new dt(c.startLineNumber+o.range.startLineNumber,c.startColumn,c.endLineNumber+o.range.startLineNumber,c.endColumn))}))}copySetting(e){return{description:e.description,scope:e.scope,type:e.type,enum:e.enum,enumDescriptions:e.enumDescriptions,key:e.key,value:e.value,range:e.range,overrides:[],overrideOf:e.overrideOf,tags:e.tags,deprecationMessage:e.deprecationMessage,keyRange:K,valueRange:K,descriptionIsMarkdown:void 0,descriptionRanges:[]}}findValueMatches(e,t){return[]}getPreference(e){for(const t of this.settingsGroups)for(const i of t.sections)for(const n of i.settings)if(n.key===e)return n}getGroup(e){return{id:e.id,range:K,title:e.label,titleRange:K,sections:[{settings:e.result.filterMatches.map(t=>this.copySetting(t.setting))}]}}}class us{get lineCountWithOffset(){return this._contentByLines.length+this._rangeOffset}get lastLine(){return this._contentByLines[this._contentByLines.length-1]||""}constructor(e=0){this._rangeOffset=e,this._contentByLines=[]}pushLine(...e){this._contentByLines.push(...e)}pushGroup(e,t,i){this._contentByLines.push(t?"[{":"{");const n=this._pushGroup(e,"  ");if(n){const s=n.range.endLineNumber-this._rangeOffset,r=this._contentByLines[s-2];this._contentByLines[s-2]=r.substring(0,r.length-1)}this._contentByLines.push(i?"}]":"},")}_pushGroup(e,t){let i=null;const n=this.lineCountWithOffset+1;for(const s of e.sections){if(s.title){const r=this.lineCountWithOffset+1;this.addDescription([s.title],t,this._contentByLines),s.titleRange={startLineNumber:r,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length}}if(s.settings.length)for(const r of s.settings)this.pushSetting(r,t),i=r}return e.range={startLineNumber:n,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length},i}getContent(){return this._contentByLines.join(`
`)}pushSetting(e,t){const i=this.lineCountWithOffset+1;this.pushSettingDescription(e,t);let n=t;const s=JSON.stringify(e.key);n+=s,e.keyRange={startLineNumber:this.lineCountWithOffset+1,startColumn:n.indexOf(e.key)+1,endLineNumber:this.lineCountWithOffset+1,endColumn:e.key.length},n+=": ";const r=this.lineCountWithOffset+1;this.pushValue(e,n,t),e.valueRange={startLineNumber:r,startColumn:n.length+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length+1},this._contentByLines[this._contentByLines.length-1]+=",",this._contentByLines.push(""),e.range={startLineNumber:i,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length}}pushSettingDescription(e,t){var r;const i=o=>o.replace(/`#(.*)#`/g,(c,d)=>`\`${d}\``);e.descriptionRanges=[];const n=t+"// ",s=((r=e.deprecationMessage)==null?void 0:r.split(/\n/g))??[];for(let o of[...s,...e.description])o=i(o),this._contentByLines.push(n+o),e.descriptionRanges.push({startLineNumber:this.lineCountWithOffset,startColumn:this.lastLine.indexOf(o)+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length});e.enumDescriptions&&e.enumDescriptions.some(o=>!!o)&&e.enumDescriptions.forEach((o,c)=>{const d=yd(String(e.enum[c])),g=o?`${d}: ${i(o)}`:d,h=g.split(/\n/g);h[0]=" - "+h[0],this._contentByLines.push(...h.map(f=>`${t}// ${f}`)),e.descriptionRanges.push({startLineNumber:this.lineCountWithOffset,startColumn:this.lastLine.indexOf(g)+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length})})}pushValue(e,t,i){const n=JSON.stringify(e.value,null,i);if(n&&typeof e.value=="object")if(e.overrides&&e.overrides.length){this._contentByLines.push(t+" {");for(const o of e.overrides)this.pushSetting(o,i+i),this._contentByLines.pop();const s=e.overrides[e.overrides.length-1],r=this._contentByLines[s.range.endLineNumber-2];this._contentByLines[s.range.endLineNumber-2]=r.substring(0,r.length-1),this._contentByLines.push(i+"}")}else{const s=n.split(`
`);this._contentByLines.push(t+s[0]);for(let r=1;r<s.length;r++)this._contentByLines.push(i+s[r])}else this._contentByLines.push(t+n)}addDescription(e,t,i){for(const n of e)i.push(t+"// "+n)}}class md extends us{constructor(e="	"){super(0),this.indent=e}pushGroup(e){this._pushGroup(e,this.indent)}}class bd extends ee{constructor(e){super(),this.defaultSettings=e,this._content=null,this._register(e.onDidChange(()=>this._content=null))}get content(){if(this._content===null){const e=new md;e.pushLine("{");for(const t of this.defaultSettings.getRegisteredGroups())e.pushGroup(t);e.pushLine("}"),this._content=e.getContent()}return this._content}}function yd(a){return a&&a.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}function to(a){return"// "+l("defaultKeybindingsHeader","Override key bindings by placing them into your key bindings file.")+`
`+a.getDefaultKeybindingsContent()}let yn=class{constructor(e,t){this._uri=e,this.keybindingService=t}get uri(){return this._uri}get content(){return this._content||(this._content=to(this.keybindingService)),this._content}getPreference(){return null}dispose(){}};yn=v([u(1,We)],yn);const Sd=`{
}`;let Sn=class extends ee{constructor(e,t,i,n,s,r,o,c,d,g,h,f,m,p,y,x,E){super(),this.editorService=e,this.editorGroupService=t,this.textFileService=i,this.configurationService=n,this.notificationService=s,this.contextService=r,this.instantiationService=o,this.userDataProfileService=c,this.userDataProfilesService=d,this.textModelResolverService=g,this.modelService=f,this.jsonEditingService=m,this.languageService=p,this.labelService=y,this.remoteAgentService=x,this.textEditorService=E,this._onDispose=this._register(new I),this.defaultKeybindingsResource=Y.from({scheme:ye.vscode,authority:"defaultsettings",path:"/keybindings.json"}),this.defaultSettingsRawResource=Y.from({scheme:ye.vscode,authority:"defaultsettings",path:"/defaultSettings.json"}),this._register(h.onDidUpdateKeybindings(()=>{const S=f.getModel(this.defaultKeybindingsResource);S&&f.updateModel(S,to(h))}))}get userSettingsResource(){return this.userDataProfileService.currentProfile.settingsResource}get workspaceSettingsResource(){if(this.contextService.getWorkbenchState()===1)return null;const e=this.contextService.getWorkspace();return e.configuration||e.folders[0].toResource(Ti)}get settingsEditor2Input(){return this.instantiationService.createInstance(Nt)}getFolderSettingsResource(e){const t=this.contextService.getWorkspaceFolder(e);return t?t.toResource(Ti):null}resolveModel(e){if(this.isDefaultSettingsResource(e)){const t=this.getConfigurationTargetFromDefaultSettingsResource(e),i=this.languageService.createById("jsonc"),n=this._register(this.modelService.createModel("",i,e));let s;return this.configurationService.onDidChangeConfiguration(r=>{if(r.source===7){const o=this.modelService.getModel(e);if(!o)return;s=this.getDefaultSettings(t),this.modelService.updateModel(o,s.getContentWithoutMostCommonlyUsed(!0)),s._onDidChange.fire()}}),s||(s=this.getDefaultSettings(t),this.modelService.updateModel(n,s.getContentWithoutMostCommonlyUsed(!0))),n}if(this.defaultSettingsRawResource.toString()===e.toString()){const t=this.instantiationService.createInstance(bd,this.getDefaultSettings(3)),i=this.languageService.createById("jsonc");return this._register(this.modelService.createModel(t.content,i,e))}if(this.defaultKeybindingsResource.toString()===e.toString()){const t=this.instantiationService.createInstance(yn,e),i=this.languageService.createById("jsonc");return this._register(this.modelService.createModel(t.content,i,e))}return null}async createPreferencesEditorModel(e){if(this.isDefaultSettingsResource(e))return this.createDefaultSettingsEditorModel(e);if(this.userSettingsResource.toString()===e.toString()||this.userDataProfilesService.defaultProfile.settingsResource.toString()===e.toString())return this.createEditableSettingsEditorModel(3,e);const t=await this.getEditableSettingsURI(5);if(t&&t.toString()===e.toString())return this.createEditableSettingsEditorModel(5,t);if(this.contextService.getWorkbenchState()===3){const s=await this.getEditableSettingsURI(6,e);if(s&&s.toString()===e.toString())return this.createEditableSettingsEditorModel(6,e)}const i=await this.remoteAgentService.getEnvironment(),n=i?i.settingsPath:null;return n&&n.toString()===e.toString()?this.createEditableSettingsEditorModel(4,e):null}openRawDefaultSettings(){return this.editorService.openEditor({resource:this.defaultSettingsRawResource})}openRawUserSettings(){return this.editorService.openEditor({resource:this.userSettingsResource})}shouldOpenJsonByDefault(){return this.configurationService.getValue("workbench.settings.editor")==="json"}openSettings(e={}){return e={...e,target:3},e.query&&(e.jsonEditor=!1),this.open(this.userSettingsResource,e)}openLanguageSpecificSettings(e,t={}){return this.shouldOpenJsonByDefault()?(t.query=void 0,t.revealSetting={key:`[${e}]`,edit:!0}):t.query=`@lang:${e}${t.query?` ${t.query}`:""}`,t.target=t.target??3,this.open(this.userSettingsResource,t)}open(e,t){return t={...t,jsonEditor:t.jsonEditor??this.shouldOpenJsonByDefault()},t.jsonEditor?this.openSettingsJson(e,t):this.openSettings2(t)}async openSettings2(e){const t=this.settingsEditor2Input;return e={...e,focusSearch:!0},await this.editorService.openEditor(t,mi(e),e.openToSide?Ss:void 0),this.editorGroupService.activeGroup.activeEditorPane}openApplicationSettings(e={}){return e={...e,target:3},this.open(this.userDataProfilesService.defaultProfile.settingsResource,e)}openUserSettings(e={}){return e={...e,target:3},this.open(this.userSettingsResource,e)}async openRemoteSettings(e={}){const t=await this.remoteAgentService.getEnvironment();t&&(e={...e,target:4},this.open(t.settingsPath,e))}openWorkspaceSettings(e={}){return this.workspaceSettingsResource?(e={...e,target:5},this.open(this.workspaceSettingsResource,e)):(this.notificationService.info(l("openFolderFirst","Open a folder or workspace first to create workspace or folder settings.")),Promise.reject(null))}async openFolderSettings(e={}){if(e={...e,target:6},!e.folderUri)throw new Error("Missing folder URI");const t=await this.getEditableSettingsURI(6,e.folderUri);if(!t)throw new Error(`Invalid folder URI - ${e.folderUri.toString()}`);return this.open(t,e)}async openGlobalKeybindingSettings(e,t){if(t={pinned:!0,revealIfOpened:!0,...t},e){const i="// "+l("emptyKeybindingsHeader","Place your key bindings in this file to override the defaults")+`
[
]`,n=this.userDataProfileService.currentProfile.keybindingsResource,s=!!this.configurationService.getValue("workbench.settings.openDefaultKeybindings");if(await this.createIfNotExists(n,i),s){const r=this.editorGroupService.activeGroup,o=this.editorGroupService.addGroup(r.id,3);await Promise.all([this.editorService.openEditor({resource:this.defaultKeybindingsResource,options:{pinned:!0,preserveFocus:!0,revealIfOpened:!0,override:ra.id},label:l("defaultKeybindings","Default Keybindings"),description:""}),this.editorService.openEditor({resource:n,options:t},o.id)])}else await this.editorService.openEditor({resource:n,options:t})}else{const i=await this.editorService.openEditor(this.instantiationService.createInstance(Ot),{...t});t.query&&i.search(t.query)}}openDefaultKeybindingsFile(){return this.editorService.openEditor({resource:this.defaultKeybindingsResource,label:l("defaultKeybindings","Default Keybindings")})}async openSettingsJson(e,t){const i=t!=null&&t.openToSide?Ss:void 0,n=await this.doOpenSettingsJson(e,t,i);return n&&(t!=null&&t.revealSetting)&&await this.revealSetting(t.revealSetting.key,!!t.revealSetting.edit,n,e),n}async doOpenSettingsJson(e,t,i){const n=!!this.configurationService.getValue(an),s=!!this.configurationService.getValue(cn);if(n||s)return this.doOpenSplitJSON(e,t,i);const r=(t==null?void 0:t.target)??2,o=await this.getOrCreateEditableSettingsEditorInput(r,e);return t={...t,pinned:!0},await this.editorService.openEditor(o,mi(t),i)}async doOpenSplitJSON(e,t={},i){const n=t.target??2;await this.createSettingsIfNotExists(n,e);const s=this.createSplitJsonEditorInput(n,e);return t={...t,pinned:!0},this.editorService.openEditor(s,mi(t),i)}createSplitJsonEditorInput(e,t){const i=this.textEditorService.createTextEditor({resource:t}),n=this.instantiationService.createInstance(oa,this.getDefaultSettingsResource(e),void 0,void 0,void 0,void 0);return this.instantiationService.createInstance(Xs,i.getName(),void 0,n,i)}createSettings2EditorModel(){return this.instantiationService.createInstance(Li,this.getDefaultSettings(3))}getConfigurationTargetFromDefaultSettingsResource(e){return this.isDefaultWorkspaceSettingsResource(e)?5:this.isDefaultFolderSettingsResource(e)?6:3}isDefaultSettingsResource(e){return this.isDefaultUserSettingsResource(e)||this.isDefaultWorkspaceSettingsResource(e)||this.isDefaultFolderSettingsResource(e)}isDefaultUserSettingsResource(e){return e.authority==="defaultsettings"&&e.scheme===ye.vscode&&!!e.path.match(/\/(\d+\/)?settings\.json$/)}isDefaultWorkspaceSettingsResource(e){return e.authority==="defaultsettings"&&e.scheme===ye.vscode&&!!e.path.match(/\/(\d+\/)?workspaceSettings\.json$/)}isDefaultFolderSettingsResource(e){return e.authority==="defaultsettings"&&e.scheme===ye.vscode&&!!e.path.match(/\/(\d+\/)?resourceSettings\.json$/)}getDefaultSettingsResource(e){switch(e){case 5:return Y.from({scheme:ye.vscode,authority:"defaultsettings",path:"/workspaceSettings.json"});case 6:return Y.from({scheme:ye.vscode,authority:"defaultsettings",path:"/resourceSettings.json"})}return Y.from({scheme:ye.vscode,authority:"defaultsettings",path:"/settings.json"})}async getOrCreateEditableSettingsEditorInput(e,t){return await this.createSettingsIfNotExists(e,t),this.textEditorService.createTextEditor({resource:t})}async createEditableSettingsEditorModel(e,t){const i=this.contextService.getWorkspace();if(i.configuration&&i.configuration.toString()===t.toString()){const s=await this.textModelResolverService.createModelReference(t);return this.instantiationService.createInstance(bn,s,e)}const n=await this.textModelResolverService.createModelReference(t);return this.instantiationService.createInstance(gs,n,e)}async createDefaultSettingsEditorModel(e){const t=await this.textModelResolverService.createModelReference(e),i=this.getConfigurationTargetFromDefaultSettingsResource(e);return this.instantiationService.createInstance(eo,e,t,this.getDefaultSettings(i))}getDefaultSettings(e){return e===5?(this._defaultWorkspaceSettingsContentModel||(this._defaultWorkspaceSettingsContentModel=new Zi(this.getMostCommonlyUsedSettings(),e)),this._defaultWorkspaceSettingsContentModel):e===6?(this._defaultFolderSettingsContentModel||(this._defaultFolderSettingsContentModel=new Zi(this.getMostCommonlyUsedSettings(),e)),this._defaultFolderSettingsContentModel):(this._defaultUserSettingsContentModel||(this._defaultUserSettingsContentModel=new Zi(this.getMostCommonlyUsedSettings(),e)),this._defaultUserSettingsContentModel)}async getEditableSettingsURI(e,t){switch(e){case 1:return this.userDataProfilesService.defaultProfile.settingsResource;case 2:case 3:return this.userSettingsResource;case 4:{const i=await this.remoteAgentService.getEnvironment();return i?i.settingsPath:null}case 5:return this.workspaceSettingsResource;case 6:if(t)return this.getFolderSettingsResource(t)}return null}async createSettingsIfNotExists(e,t){if(this.contextService.getWorkbenchState()===3&&e===5){const i=this.contextService.getWorkspace().configuration;if(!i)return;const n=await this.textFileService.read(i);Object.keys(aa(n.value)).indexOf("settings")===-1&&await this.jsonEditingService.write(t,[{path:["settings"],value:{}}],!0);return}await this.createIfNotExists(t,Sd)}async createIfNotExists(e,t){try{await this.textFileService.read(e,{acceptTextOnly:!0})}catch(i){if(i.fileOperationResult===1)try{await this.textFileService.write(e,t);return}catch(n){throw new Error(l("fail.createSettings","Unable to create '{0}' ({1}).",this.labelService.getUriLabel(e,{relative:!0}),ca(n)))}else throw i}}getMostCommonlyUsedSettings(){return["files.autoSave","editor.fontSize","editor.fontFamily","editor.tabSize","editor.renderWhitespace","editor.cursorStyle","editor.multiCursorModifier","editor.insertSpaces","editor.wordWrap","files.exclude","files.associations","workbench.editor.enablePreview"]}async revealSetting(e,t,i,n){var c;const s=i?da(i.getControl()):null;if(!s)return;const r=await this.createPreferencesEditorModel(n);if(!r)return;const o=await this.getPositionToReveal(e,t,r,s);o&&(s.setPosition(o),s.revealPositionNearTop(o),s.focus(),t&&((c=Jn.get(s))==null||c.triggerSuggest()))}async getPositionToReveal(e,t,i,n){const s=n.getModel();if(!s)return null;const r=ge.as(Ie.Configuration).getConfigurationProperties()[e],o=Rt.test(e);if(!r&&!o)return null;let c=null;const d=(r==null?void 0:r.type)??"object";let g=i.getPreference(e);if(!g&&t){let h=d==="object"||d==="array"?this.configurationService.inspect(e).defaultValue:la(d);if(h=h===void 0&&o?{}:h,h!==void 0){const f=i instanceof bn?["settings",e]:[e];await this.jsonEditingService.write(i.uri,[{path:f,value:h}],!1),g=i.getPreference(e)}}if(g)if(t)if($n(g.value)||Array.isArray(g.value)){c={lineNumber:g.valueRange.startLineNumber,column:g.valueRange.startColumn+1},n.setPosition(c),await vs.LineBreakInsert.runEditorCommand(null,n,null),c={lineNumber:c.lineNumber+1,column:s.getLineMaxColumn(c.lineNumber+1)};const h=s.getLineFirstNonWhitespaceColumn(c.lineNumber);h&&(n.setPosition({lineNumber:c.lineNumber,column:h}),await vs.LineBreakInsert.runEditorCommand(null,n,null),c={lineNumber:c.lineNumber,column:s.getLineMaxColumn(c.lineNumber)})}else c={lineNumber:g.valueRange.startLineNumber,column:g.valueRange.endColumn};else c={lineNumber:g.keyRange.startLineNumber,column:g.keyRange.startColumn};return c}dispose(){this._onDispose.fire(),super.dispose()}};Sn=v([u(0,O),u(1,zs),u(2,ia),u(3,ie),u(4,qs),u(5,it),u(6,j),u(7,yt),u(8,Jt),u(9,Js),u(10,We),u(11,ji),u(12,na),u(13,Pe),u(14,qn),u(15,sa),u(16,Ys)],Sn);let vn=class extends ee{constructor(e,t,i,n,s){super(),this.instantiationService=e,this.configurationService=t,this.productService=i,this.extensionManagementService=n,this.extensionEnablementService=s,this._installedExtensions=this.extensionManagementService.getInstalled(1).then(r=>r.filter(o=>this.extensionEnablementService.isEnabled(o)).filter(o=>o.manifest&&o.manifest.contributes&&o.manifest.contributes.configuration).filter(o=>!!o.identifier.uuid))}get remoteSearchAllowed(){return this.configurationService.getValue().workbench.settings.enableNaturalLanguageSearch?!!this._endpoint.urlBase:!1}get _endpoint(){const e=this.configurationService.getValue().workbench.settings;return e.naturalLanguageSearchEndpoint?{urlBase:e.naturalLanguageSearchEndpoint,key:e.naturalLanguageSearchKey}:{urlBase:this.productService.settingsSearchUrl}}getRemoteSearchProvider(e,t=!1){}getLocalSearchProvider(e){return this.instantiationService.createInstance(Wt,e)}};vn=v([u(0,j),u(1,ie),u(2,Yt),u(3,Qs),u(4,ga)],vn);let Wt=class vi{constructor(e,t){this._filter=e,this.configurationService=t,this._filter=this._filter.replace(/[":]/g," ").replace(/  /g," ").trim()}searchModel(e,t){if(!this._filter)return Promise.resolve(null);let i=vi.START_SCORE;const n=r=>{const{matches:o,matchType:c}=new wn(this._filter,r,!0,!0,(g,h)=>e.findValueMatches(g,h),this.configurationService),d=this._filter===r.key?vi.EXACT_MATCH_SCORE:i--;return o&&o.length?{matches:o,matchType:c,score:d}:null},s=e.filterSettings(this._filter,this.getGroupFilter(this._filter),n);return s[0]&&s[0].score===vi.EXACT_MATCH_SCORE?Promise.resolve({filterMatches:s.slice(0,1),exactMatch:!0}):Promise.resolve({filterMatches:s})}getGroupFilter(e){const t=ua(e,!1,{global:!0});return i=>t.test(i.title)}};Wt.EXACT_MATCH_SCORE=1e4;Wt.START_SCORE=1e3;Wt=v([u(1,ie)],Wt);let wn=class io{constructor(e,t,i,n,s,r){this.requireFullQueryMatch=i,this.searchDescription=n,this.valuesMatcher=s,this.configurationService=r,this.descriptionMatchingWords=new Map,this.keyMatchingWords=new Map,this.valueMatchingWords=new Map,this.matchType=It.None,this.matches=Gi(this._findMatchesInSetting(e,t),o=>`${o.startLineNumber}_${o.startColumn}_${o.endLineNumber}_${o.endColumn}_`)}_findMatchesInSetting(e,t){const i=this._doFindMatchesInSetting(e,t);if(t.overrides&&t.overrides.length)for(const n of t.overrides){const s=new io(e,n,this.requireFullQueryMatch,this.searchDescription,this.valuesMatcher,this.configurationService),r=e.split(" "),o=this.getRangesForWords(r,this.descriptionMatchingWords,[s.descriptionMatchingWords,s.keyMatchingWords,s.valueMatchingWords]),c=this.getRangesForWords(r,this.keyMatchingWords,[s.descriptionMatchingWords,s.keyMatchingWords,s.valueMatchingWords]),d=this.getRangesForWords(r,s.keyMatchingWords,[this.descriptionMatchingWords,this.keyMatchingWords,s.valueMatchingWords]),g=this.getRangesForWords(r,s.valueMatchingWords,[this.descriptionMatchingWords,this.keyMatchingWords,s.keyMatchingWords]);i.push(...o,...c,...d,...g),i.push(...s.matches),this.refreshMatchType(c.length+d.length),this.matchType|=s.matchType}return i}_doFindMatchesInSetting(e,t){const n=ge.as(Ie.Configuration).getConfigurationProperties()[t.key],s=e.split(" "),r=t.key.split(".").join(" "),o=this.configurationService.getValue(t.key);for(const f of s){if(this.searchDescription)for(let y=0;y<t.description.length;y++){const x=Re(f,t.description[y],!0);x&&this.descriptionMatchingWords.set(f,x.map(E=>this.toDescriptionRange(t,E,y))),this.checkForWholeWordMatchType(f,t.description[y])}const m=Ye(Re,rn)(f,r);m&&this.keyMatchingWords.set(f,m.map(y=>this.toKeyRange(t,y))),this.checkForWholeWordMatchType(f,r);const p=typeof o=="string"?Je(f,o):null;p?this.valueMatchingWords.set(f,p.map(y=>this.toValueRange(t,y))):n&&n.enum&&n.enum.some(y=>typeof y=="string"&&!!Je(f,y))&&this.valueMatchingWords.set(f,[]),typeof o=="string"&&this.checkForWholeWordMatchType(f,o)}const c=[];if(this.searchDescription){for(let f=0;f<t.description.length;f++){const m=Ye(Je)(e,t.description[f]||"")||[];c.push(...m.map(p=>this.toDescriptionRange(t,p,f)))}c.length===0&&c.push(...this.getRangesForWords(s,this.descriptionMatchingWords,[this.keyMatchingWords,this.valueMatchingWords]))}const d=Ye(on,Je)(e,t.key),g=d?d.map(f=>this.toKeyRange(t,f)):this.getRangesForWords(s,this.keyMatchingWords,[this.descriptionMatchingWords,this.valueMatchingWords]);let h=[];if(typeof o=="string"&&o){const f=Ye(on,Je)(e,o);h=f?f.map(m=>this.toValueRange(t,m)):this.getRangesForWords(s,this.valueMatchingWords,[this.keyMatchingWords,this.descriptionMatchingWords])}else h=this.valuesMatcher(e,t);return this.refreshMatchType(g.length),[...c,...g,...h]}checkForWholeWordMatchType(e,t){e=e.toLowerCase().replace(/[\s-\._]+$/,""),t=t.toLowerCase(),new RegExp(`\\b${Yn(e)}\\b`).test(t)&&(this.matchType|=It.WholeWordMatch)}refreshMatchType(e){e&&(this.matchType|=It.KeyMatch)}getRangesForWords(e,t,i){const n=[];for(const s of e){const r=t.get(s);if(r)n.push(...r);else if(this.requireFullQueryMatch&&i.every(o=>!o.has(s)))return[]}return n}toKeyRange(e,t){return{startLineNumber:e.keyRange.startLineNumber,startColumn:e.keyRange.startColumn+t.start,endLineNumber:e.keyRange.startLineNumber,endColumn:e.keyRange.startColumn+t.end}}toDescriptionRange(e,t,i){return{startLineNumber:e.descriptionRanges[i].startLineNumber,startColumn:e.descriptionRanges[i].startColumn+t.start,endLineNumber:e.descriptionRanges[i].endLineNumber,endColumn:e.descriptionRanges[i].startColumn+t.end}}toValueRange(e,t){return{startLineNumber:e.valueRange.startLineNumber,startColumn:e.valueRange.startColumn+t.start+1,endLineNumber:e.valueRange.startLineNumber,endColumn:e.valueRange.startColumn+t.end+1}}};wn=v([u(5,ie)],wn);var vd=".preferences-editor{display:flex;flex-direction:column}.preferences-editor>.preferences-header{padding:11px 32px 11px 27px}.preferences-editor .deprecation-warning{display:flex;margin-top:4px}.preferences-editor .deprecation-warning .icon{margin-right:3px}.preferences-editor .deprecation-warning .learnMore-button{margin-left:3px;text-decoration:underline}.preferences-editor>.preferences-editors-container.side-by-side-preferences-editor{flex:1}.preferences-editor>.preferences-editors-container.side-by-side-preferences-editor .preferences-header-container{line-height:28px}.settings-tabs-widget>.monaco-action-bar .action-item.disabled{display:none}.settings-tabs-widget>.monaco-action-bar .action-item{max-width:300px;overflow:hidden;text-overflow:ellipsis}.default-preferences-editor-container>.preferences-header-container>.default-preferences-header,.settings-tabs-widget>.monaco-action-bar .action-item .action-label{cursor:pointer;display:flex;font-size:11px;margin-right:5px;overflow:hidden;text-overflow:ellipsis;text-transform:uppercase}.default-preferences-editor-container>.preferences-header-container>.default-preferences-header,.preferences-editor .settings-tabs-widget>.monaco-action-bar .action-item .action-label{margin-left:33px}.settings-tabs-widget>.monaco-action-bar .action-item .action-label{background:none!important;border-radius:initial;display:block;padding:0}.settings-tabs-widget>.monaco-action-bar .action-item .action-label.folder-settings{display:flex}.default-preferences-editor-container>.preferences-header-container>.default-preferences-header,.settings-tabs-widget>.monaco-action-bar .action-item{padding:3px 0}.settings-tabs-widget>.monaco-action-bar .action-item .action-title{overflow:hidden;text-overflow:ellipsis}.settings-tabs-widget>.monaco-action-bar .action-item .action-details{font-size:10px;margin-left:.5em;opacity:.7;text-transform:none}.settings-tabs-widget .monaco-action-bar .action-item .dropdown-icon{font-size:12px;padding-left:.3em;padding-top:8px}.settings-tabs-widget .monaco-action-bar .action-item .dropdown-icon.hide{display:none}.settings-tabs-widget>.monaco-action-bar .action-item .action-label{color:var(--vscode-panelTitle-inactiveForeground)}.settings-tabs-widget>.monaco-action-bar .action-item .action-label.checked,.settings-tabs-widget>.monaco-action-bar .action-item .action-label:hover{border-bottom:1px solid var(--vscode-panelTitle-activeBorder);color:var(--vscode-panelTitle-activeForeground);outline:1px solid var(--vscode-contrastActiveBorder,transparent);outline-offset:-1px}.settings-tabs-widget>.monaco-action-bar .action-item .action-label:focus{border-bottom:1px solid var(--vscode-focusBorder);outline:1px solid transparent;outline-offset:-1px}.settings-tabs-widget>.monaco-action-bar .action-item .action-label:not(.checked):hover{outline-style:dashed}.preferences-header>.settings-header-widget{align-self:stretch;display:flex;flex:1;position:relative}.settings-header-widget>.settings-search-controls>.settings-count-widget{border-radius:2px;float:left;margin:6px 0;padding:0 8px}.settings-header-widget>.settings-search-controls{position:absolute;right:10px}.settings-header-widget>.settings-search-controls>.settings-count-widget.hide{display:none}.settings-header-widget>.settings-search-container{flex:1}.settings-header-widget>.settings-search-container>.settings-search-input{vertical-align:middle}.settings-header-widget>.settings-search-container>.settings-search-input>.monaco-inputbox{height:30px}.monaco-workbench.vs .settings-header-widget>.settings-search-container>.settings-search-input>.monaco-inputbox{border:1px solid #ddd}.settings-header-widget>.settings-search-container>.settings-search-input>.monaco-inputbox .input{font-size:14px;padding-left:10px}.monaco-editor .view-zones>.settings-header-widget{z-index:1}.monaco-editor .settings-header-widget .title-container{display:flex;user-select:none;-webkit-user-select:none}.monaco-editor .settings-header-widget .title-container .title{font-weight:700;text-transform:uppercase;white-space:nowrap}.monaco-editor .settings-header-widget .title-container .message{white-space:nowrap}.monaco-editor .settings-group-title-widget{z-index:1}.monaco-editor .settings-group-title-widget .title-container{cursor:pointer;display:flex;font-weight:700;user-select:none;-webkit-user-select:none;width:100%}.monaco-editor .settings-group-title-widget .title-container .title{overflow:hidden;white-space:nowrap}.monaco-editor.vs .settings-group-title-widget .title-container.focused,.monaco-editor.vs-dark .settings-group-title-widget .title-container.focused{outline:none!important}.monaco-editor .settings-group-title-widget .title-container.focused,.monaco-editor .settings-group-title-widget .title-container:hover{background-color:hsla(0,0%,60%,.2)}.monaco-editor.hc-black .settings-group-title-widget .title-container.focused{outline:1px dotted #f38518}.monaco-editor.hc-light .settings-group-title-widget .title-container.focused{outline:1px dotted #0f4a85}.monaco-editor .settings-group-title-widget .title-container .codicon{align-items:center;display:flex;height:100%;justify-content:center;margin:0 2px;width:16px}.monaco-editor .dim-configuration{color:#b1b1b1}.codicon-settings-edit:hover{cursor:pointer}";St(vd,{});var wd='.keybindings-editor{padding:11px 0 0 27px}.keybindings-overflow-widgets-container{height:0;left:0;overflow:visible;position:absolute;top:0;width:0;z-index:5000}.keybindings-editor>.keybindings-header{padding:0 10px 11px 0}.keybindings-editor>.keybindings-header>.search-container{position:relative}.keybindings-editor>.keybindings-header>.search-container>.keybindings-search-actions-container{display:flex;margin-top:4px;position:absolute;right:10px;top:0}.keybindings-editor>.keybindings-header>.search-container>.keybindings-search-actions-container>.recording-badge{margin-right:8px;padding:4px}.keybindings-editor>.keybindings-header.small>.search-container>.keybindings-search-actions-container>.recording-badge,.keybindings-editor>.keybindings-header>.search-container>.keybindings-search-actions-container>.recording-badge.disabled{display:none}.keybindings-editor>.keybindings-header>.search-container>.keybindings-search-actions-container .monaco-action-bar .action-item>.icon{height:18px;width:16px}.keybindings-editor>.keybindings-header>.search-container>.keybindings-search-actions-container .monaco-action-bar .action-item{margin-right:4px}.keybindings-editor .monaco-action-bar .action-item .monaco-custom-toggle{margin:0;padding:2px}.keybindings-editor .monaco-action-bar .action-item>.codicon{align-items:center;box-sizing:content-box;color:inherit;display:flex;justify-content:center}.keybindings-editor>.keybindings-header .open-keybindings-container{display:flex;margin-top:10px}.keybindings-editor>.keybindings-header .open-keybindings-container>div{opacity:.7}.keybindings-editor>.keybindings-header .open-keybindings-container>.file-name{cursor:pointer;margin-left:4px;text-decoration:underline}.keybindings-editor>.keybindings-header .open-keybindings-container>.file-name:focus{opacity:1}.keybindings-editor>.keybindings-body .keybindings-table-container{border-collapse:separate;border-spacing:0;width:100%}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr{cursor:default}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td{align-items:center;display:flex;overflow:hidden}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .actions .monaco-action-bar{display:none;flex:1}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-list-row.selected .monaco-table-tr .monaco-table-td .actions .monaco-action-bar,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-list-row:hover .monaco-table-tr .monaco-table-td .actions .monaco-action-bar,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table.focused .monaco-list-row.focused .monaco-table-tr .monaco-table-td .actions .monaco-action-bar{display:flex}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .monaco-action-bar .action-item>.icon{cursor:pointer;height:16px;margin-top:3px;width:16px}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .command.vertical-align-column{align-items:flex-start;flex-direction:column;justify-content:center}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .command .command-default-label{margin-top:2px;opacity:.8}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .keybinding .monaco-highlighted-label{padding-left:10px}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .when{width:100%}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .when .empty{padding-left:4px}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .when.input-mode .when-label{display:none}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .when .suggest-input-container{padding-left:10px}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .source a{cursor:pointer}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-list-row:not(.focused):not(.selected) .monaco-table-tr .monaco-table-td .source a{color:var(--vscode-textLink-foreground)}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .source a:hover{text-decoration:underline}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-list-row:not(.focused):not(.selected) .monaco-table-tr .monaco-table-td .source a:active,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-list-row:not(.focused):not(.selected) .monaco-table-tr .monaco-table-td .source a:hover{color:var(--vscode-textLink-activeForeground)}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .command,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .command .monaco-highlighted-label,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .command>.command-default-label,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .command>.command-id-label,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .command>.command-label,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .source .monaco-highlighted-label,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .when .monaco-highlighted-label{overflow:hidden;text-overflow:ellipsis}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .hide{display:none}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .code{display:flex;font-family:var(--monaco-monospace-font);font-size:90%;overflow:hidden}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .code.strong{background-color:hsla(0,0%,50%,.17);border-radius:4px;padding:1px 4px}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-tr .monaco-table-td .highlight{color:var(--vscode-list-highlightForeground);font-weight:700}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table.focused .monaco-list-row.selected .monaco-table-td .highlight,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table.focused .monaco-list-row.selected.focused .monaco-table-td .highlight{color:inherit}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table .monaco-list-row.selected .monaco-table-tr .monaco-table-td .monaco-keybinding-key,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table .monaco-list-row.selected.focused .monaco-table-tr .monaco-table-td .monaco-keybinding-key{color:var(--vscode-list-inactiveSelectionForeground)}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table .monaco-list-row.focused .monaco-table-tr .monaco-table-td .monaco-keybinding-key{color:var(--vscode-list-focusForeground)}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table.focused .monaco-list-row.selected .monaco-table-tr .monaco-table-td .monaco-keybinding-key{color:var(--vscode-list-activeSelectionForeground)}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table .monaco-list-row:hover:not(.selected):not(.focused) .monaco-table-tr .monaco-table-td .monaco-keybinding-key{color:var(--vscode-list-hoverForeground)}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr{background-color:var(--vscode-keybindingTable-rowsBackground)}.keybindings-editor>.keybindings-body>.keybindings-table-container .monaco-table-th{background-color:var(--vscode-keybindingTable-headerBackground)}.keybindings-editor .monaco-table-td,.keybindings-editor .monaco-table-th{padding-left:10px}.keybindings-editor .monaco-table-td[data-col-index="0"],.keybindings-editor .monaco-table-th[data-col-index="0"]{padding-left:20px}';St(wd,{});var Ed=".defineKeybindingWidget{padding:10px;position:absolute}.defineKeybindingWidget .message{text-align:center;width:400px}.defineKeybindingWidget .existing,.defineKeybindingWidget .monaco-inputbox,.defineKeybindingWidget .output{display:block;margin-top:10px;text-align:center;width:400px}.defineKeybindingWidget .input{text-align:center}.defineKeybindingWidget .output{display:flex;justify-content:center}.defineKeybindingWidget .existing .existingText{cursor:pointer;text-decoration:underline}.defineKeybindingWidget .output .monaco-keybinding{margin:0 4px}.monaco-editor .keybindingInfo{background-color:rgba(100,100,250,.2);box-shadow:inset 0 0 0 1px #b9b9b9}.monaco-editor .keybindingError{background-color:hsla(0,94%,69%,.2);box-shadow:inset 0 0 0 1px #b9b9b9}";St(Ed,{});const Cd=me("settings-folder-dropdown",ue.triangleDown,l("settingsScopeDropDownIcon","Icon for the folder dropdown button in the split JSON Settings editor.")),xd=me("settings-more-action",ue.gear,l("settingsMoreActionIcon","Icon for the 'more actions' action in the Settings UI.")),Td=me("keybindings-record-keys",ue.recordKeys,l("keybindingsRecordKeysIcon","Icon for the 'record keys' action in the keybinding UI.")),kd=me("keybindings-sort",ue.sortPrecedence,l("keybindingsSortIcon","Icon for the 'sort by precedence' toggle in the keybinding UI.")),Id=me("keybindings-edit",ue.edit,l("keybindingsEditIcon","Icon for the edit action in the keybinding UI.")),_d=me("keybindings-add",ue.add,l("keybindingsAddIcon","Icon for the add action in the keybinding UI.")),Ji=me("settings-edit",ue.edit,l("settingsEditIcon","Icon for the edit action in the Settings UI.")),no=me("settings-remove",ue.close,l("settingsRemoveIcon","Icon for the remove action in the Settings UI.")),Dd=me("settings-discard",ue.discard,l("preferencesDiscardIcon","Icon for the discard action in the Settings UI.")),so=me("preferences-clear-input",ue.clearAll,l("preferencesClearInput","Icon for clear input in the Settings and keybinding UI.")),Ld=me("preferences-filter",ue.filter,l("settingsFilter","Icon for the button that suggests filters for the Settings UI.")),ze=me("preferences-open-settings",ue.goToFile,l("preferencesOpenSettings","Icon for open settings commands."));let En=class extends ha{constructor(e,t,i,n){super(null,e),this.contextService=t,this.contextMenuService=i,this.preferencesService=n,this._folderSettingCounts=new Map;const s=this.contextService.getWorkspace();this._folder=s.folders.length===1?s.folders[0]:null,this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.onWorkspaceFoldersChanged()))}get folder(){return this._folder}set folder(e){this._folder=e,this.update()}setCount(e,t){const i=this.contextService.getWorkspaceFolder(e);if(!i)throw new Error("unknown folder");const n=i.uri;this._folderSettingCounts.set(n.toString(),t),this.update()}render(e){this.element=e,this.container=e,this.labelElement=P(".action-title"),this.detailsElement=P(".action-details"),this.dropDownElement=P(".dropdown-icon.hide"+oe.asCSSSelector(Cd)),this.anchorElement=P("a.action-label.folder-settings",{role:"button","aria-haspopup":"true",tabindex:"0"},this.labelElement,this.detailsElement,this.dropDownElement),this._register(D(this.anchorElement,_.MOUSE_DOWN,t=>Ze.stop(t))),this._register(D(this.anchorElement,_.CLICK,t=>this.onClick(t))),this._register(D(this.container,_.KEY_UP,t=>this.onKeyUp(t))),b(this.container,this.anchorElement),this.update()}onKeyUp(e){switch(new Ge(e).keyCode){case 3:case 10:this.onClick(e);return}}onClick(e){Ze.stop(e,!0),!this.folder||this._action.checked?this.showMenu():this._action.run(this._folder)}updateEnabled(){this.update()}updateChecked(){this.update()}onWorkspaceFoldersChanged(){const e=this._folder,t=this.contextService.getWorkspace();e&&(this._folder=t.folders.filter(i=>je(i.uri,e.uri))[0]||t.folders[0]),this._folder=this._folder?this._folder:t.folders.length===1?t.folders[0]:null,this.update(),this._action.checked&&this._action.run(this._folder)}async update(){var i;let e=0;this._folderSettingCounts.forEach(n=>e+=n);const t=this.contextService.getWorkspace();if(this._folder){this.labelElement.textContent=this._folder.name,this.anchorElement.title=((i=await this.preferencesService.getEditableSettingsURI(6,this._folder.uri))==null?void 0:i.fsPath)||"";const n=this.labelWithCount(this._action.label,e);this.detailsElement.textContent=n,this.dropDownElement.classList.toggle("hide",t.folders.length===1||!this._action.checked)}else{const n=this.labelWithCount(this._action.label,e);this.labelElement.textContent=n,this.detailsElement.textContent="",this.anchorElement.title=this._action.label,this.dropDownElement.classList.remove("hide")}this.anchorElement.classList.toggle("checked",this._action.checked),this.container.classList.toggle("disabled",!this._action.enabled)}showMenu(){this.contextMenuService.showContextMenu({getAnchor:()=>this.container,getActions:()=>this.getDropdownMenuActions(),getActionViewItem:()=>{},onHide:()=>{this.anchorElement.blur()}})}getDropdownMenuActions(){const e=[],t=this.contextService.getWorkspace().folders;return this.contextService.getWorkbenchState()===3&&t.length>0&&e.push(...t.map((i,n)=>{const s=this._folderSettingCounts.get(i.uri.toString());return{id:"folderSettingsTarget"+n,label:this.labelWithCount(i.name,s),checked:this.folder&&je(this.folder.uri,i.uri),enabled:!0,run:()=>this._action.run(i)}})),e}labelWithCount(e,t){return t&&(e+=` (${t})`),e}};En=v([u(1,it),u(2,vt),u(3,F)],En);let Cn=class extends Hi{constructor(e,t,i,n,s,r,o,c,d){super(),this.contextService=i,this.instantiationService=n,this.environmentService=s,this.labelService=r,this.preferencesService=o,this.languageService=c,this._settingsTarget=null,this._onDidTargetChange=this._register(new I),this.onDidTargetChange=this._onDidTargetChange.event,this.options=t??{},this.create(e),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.onWorkbenchStateChanged())),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.update())),this.inUserTab=dn.bindTo(d)}resetLabels(){const e=this.environmentService.remoteAuthority,t=e&&this.labelService.getHostLabel(ye.vscodeRemote,e);this.userLocalSettings.label=l("userSettings","User"),this.userRemoteSettings.label=l("userSettingsRemote","Remote")+(t?` [${t}]`:""),this.workspaceSettings.label=l("workspaceSettings","Workspace"),this.folderSettingsAction.label=l("folderSettings","Folder")}create(e){const t=b(e,P(".settings-tabs-widget"));this.settingsSwitcherBar=this._register(new $i(t,{orientation:0,focusOnlyEnabledItems:!0,ariaLabel:l("settingsSwitcherBarAriaLabel","Settings Switcher"),animated:!1,actionViewItemProvider:i=>i.id==="folderSettings"?this.folderSettings:void 0})),this.userLocalSettings=new le("userSettings","",".settings-tab",!0,()=>this.updateTarget(3)),this.preferencesService.getEditableSettingsURI(3).then(i=>{this.userLocalSettings.tooltip=(i==null?void 0:i.fsPath)??""}),this.userRemoteSettings=new le("userSettingsRemote","",".settings-tab",!0,()=>this.updateTarget(4)),this.preferencesService.getEditableSettingsURI(4).then(i=>{this.userRemoteSettings.tooltip=(i==null?void 0:i.fsPath)??""}),this.workspaceSettings=new le("workspaceSettings","",".settings-tab",!1,()=>this.updateTarget(5)),this.folderSettingsAction=new le("folderSettings","",".settings-tab",!1,async i=>{this.updateTarget(pa(i)?i.uri:3)}),this.folderSettings=this.instantiationService.createInstance(En,this.folderSettingsAction),this.resetLabels(),this.update(),this.settingsSwitcherBar.push([this.userLocalSettings,this.userRemoteSettings,this.workspaceSettings,this.folderSettingsAction])}get settingsTarget(){return this._settingsTarget}set settingsTarget(e){this._settingsTarget=e,this.userLocalSettings.checked=this.settingsTarget===3,this.userRemoteSettings.checked=this.settingsTarget===4,this.workspaceSettings.checked=this.settingsTarget===5,this.settingsTarget instanceof Y?(this.folderSettings.action.checked=!0,this.folderSettings.folder=this.contextService.getWorkspaceFolder(this.settingsTarget)):this.folderSettings.action.checked=!1,this.inUserTab.set(this.userLocalSettings.checked)}setResultCount(e,t){if(e===5){let i=l("workspaceSettings","Workspace");t&&(i+=` (${t})`),this.workspaceSettings.label=i}else if(e===3){let i=l("userSettings","User");t&&(i+=` (${t})`),this.userLocalSettings.label=i}else e instanceof Y&&this.folderSettings.setCount(e,t)}updateLanguageFilterIndicators(e){if(this.resetLabels(),e){const t=this.languageService.getLanguageName(e);if(t){const i=` [${t}]`;this.userLocalSettings.label+=i,this.userRemoteSettings.label+=i,this.workspaceSettings.label+=i,this.folderSettingsAction.label+=i}}}onWorkbenchStateChanged(){this.folderSettings.folder=null,this.update(),this.settingsTarget===5&&this.contextService.getWorkbenchState()===3&&this.updateTarget(3)}updateTarget(e){return this.settingsTarget===e||e instanceof Y&&this.settingsTarget instanceof Y&&je(this.settingsTarget,e)||(this.settingsTarget=e,this._onDidTargetChange.fire(this.settingsTarget)),Promise.resolve(void 0)}async update(){var e;this.settingsSwitcherBar.domNode.classList.toggle("empty-workbench",this.contextService.getWorkbenchState()===1),this.userRemoteSettings.enabled=!!(this.options.enableRemoteSettings&&this.environmentService.remoteAuthority),this.workspaceSettings.enabled=this.contextService.getWorkbenchState()!==1,this.folderSettings.action.enabled=this.contextService.getWorkbenchState()===3&&this.contextService.getWorkspace().folders.length>0,this.workspaceSettings.tooltip=((e=await this.preferencesService.getEditableSettingsURI(5))==null?void 0:e.fsPath)||""}};Cn=v([u(2,it),u(3,j),u(4,wt),u(5,qn),u(6,F),u(7,Pe),u(8,_e)],Cn);let xn=class extends Hi{constructor(e,t,i,n,s,r){super(),this.options=t,this.contextViewService=i,this.instantiationService=n,this.contextKeyService=s,this.keybindingService=r,this._onDidChange=this._register(new I),this.onDidChange=this._onDidChange.event,this._onFocus=this._register(new I),this.onFocus=this._onFocus.event,this.create(e)}create(e){this.domNode=b(e,P("div.settings-header-widget")),this.createSearchContainer(b(this.domNode,P("div.settings-search-container"))),this.controlsDiv=b(this.domNode,P("div.settings-search-controls")),this.options.showResultCount&&(this.countElement=b(this.controlsDiv,P(".settings-count-widget")),this.countElement.style.backgroundColor=X(Xn),this.countElement.style.color=X(Qn),this.countElement.style.border=`1px solid ${X(Zn)}`),this.inputBox.inputElement.setAttribute("aria-live",this.options.ariaLive||"off"),this.options.ariaLabelledBy&&this.inputBox.inputElement.setAttribute("aria-labelledBy",this.options.ariaLabelledBy);const t=this._register(es(this.inputBox.inputElement));this._register(t.onDidFocus(()=>this._onFocus.fire()));const i=this.options.focusKey;i&&(this._register(t.onDidFocus(()=>i.set(!0))),this._register(t.onDidBlur(()=>i.set(!1))))}createSearchContainer(e){this.searchContainer=e;const t=b(this.searchContainer,P("div.settings-search-input"));this.inputBox=this._register(this.createInputBox(t)),this._register(this.inputBox.onDidChange(i=>this._onDidChange.fire(i)))}createInputBox(e){const t=()=>ma(this.keybindingService);return this._register(new fa(e,this.contextViewService,{...this.options,showHistoryHint:t},this.contextKeyService))}showMessage(e){this.countElement&&e!==this.countElement.textContent&&(this.countElement.textContent=e,this.inputBox.inputElement.setAttribute("aria-label",e),this.inputBox.inputElement.style.paddingRight=this.getControlsWidth()+"px")}layout(e){var t,i;e.width<400?((t=this.countElement)==null||t.classList.add("hide"),this.inputBox.inputElement.style.paddingRight="0px"):((i=this.countElement)==null||i.classList.remove("hide"),this.inputBox.inputElement.style.paddingRight=this.getControlsWidth()+"px")}getControlsWidth(){return(this.countElement?Zs(this.countElement):0)+20}focus(){this.inputBox.focus(),this.getValue()&&this.inputBox.select()}hasFocus(){return this.inputBox.hasFocus()}clear(){this.inputBox.value=""}getValue(){return this.inputBox.value}setValue(e){return this.inputBox.value=e}dispose(){var e;(e=this.options.focusKey)==null||e.set(!1),super.dispose()}};xn=v([u(2,Xt),u(3,j),u(4,_e),u(5,We)],xn);class Ms extends ee{constructor(e){super(),this.editor=e,this._line=-1,this._preferences=[],this._editPreferenceDecoration=this.editor.createDecorationsCollection(),this._onClick=this._register(new I),this.onClick=this._onClick.event,this._register(this.editor.onMouseDown(t=>{t.target.type!==2||t.target.detail.isAfterLines||!this.isVisible()||this._onClick.fire(t)}))}get preferences(){return this._preferences}getLine(){return this._line}show(e,t,i){this._preferences=i;const n=[];this._line=e,n.push({options:{description:"edit-preference-widget-decoration",glyphMarginClassName:oe.asClassName(Ji),glyphMarginHoverMessage:new ba().appendText(t),stickiness:1},range:{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1}}),this._editPreferenceDecoration.set(n)}hide(){this._editPreferenceDecoration.clear()}isVisible(){return this._editPreferenceDecoration.length>0}dispose(){this.hide(),super.dispose()}}let Mi=class extends xn{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r),this.recordDisposables=this._register(new G),this._onKeybinding=this._register(new I),this.onKeybinding=this._onKeybinding.event,this._onEnter=this._register(new I),this.onEnter=this._onEnter.event,this._onEscape=this._register(new I),this.onEscape=this._onEscape.event,this._onBlur=this._register(new I),this.onBlur=this._onBlur.event,this._register(Qt(()=>this.stopRecordingKeys())),this._chords=null,this._inputValue=""}clear(){this._chords=null,super.clear()}startRecordingKeys(){this.recordDisposables.add(D(this.inputBox.inputElement,_.KEY_DOWN,e=>this._onKeyDown(new Ge(e)))),this.recordDisposables.add(D(this.inputBox.inputElement,_.BLUR,()=>this._onBlur.fire())),this.recordDisposables.add(D(this.inputBox.inputElement,_.INPUT,()=>{this.setInputValue(this._inputValue)}))}stopRecordingKeys(){this._chords=null,this.recordDisposables.clear()}setInputValue(e){this._inputValue=e,this.inputBox.value=this._inputValue}_onKeyDown(e){if(e.preventDefault(),e.stopPropagation(),!this.options.recordEnter&&e.equals(3)){this._onEnter.fire();return}if(e.equals(9)){this._onEscape.fire();return}this.printKeybinding(e)}printKeybinding(e){const t=this.keybindingService.resolveKeyboardEvent(e),i=`code: ${e.browserEvent.code}, keyCode: ${e.browserEvent.keyCode}, key: ${e.browserEvent.key} => UI: ${t.getAriaLabel()}, user settings: ${t.getUserSettingsLabel()}, dispatch: ${t.getDispatchChords()[0]}`,n=this.options;this._chords||(this._chords=[]),this._chords.length>0&&this._chords[this._chords.length-1].getDispatchChords()[0]===null?this._chords[this._chords.length-1]=t:(this._chords.length===2&&(this._chords=[]),this._chords.push(t));const r=this._chords.map(o=>o.getUserSettingsLabel()||"").join(" ");this.setInputValue(n.quoteRecordedKeys?`"${r}"`:r),this.inputBox.inputElement.title=i,this._onKeybinding.fire(this._chords)}};Mi=v([u(2,Xt),u(3,j),u(4,_e),u(5,We)],Mi);let mt=class kt extends Hi{constructor(e,t){super(),this.instantiationService=t,this._chords=null,this._isVisible=!1,this._onHide=this._register(new I),this._onDidChange=this._register(new I),this.onDidChange=this._onDidChange.event,this._onShowExistingKeybindings=this._register(new I),this.onShowExistingKeybidings=this._onShowExistingKeybindings.event,this._domNode=ya(document.createElement("div")),this._domNode.setDisplay("none"),this._domNode.setClassName("defineKeybindingWidget"),this._domNode.setWidth(kt.WIDTH),this._domNode.setHeight(kt.HEIGHT);const i=l("defineKeybinding.initial","Press desired key combination and then press ENTER.");b(this._domNode.domNode,P(".message",void 0,i)),this._domNode.domNode.style.backgroundColor=X(Sa),this._domNode.domNode.style.color=X(va),this._domNode.domNode.style.boxShadow=`0 2px 8px ${X(wa)}`,this._keybindingInputWidget=this._register(this.instantiationService.createInstance(Mi,this._domNode.domNode,{ariaLabel:i,history:[],inputBoxStyles:Ea})),this._keybindingInputWidget.startRecordingKeys(),this._register(this._keybindingInputWidget.onKeybinding(n=>this.onKeybinding(n))),this._register(this._keybindingInputWidget.onEnter(()=>this.hide())),this._register(this._keybindingInputWidget.onEscape(()=>this.clearOrHide())),this._register(this._keybindingInputWidget.onBlur(()=>this.onCancel())),this._outputNode=b(this._domNode.domNode,P(".output")),this._showExistingKeybindingsNode=b(this._domNode.domNode,P(".existing")),e&&b(e,this._domNode.domNode)}get domNode(){return this._domNode.domNode}define(){return this._keybindingInputWidget.clear(),Ca.withAsyncBody(async e=>{this._isVisible||(this._isVisible=!0,this._domNode.setDisplay("block"),this._chords=null,this._keybindingInputWidget.setInputValue(""),Ae(this._outputNode),Ae(this._showExistingKeybindingsNode),await er(0),this._keybindingInputWidget.focus());const t=this._onHide.event(()=>{e(this.getUserSettingsLabel()),t.dispose()})})}layout(e){const t=Math.round((e.height-kt.HEIGHT)/2);this._domNode.setTop(t);const i=Math.round((e.width-kt.WIDTH)/2);this._domNode.setLeft(i)}printExisting(e){if(e>0){const t=P("span.existingText"),i=e===1?l("defineKeybinding.oneExists","1 existing command has this keybinding",e):l("defineKeybinding.existing","{0} existing commands have this keybinding",e);b(t,document.createTextNode(i)),ts(i),this._showExistingKeybindingsNode.appendChild(t),t.onmousedown=n=>{n.preventDefault()},t.onmouseup=n=>{n.preventDefault()},t.onclick=()=>{this._onShowExistingKeybindings.fire(this.getUserSettingsLabel())}}}onKeybinding(e){var n;if(this._chords=e,Ae(this._outputNode),Ae(this._showExistingKeybindingsNode),new ln(this._outputNode,xi,gn).set(zn((n=this._chords)==null?void 0:n[0])),this._chords)for(let s=1;s<this._chords.length;s++)this._outputNode.appendChild(document.createTextNode(l("defineKeybinding.chordsTo","chord to"))),new ln(this._outputNode,xi,gn).set(this._chords[s]);const i=this.getUserSettingsLabel();i&&this._onDidChange.fire(i)}getUserSettingsLabel(){let e=null;return this._chords&&(e=this._chords.map(t=>t.getUserSettingsLabel()).join(" ")),e}onCancel(){this._chords=null,this.hide()}clearOrHide(){this._chords===null?this.hide():(this._chords=null,this._keybindingInputWidget.clear(),Ae(this._outputNode),Ae(this._showExistingKeybindingsNode))}hide(){this._domNode.setDisplay("none"),this._isVisible=!1,this._onHide.fire()}};mt.WIDTH=400;mt.HEIGHT=110;mt=v([u(1,j)],mt);let Tn=class ro extends ee{constructor(e,t){super(),this._editor=e,this._widget=t.createInstance(mt,null),this._editor.addOverlayWidget(this)}getId(){return ro.ID}getDomNode(){return this._widget.domNode}getPosition(){return{preference:null}}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}start(){this._editor.hasModel()&&this._editor.revealPositionInCenterIfOutsideViewport(this._editor.getPosition(),0);const e=this._editor.getLayoutInfo();return this._widget.layout(new is(e.width,e.height)),this._widget.define()}};Tn.ID="editor.contrib.defineKeybindingWidget";Tn=v([u(1,j)],Tn);var Md=".suggest-input-container{border-radius:2px;padding:2px 6px}.suggest-input-container .monaco-editor,.suggest-input-container .monaco-editor-background,.suggest-input-container .mtk1{color:inherit}.suggest-input-container .suggest-input-placeholder{margin-top:1px;overflow:hidden;pointer-events:none;position:absolute;text-overflow:ellipsis;white-space:nowrap;z-index:1}.suggest-input-container .monaco-editor,.suggest-input-container .monaco-editor .lines-content{background:none}";St(Md,{});ns((a,e)=>{const t=tr(a);e.addRule(`.monaco-workbench { background-color: ${t}; }`);const i=a.getColor(ir);if(i&&e.addRule(`.monaco-workbench ::selection { background-color: ${i}; }`),xa){const n=a.getColor(Ta);if(n){const s="monaco-workbench-meta-theme-color";let r=document.getElementById(s);r||(r=ka(),r.name="theme-color",r.id=s),r.content=n.toString()}}Ia&&e.addRule(`
			body.web {
				touch-action: none;
			}
			.monaco-workbench .monaco-editor .view-lines {
				user-select: text;
				-webkit-user-select: text;
			}
		`),et&&_a()&&e.addRule(`body { background-color: ${t}; }`)});const Rd=nr?'"Segoe WPC", "Segoe UI", sans-serif':ss?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif';let Ri=class extends Hi{constructor(e,t,i,n,s,r,o,c,d,g,h){super(),this._onShouldFocusResults=new I,this.onShouldFocusResults=this._onShouldFocusResults.event,this._onInputDidChange=new I,this.onInputDidChange=this._onInputDidChange.event,this._onDidFocus=this._register(new I),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new I),this.onDidBlur=this._onDidBlur.event,this.stylingContainer=b(t,P(".suggest-input-container")),this.element=t,this.placeholderText=b(this.stylingContainer,P(".suggest-input-placeholder",void 0,r.placeholderText||""));const f=La(od(),Ad(n));f.overflowWidgetsDomNode=r.overflowWidgetsDomNode,f.accessibilitySupport=h.getValue("editor.accessibilitySupport"),f.cursorBlinking=h.getValue("editor.cursorBlinking");const m=this.getScopedContextKeyService(d),p=m?o.createChild(new Ma([_e,m])):o;this.inputWidget=this._register(p.createInstance(Ra,this.stylingContainer,f,{contributions:rs.getSomeEditorContributions([Jn.ID,Aa.ID,Oa.ID,ad.ID,cd]),isSimpleWidget:!0})),this._register(h.onDidChangeConfiguration(T=>{if(T.affectsConfiguration("editor.accessibilitySupport")||T.affectsConfiguration("editor.cursorBlinking")){const te=h.getValue("editor.accessibilitySupport"),q=h.getValue("editor.cursorBlinking");this.inputWidget.updateOptions({accessibilitySupport:te,cursorBlinking:q})}})),this._register(this.inputWidget.onDidFocusEditorText(()=>this._onDidFocus.fire())),this._register(this.inputWidget.onDidBlurEditorText(()=>this._onDidBlur.fire()));const y=Y.parse(s);this.inputModel=c.createModel("",null,y,!0),this._register(this.inputModel),this.inputWidget.setModel(this.inputModel),this._register(this.inputWidget.onDidPaste(()=>this.setValue(this.getValue()))),this._register(this.inputWidget.onDidFocusEditorText(()=>{r.focusContextKey&&r.focusContextKey.set(!0),this.stylingContainer.classList.add("synthetic-focus")})),this._register(this.inputWidget.onDidBlurEditorText(()=>{r.focusContextKey&&r.focusContextKey.set(!1),this.stylingContainer.classList.remove("synthetic-focus")}));const x=he.chain(this.inputWidget.onKeyDown);this._register(x.filter(T=>T.keyCode===3).on(T=>{T.preventDefault()},this)),this._register(x.filter(T=>T.keyCode===18&&(ss?T.metaKey:T.ctrlKey)).on(()=>this._onShouldFocusResults.fire(),this));let E=this.getValue();const S=this.inputWidget.getModel();S&&this._register(S.onDidChangeContent(()=>{const T=this.getValue();this.placeholderText.style.visibility=T?"hidden":"visible",E.trim()!==T.trim()&&(this._onInputDidChange.fire(void 0),E=T)}));const R={provideResults:i.provideResults,sortKey:i.sortKey||(T=>T),triggerCharacters:i.triggerCharacters||[],wordDefinition:i.wordDefinition?Na(i.wordDefinition):void 0,alwaysShowSuggestions:!!i.alwaysShowSuggestions};this.setValue(r.value||""),this._register(g.completionProvider.register({scheme:y.scheme,pattern:"**/"+y.path,hasAccessToAllModels:!0},{triggerCharacters:R.triggerCharacters,provideCompletionItems:(T,te,q)=>{var bs;const ne=T.getValue(),be=te.column-1;let ei=0,ti=0;if(R.wordDefinition){const Ee=Wa(te.column,R.wordDefinition,ne,0);ei=(Ee==null?void 0:Ee.word.length)??0,ti=Ee?Ee.startColumn-1:0}else ti=ne.lastIndexOf(" ",be-1)+1,ei=be-ti;return!R.alwaysShowSuggestions&&ei>0&&((bs=R.triggerCharacters)==null?void 0:bs.indexOf(ne[ti]))===-1?{suggestions:[]}:{suggestions:i.provideResults(ne).map(Ee=>{let Et,ys;return typeof Ee=="string"?Et=Ee:(Et=Ee.label,ys=Ee),{label:Et,insertText:Et,range:dt.fromPositions(te.delta(0,-ei),te),sortText:R.sortKey(Et),kind:17,...ys}})}}})),this.style(r.styleOverrides||{})}getScopedContextKeyService(e){}updateAriaLabel(e){this.inputWidget.updateOptions({ariaLabel:e})}setValue(e){e=e.replace(/\s/g," ");const t=this.inputModel.getFullModelRange();this.inputWidget.executeEdits("suggestEnabledInput.setValue",[Pa.replace(t,e)]),this.inputWidget.setScrollTop(0),this.inputWidget.setPosition(new rr(1,e.length+1))}getValue(){return this.inputWidget.getValue()}style(e){this.stylingContainer.style.backgroundColor=X(e.inputBackground??Se),this.stylingContainer.style.color=X(e.inputForeground??ve),this.placeholderText.style.color=X(e.inputPlaceholderForeground??Fa),this.stylingContainer.style.borderWidth="1px",this.stylingContainer.style.borderStyle="solid",this.stylingContainer.style.borderColor=Ka(e.inputBorder??Ne,"transparent");const t=this.stylingContainer.getElementsByClassName("cursor")[0];t&&(t.style.backgroundColor=X(e.inputForeground??ve))}focus(e){this.inputWidget.focus(),e&&this.inputWidget.getValue()&&this.selectAll()}onHide(){this.inputWidget.onHide()}layout(e){this.inputWidget.layout(e),this.placeholderText.style.width=`${e.width-2}px`}selectAll(){this.inputWidget.setSelection(new dt(1,1,1,this.getValue().length+1))}};Ri=v([u(6,j),u(7,ji),u(8,_e),u(9,sr),u(10,ie)],Ri);ns((a,e)=>{const t=a.getColor(ir);if(t){const i=a.getColor(Se);i&&e.addRule(`.suggest-input-container .monaco-editor .selected-text { background-color: ${i.transparent(.4)}; }`);const n=a.getColor(ve);n&&e.addRule(`.suggest-input-container .monaco-editor .view-line span.inline-selected-text { color: ${n}; }`);const s=a.getColor(Se);s&&e.addRule(`.suggest-input-container .monaco-editor-background { background-color: ${s}; } `),e.addRule(`.suggest-input-container .monaco-editor .focused .selected-text { background-color: ${t}; }`)}else e.addRule(`.suggest-input-container .monaco-editor .focused .selected-text { background-color: ${a.getColor(Da)}; }`)});function Ad(a){return{fontSize:13,lineHeight:20,wordWrap:"off",scrollbar:{vertical:"hidden"},roundedSelection:!1,guides:{indentation:!1},cursorWidth:1,fontFamily:Rd,ariaLabel:a||"",snippetSuggestions:"none",suggest:{filterGraceful:!1,showIcons:!1},autoClosingBrackets:"never"}}const Xe=H("settings.headerForeground",{light:"#444444",dark:"#e7e7e7",hcDark:"#ffffff",hcLight:"#292929"},l("headerForeground","The foreground color for a section header or active title.")),Rs=H("settings.settingsHeaderHoverForeground",{light:Fe(Xe,.7),dark:Fe(Xe,.7),hcDark:Fe(Xe,.7),hcLight:Fe(Xe,.7)},l("settingsHeaderHoverForeground","The foreground color for a section header or hovered title."));H("settings.modifiedItemIndicator",{light:new rt(new ni(102,175,224)),dark:new rt(new ni(12,125,157)),hcDark:new rt(new ni(0,73,122)),hcLight:new rt(new ni(102,175,224))},l("modifiedItemForeground","The color of the modified setting indicator."));const Od=H("settings.headerBorder",{dark:Ke,light:Ke,hcDark:Ke,hcLight:Ke},l("settingsHeaderBorder","The color of the header container border.")),As=H("settings.sashBorder",{dark:Ke,light:Ke,hcDark:Ke,hcLight:Ke},l("settingsSashBorder","The color of the Settings editor splitview sash border.")),oo=H("settings.dropdownBackground",{dark:si,light:si,hcDark:si,hcLight:si},l("settingsDropdownBackground","Settings editor dropdown background.")),ao=H("settings.dropdownForeground",{dark:ri,light:ri,hcDark:ri,hcLight:ri},l("settingsDropdownForeground","Settings editor dropdown foreground.")),co=H("settings.dropdownBorder",{dark:oi,light:oi,hcDark:oi,hcLight:oi},l("settingsDropdownBorder","Settings editor dropdown border.")),lo=H("settings.dropdownListBorder",{dark:ai,light:ai,hcDark:ai,hcLight:ai},l("settingsDropdownListBorder","Settings editor dropdown list border. This surrounds the options and separates the options from the description."));H("settings.checkboxBackground",{dark:ci,light:ci,hcDark:ci,hcLight:ci},l("settingsCheckboxBackground","Settings editor checkbox background."));H("settings.checkboxForeground",{dark:di,light:di,hcDark:di,hcLight:di},l("settingsCheckboxForeground","Settings editor checkbox foreground."));H("settings.checkboxBorder",{dark:li,light:li,hcDark:li,hcLight:li},l("settingsCheckboxBorder","Settings editor checkbox border."));const Ai=H("settings.textInputBackground",{dark:Se,light:Se,hcDark:Se,hcLight:Se},l("textInputBoxBackground","Settings editor text input box background.")),Oi=H("settings.textInputForeground",{dark:ve,light:ve,hcDark:ve,hcLight:ve},l("textInputBoxForeground","Settings editor text input box foreground.")),bt=H("settings.textInputBorder",{dark:Ne,light:Ne,hcDark:Ne,hcLight:Ne},l("textInputBoxBorder","Settings editor text input box border.")),Nd=H("settings.numberInputBackground",{dark:Se,light:Se,hcDark:Se,hcLight:Se},l("numberInputBoxBackground","Settings editor number input box background.")),Wd=H("settings.numberInputForeground",{dark:ve,light:ve,hcDark:ve,hcLight:ve},l("numberInputBoxForeground","Settings editor number input box foreground.")),Pd=H("settings.numberInputBorder",{dark:Ne,light:Ne,hcDark:Ne,hcLight:Ne},l("numberInputBoxBorder","Settings editor number input box border."));H("settings.focusedRowBackground",{dark:Fe(At,.6),light:Fe(At,.6),hcDark:null,hcLight:null},l("focusedRowBackground","The background color of a settings row when focused."));H("settings.rowHoverBackground",{dark:Fe(At,.3),light:Fe(At,.3),hcDark:null,hcLight:null},l("settings.rowHoverBackground","The background color of a settings row when hovered."));H("settings.focusedRowBorder",{dark:Ct,light:Ct,hcDark:Ct,hcLight:Ct},l("settings.focusedRowBorder","The color of the row's top and bottom border when the row is focused."));const z=P;let B=class go extends dr{constructor(e,t,i,n,s,r,o,c,d,g,h,f){super(go.ID,e,t,h),this.keybindingsService=i,this.contextMenuService=n,this.keybindingEditingService=s,this.contextKeyService=r,this.notificationService=o,this.clipboardService=c,this.instantiationService=d,this.editorService=g,this.configurationService=f,this._onDefineWhenExpression=this._register(new I),this.onDefineWhenExpression=this._onDefineWhenExpression.event,this._onRejectWhenExpression=this._register(new I),this.onRejectWhenExpression=this._onRejectWhenExpression.event,this._onAcceptWhenExpression=this._register(new I),this.onAcceptWhenExpression=this._onAcceptWhenExpression.event,this._onLayout=this._register(new I),this.onLayout=this._onLayout.event,this.keybindingsEditorModel=null,this.unAssignedKeybindingItemToRevealAndFocus=null,this.tableEntries=[],this.dimension=null,this.latestEmptyFilters=[],this.delayedFiltering=new fe(300),this._register(i.onDidUpdateKeybindings(()=>this.render(!!this.keybindingFocusContextKey.get()))),this.keybindingsEditorContextKey=$.bindTo(this.contextKeyService),this.searchFocusContextKey=bi.bindTo(this.contextKeyService),this.keybindingFocusContextKey=Ce.bindTo(this.contextKeyService),this.searchHistoryDelayer=new fe(500),this.recordKeysAction=new le(lr,l("recordKeysLabel","Record Keys"),oe.asClassName(Td)),this.recordKeysAction.checked=!1,this.sortByPrecedenceAction=new le(gr,l("sortByPrecedeneLabel","Sort by Precedence (Highest first)"),oe.asClassName(kd)),this.sortByPrecedenceAction.checked=!1,this.overflowWidgetsDomNode=z(".keybindings-overflow-widgets-container.monaco-editor")}createEditor(e){const t=b(e,z("div",{class:"keybindings-editor"}));this.createAriaLabelElement(t),this.createOverlayContainer(t),this.createHeader(t),this.createBody(t)}setInput(e,t,i,n){return this.keybindingsEditorContextKey.set(!0),super.setInput(e,t,i,n).then(()=>this.render(!!(t&&t.preserveFocus)))}clearInput(){super.clearInput(),this.keybindingsEditorContextKey.reset(),this.keybindingFocusContextKey.reset()}layout(e){this.dimension=e,this.layoutSearchWidget(e),this.overlayContainer.style.width=e.width+"px",this.overlayContainer.style.height=e.height+"px",this.defineKeybindingWidget.layout(this.dimension),this.layoutKeybindingsTable(),this._onLayout.fire()}focus(){const e=this.activeKeybindingEntry;e?this.selectEntry(e):et||this.searchWidget.focus()}get activeKeybindingEntry(){const e=this.keybindingsTable.getFocusedElements()[0];return e&&e.templateId===Ue?e:null}async defineKeybinding(e,t){this.selectEntry(e),this.showOverlayContainer();try{const i=await this.defineKeybindingWidget.define();i&&await this.updateKeybinding(e,i,e.keybindingItem.when,t)}catch(i){this.onKeybindingEditingError(i)}finally{this.hideOverlayContainer(),this.selectEntry(e)}}defineWhenExpression(e){e.keybindingItem.keybinding&&(this.selectEntry(e),this._onDefineWhenExpression.fire(e))}rejectWhenExpression(e){this._onRejectWhenExpression.fire(e)}acceptWhenExpression(e){this._onAcceptWhenExpression.fire(e)}async updateKeybinding(e,t,i,n){((e.keybindingItem.keybinding?e.keybindingItem.keybinding.getUserSettingsLabel():"")!==t||e.keybindingItem.when!==i)&&(n?await this.keybindingEditingService.addKeybinding(e.keybindingItem.keybindingItem,t,i||void 0):await this.keybindingEditingService.editKeybinding(e.keybindingItem.keybindingItem,t,i||void 0),e.keybindingItem.keybinding||(this.unAssignedKeybindingItemToRevealAndFocus=e))}async removeKeybinding(e){if(this.selectEntry(e),e.keybindingItem.keybinding)try{await this.keybindingEditingService.removeKeybinding(e.keybindingItem.keybindingItem),this.focus()}catch(t){this.onKeybindingEditingError(t),this.selectEntry(e)}}async resetKeybinding(e){this.selectEntry(e);try{await this.keybindingEditingService.resetKeybinding(e.keybindingItem.keybindingItem),e.keybindingItem.keybinding||(this.unAssignedKeybindingItemToRevealAndFocus=e),this.selectEntry(e)}catch(t){this.onKeybindingEditingError(t),this.selectEntry(e)}}async copyKeybinding(e){this.selectEntry(e);const t={key:e.keybindingItem.keybinding&&e.keybindingItem.keybinding.getUserSettingsLabel()||"",command:e.keybindingItem.command};e.keybindingItem.when&&(t.when=e.keybindingItem.when),await this.clipboardService.writeText(JSON.stringify(t,null,"  "))}async copyKeybindingCommand(e){this.selectEntry(e),await this.clipboardService.writeText(e.keybindingItem.command)}async copyKeybindingCommandTitle(e){this.selectEntry(e),await this.clipboardService.writeText(e.keybindingItem.commandLabel)}focusSearch(){this.searchWidget.focus()}search(e){this.focusSearch(),this.searchWidget.setValue(e),this.selectEntry(0)}clearSearchResults(){this.searchWidget.clear()}showSimilarKeybindings(e){const t=`"${e.keybindingItem.keybinding.getAriaLabel()}"`;t!==this.searchWidget.getValue()&&this.searchWidget.setValue(t)}createAriaLabelElement(e){this.ariaLabelElement=b(e,P("")),this.ariaLabelElement.setAttribute("id","keybindings-editor-aria-label-element"),this.ariaLabelElement.setAttribute("aria-live","assertive")}createOverlayContainer(e){this.overlayContainer=b(e,z(".overlay-container")),this.overlayContainer.style.position="absolute",this.overlayContainer.style.zIndex="40",this.defineKeybindingWidget=this._register(this.instantiationService.createInstance(mt,this.overlayContainer)),this._register(this.defineKeybindingWidget.onDidChange(t=>this.defineKeybindingWidget.printExisting(this.keybindingsEditorModel.fetch(`"${t}"`).length))),this._register(this.defineKeybindingWidget.onShowExistingKeybidings(t=>this.searchWidget.setValue(`"${t}"`))),this.hideOverlayContainer()}showOverlayContainer(){this.overlayContainer.style.display="block"}hideOverlayContainer(){this.overlayContainer.style.display="none"}createHeader(e){this.headerContainer=b(e,z(".keybindings-header"));const t=l("SearchKeybindings.FullTextSearchPlaceholder","Type to search in keybindings"),i=l("SearchKeybindings.KeybindingsSearchPlaceholder","Recording Keys. Press Escape to exit"),n=new le(ur,l("clearInput","Clear Keybindings Search Input"),oe.asClassName(so),!1,async()=>this.clearSearchResults()),s=b(this.headerContainer,z(".search-container"));this.searchWidget=this._register(this.instantiationService.createInstance(Mi,s,{ariaLabel:t,placeholder:t,focusKey:this.searchFocusContextKey,ariaLabelledBy:"keybindings-editor-aria-label-element",recordEnter:!0,quoteRecordedKeys:!0,history:this.getMemento(0,0).searchHistory||[],inputBoxStyles:ut({inputBorder:bt})})),this._register(this.searchWidget.onDidChange(d=>{n.enabled=!!d,this.delayedFiltering.trigger(()=>this.filterKeybindings()),this.updateSearchOptions()})),this._register(this.searchWidget.onEscape(()=>this.recordKeysAction.checked=!1)),this.actionsContainer=b(s,P(".keybindings-search-actions-container"));const r=this.createRecordingBadge(this.actionsContainer);this._register(this.sortByPrecedenceAction.onDidChange(d=>{d.checked!==void 0&&this.renderKeybindingsEntries(!1),this.updateSearchOptions()})),this._register(this.recordKeysAction.onDidChange(d=>{d.checked!==void 0&&(r.classList.toggle("disabled",!d.checked),d.checked?(this.searchWidget.inputBox.setPlaceHolder(i),this.searchWidget.inputBox.setAriaLabel(i),this.searchWidget.startRecordingKeys(),this.searchWidget.focus()):(this.searchWidget.inputBox.setPlaceHolder(t),this.searchWidget.inputBox.setAriaLabel(t),this.searchWidget.stopRecordingKeys(),this.searchWidget.focus()),this.updateSearchOptions())}));const o=[this.recordKeysAction,this.sortByPrecedenceAction,n],c=this._register(new hr(this.actionsContainer,this.contextMenuService,{actionViewItemProvider:d=>{var g;if(d.id===this.sortByPrecedenceAction.id||d.id===this.recordKeysAction.id)return new za(null,d,{keybinding:(g=this.keybindingsService.lookupKeybinding(d.id))==null?void 0:g.getLabel(),toggleStyles:qa})},getKeyBinding:d=>this.keybindingsService.lookupKeybinding(d.id)}));c.setActions(o),this._register(this.keybindingsService.onDidUpdateKeybindings(()=>c.setActions(o)))}updateSearchOptions(){const e=this.input;e&&(e.searchOptions={searchValue:this.searchWidget.getValue(),recordKeybindings:!!this.recordKeysAction.checked,sortByPrecedence:!!this.sortByPrecedenceAction.checked})}createRecordingBadge(e){const t=b(e,P(".recording-badge.monaco-count-badge.long.disabled"));return t.textContent=l("recording","Recording Keys"),t.style.backgroundColor=X(Xn),t.style.color=X(Qn),t.style.border=`1px solid ${X(Zn)}`,t}layoutSearchWidget(e){this.searchWidget.layout(e),this.headerContainer.classList.toggle("small",e.width<400),this.searchWidget.inputBox.inputElement.style.paddingRight=`${Zs(this.actionsContainer)+12}px`}createBody(e){const t=b(e,z(".keybindings-body"));this.createTable(t)}createTable(e){this.keybindingsTableContainer=b(e,z(".keybindings-table-container")),this.keybindingsTable=this._register(this.instantiationService.createInstance(Ja,"KeybindingsEditor",this.keybindingsTableContainer,new Fd,[{label:"",tooltip:"",weight:0,minimumWidth:40,maximumWidth:40,templateId:Pt.TEMPLATE_ID,project(t){return t}},{label:l("command","Command"),tooltip:"",weight:.3,templateId:Ft.TEMPLATE_ID,project(t){return t}},{label:l("keybinding","Keybinding"),tooltip:"",weight:.2,templateId:Kt.TEMPLATE_ID,project(t){return t}},{label:l("when","When"),tooltip:"",weight:.35,templateId:Vt.TEMPLATE_ID,project(t){return t}},{label:l("source","Source"),tooltip:"",weight:.15,templateId:Bt.TEMPLATE_ID,project(t){return t}}],[this.instantiationService.createInstance(Pt,this),this.instantiationService.createInstance(Ft),this.instantiationService.createInstance(Kt),this.instantiationService.createInstance(Vt,this),this.instantiationService.createInstance(Bt)],{identityProvider:{getId:t=>t.id},horizontalScrolling:!1,accessibilityProvider:new Bd(this.configurationService),keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:t=>t.keybindingItem.commandLabel||t.keybindingItem.command},overrideStyles:{listBackground:J},multipleSelectionSupport:!1,setRowLineHeight:!1,openOnSingleClick:!1,transformOptimization:!1})),this._register(this.keybindingsTable.onContextMenu(t=>this.onContextMenu(t))),this._register(this.keybindingsTable.onDidChangeFocus(t=>this.onFocusChange())),this._register(this.keybindingsTable.onDidFocus(()=>{this.keybindingsTable.getHTMLElement().classList.add("focused"),this.onFocusChange()})),this._register(this.keybindingsTable.onDidBlur(()=>{this.keybindingsTable.getHTMLElement().classList.remove("focused"),this.keybindingFocusContextKey.reset()})),this._register(this.keybindingsTable.onDidOpen(t=>{var n;if((n=t.browserEvent)!=null&&n.defaultPrevented)return;const i=this.activeKeybindingEntry;i&&this.defineKeybinding(i,!1)})),b(this.keybindingsTableContainer,this.overflowWidgetsDomNode)}async render(e){if(this.input){const t=this.input;this.keybindingsEditorModel=await t.resolve(),await this.keybindingsEditorModel.resolve(this.getActionsLabels()),this.renderKeybindingsEntries(!1,e),t.searchOptions?(this.recordKeysAction.checked=t.searchOptions.recordKeybindings,this.sortByPrecedenceAction.checked=t.searchOptions.sortByPrecedence,this.searchWidget.setValue(t.searchOptions.searchValue)):this.updateSearchOptions()}}getActionsLabels(){const e=new Map;for(const t of rs.getEditorActions())e.set(t.id,t.label);for(const t of Me.getMenuItems(W.CommandPalette))if(pr(t)){const i=typeof t.command.title=="string"?t.command.title:t.command.title.value,n=t.command.category?typeof t.command.category=="string"?t.command.category:t.command.category.value:void 0;e.set(t.command.id,n?`${n}: ${i}`:i)}return e}filterKeybindings(){this.renderKeybindingsEntries(this.searchWidget.hasFocus()),this.searchHistoryDelayer.trigger(()=>{this.searchWidget.inputBox.addToHistory(),this.getMemento(0,0).searchHistory=this.searchWidget.inputBox.getHistory(),this.saveState()})}clearKeyboardShortcutSearchHistory(){this.searchWidget.inputBox.clearHistory(),this.getMemento(0,0).searchHistory=this.searchWidget.inputBox.getHistory(),this.saveState()}renderKeybindingsEntries(e,t){if(this.keybindingsEditorModel){const i=this.searchWidget.getValue(),n=this.keybindingsEditorModel.fetch(i,this.sortByPrecedenceAction.checked);this.ariaLabelElement.setAttribute("aria-label",this.getAriaLabel(n)),n.length===0&&this.latestEmptyFilters.push(i);const s=this.keybindingsTable.getSelection()[0];if(this.tableEntries=n,this.keybindingsTable.splice(0,this.keybindingsTable.length,this.tableEntries),this.layoutKeybindingsTable(),e)this.keybindingsTable.setSelection([]),this.keybindingsTable.setFocus([]);else if(this.unAssignedKeybindingItemToRevealAndFocus){const r=this.getNewIndexOfUnassignedKeybinding(this.unAssignedKeybindingItemToRevealAndFocus);r!==-1&&(this.keybindingsTable.reveal(r,.2),this.selectEntry(r)),this.unAssignedKeybindingItemToRevealAndFocus=null}else s!==-1&&s<this.tableEntries.length?this.selectEntry(s,t):this.editorService.activeEditorPane===this&&!t&&this.focus()}}getAriaLabel(e){return this.sortByPrecedenceAction.checked?l("show sorted keybindings","Showing {0} Keybindings in precedence order",e.length):l("show keybindings","Showing {0} Keybindings in alphabetical order",e.length)}layoutKeybindingsTable(){if(!this.dimension)return;const e=this.dimension.height-(fr(this.headerContainer).height+12);this.keybindingsTableContainer.style.height=`${e}px`,this.keybindingsTable.layout(e)}getIndexOf(e){const t=this.tableEntries.indexOf(e);if(t===-1){for(let i=0;i<this.tableEntries.length;i++)if(this.tableEntries[i].id===e.id)return i}return t}getNewIndexOfUnassignedKeybinding(e){for(let t=0;t<this.tableEntries.length;t++){const i=this.tableEntries[t];if(i.templateId===Ue&&i.keybindingItem.command===e.keybindingItem.command)return t}return-1}selectEntry(e,t=!0){const i=typeof e=="number"?e:this.getIndexOf(e);i!==-1&&i<this.keybindingsTable.length&&(t&&(this.keybindingsTable.domFocus(),this.keybindingsTable.setFocus([i])),this.keybindingsTable.setSelection([i]))}focusKeybindings(){this.keybindingsTable.domFocus();const e=this.keybindingsTable.getFocus();this.keybindingsTable.setFocus([e.length?e[0]:0])}selectKeybinding(e){this.selectEntry(e)}recordSearchKeys(){this.recordKeysAction.checked=!0}toggleSortByPrecedence(){this.sortByPrecedenceAction.checked=!this.sortByPrecedenceAction.checked}onContextMenu(e){if(e.element&&e.element.templateId===Ue){const t=e.element;this.selectEntry(t),this.contextMenuService.showContextMenu({getAnchor:()=>e.anchor,getActions:()=>[this.createCopyAction(t),this.createCopyCommandAction(t),this.createCopyCommandTitleAction(t),new ot,...t.keybindingItem.keybinding?[this.createDefineKeybindingAction(t),this.createAddKeybindingAction(t)]:[this.createDefineKeybindingAction(t)],new ot,this.createRemoveAction(t),this.createResetAction(t),new ot,this.createDefineWhenExpressionAction(t),new ot,this.createShowConflictsAction(t)]})}}onFocusChange(){this.keybindingFocusContextKey.reset();const e=this.keybindingsTable.getFocusedElements()[0];e&&e.templateId===Ue&&this.keybindingFocusContextKey.set(!0)}createDefineKeybindingAction(e){return{label:e.keybindingItem.keybinding?l("changeLabel","Change Keybinding..."):l("addLabel","Add Keybinding..."),enabled:!0,id:ki,run:()=>this.defineKeybinding(e,!1)}}createAddKeybindingAction(e){return{label:l("addLabel","Add Keybinding..."),enabled:!0,id:mr,run:()=>this.defineKeybinding(e,!0)}}createDefineWhenExpressionAction(e){return{label:l("editWhen","Change When Expression"),enabled:!!e.keybindingItem.keybinding,id:br,run:()=>this.defineWhenExpression(e)}}createRemoveAction(e){return{label:l("removeLabel","Remove Keybinding"),enabled:!!e.keybindingItem.keybinding,id:yr,run:()=>this.removeKeybinding(e)}}createResetAction(e){return{label:l("resetLabel","Reset Keybinding"),enabled:!e.keybindingItem.keybindingItem.isDefault,id:Sr,run:()=>this.resetKeybinding(e)}}createShowConflictsAction(e){return{label:l("showSameKeybindings","Show Same Keybindings"),enabled:!!e.keybindingItem.keybinding,id:vr,run:()=>this.showSimilarKeybindings(e)}}createCopyAction(e){return{label:l("copyLabel","Copy"),enabled:!0,id:wr,run:()=>this.copyKeybinding(e)}}createCopyCommandAction(e){return{label:l("copyCommandLabel","Copy Command ID"),enabled:!0,id:Er,run:()=>this.copyKeybindingCommand(e)}}createCopyCommandTitleAction(e){return{label:l("copyCommandTitleLabel","Copy Command Title"),enabled:!!e.keybindingItem.commandLabel,id:Cr,run:()=>this.copyKeybindingCommandTitle(e)}}onKeybindingEditingError(e){this.notificationService.error(typeof e=="string"?e:l("error","Error '{0}' while editing the keybinding. Please open 'keybindings.json' file and check for errors.",`${e}`))}};B.ID="workbench.editor.keybindings";B=v([u(0,os),u(1,zi),u(2,We),u(3,vt),u(4,or),u(5,_e),u(6,qs),u(7,as),u(8,j),u(9,O),u(10,ar),u(11,ie)],B);class Fd{constructor(){this.headerRowHeight=30}getHeight(e){if(e.templateId===Ue){const t=e.keybindingItem.commandLabel&&e.commandIdMatches,i=!!e.commandDefaultLabelMatches,n=!!e.extensionIdMatches;if(t&&i)return 60;if(n||t||i)return 40}return 24}}let Pt=class uo{constructor(e,t){this.keybindingsEditor=e,this.keybindingsService=t,this.templateId=uo.TEMPLATE_ID}renderTemplate(e){const t=b(e,z(".actions"));return{actionBar:new $i(t,{animated:!1})}}renderElement(e,t,i,n){i.actionBar.clear();const s=[];e.keybindingItem.keybinding?s.push(this.createEditAction(e)):s.push(this.createAddAction(e)),i.actionBar.push(s,{icon:!0})}createEditAction(e){const t=this.keybindingsService.lookupKeybinding(ki);return{class:oe.asClassName(Id),enabled:!0,id:"editKeybinding",tooltip:t?l("editKeybindingLabelWithKey","Change Keybinding {0}",`(${t.getLabel()})`):l("editKeybindingLabel","Change Keybinding"),run:()=>this.keybindingsEditor.defineKeybinding(e,!1)}}createAddAction(e){const t=this.keybindingsService.lookupKeybinding(ki);return{class:oe.asClassName(_d),enabled:!0,id:"addKeybinding",tooltip:t?l("addKeybindingLabelWithKey","Add Keybinding {0}",`(${t.getLabel()})`):l("addKeybindingLabel","Add Keybinding"),run:()=>this.keybindingsEditor.defineKeybinding(e,!1)}}disposeTemplate(e){e.actionBar.dispose()}};Pt.TEMPLATE_ID="actions";Pt=v([u(1,We)],Pt);class Ft{constructor(){this.templateId=Ft.TEMPLATE_ID}renderTemplate(e){const t=b(e,z(".command")),i=b(t,z(".command-label")),n=new lt(i),s=b(t,z(".command-default-label")),r=new lt(s),o=b(t,z(".command-id.code")),c=new lt(o);return{commandColumn:t,commandLabelContainer:i,commandLabel:n,commandDefaultLabelContainer:s,commandDefaultLabel:r,commandIdLabelContainer:o,commandIdLabel:c}}renderElement(e,t,i,n){const s=e.keybindingItem,r=!!(s.commandLabel&&e.commandIdMatches),o=!!e.commandDefaultLabelMatches;i.commandColumn.classList.toggle("vertical-align-column",r||o),i.commandColumn.title=s.commandLabel?l("title","{0} ({1})",s.commandLabel,s.command):s.command,s.commandLabel?(i.commandLabelContainer.classList.remove("hide"),i.commandLabel.set(s.commandLabel,e.commandLabelMatches)):(i.commandLabelContainer.classList.add("hide"),i.commandLabel.set(void 0)),e.commandDefaultLabelMatches?(i.commandDefaultLabelContainer.classList.remove("hide"),i.commandDefaultLabel.set(s.commandDefaultLabel,e.commandDefaultLabelMatches)):(i.commandDefaultLabelContainer.classList.add("hide"),i.commandDefaultLabel.set(void 0)),e.commandIdMatches||!s.commandLabel?(i.commandIdLabelContainer.classList.remove("hide"),i.commandIdLabel.set(s.command,e.commandIdMatches)):(i.commandIdLabelContainer.classList.add("hide"),i.commandIdLabel.set(void 0))}disposeTemplate(e){}}Ft.TEMPLATE_ID="commands";class Kt{constructor(){this.templateId=Kt.TEMPLATE_ID}renderTemplate(e){const t=b(e,z(".keybinding"));return{keybindingLabel:new ln(b(t,z("div.keybinding-label")),xi,gn)}}renderElement(e,t,i,n){e.keybindingItem.keybinding?i.keybindingLabel.set(e.keybindingItem.keybinding,e.keybindingMatches):i.keybindingLabel.set(void 0,void 0)}disposeTemplate(e){}}Kt.TEMPLATE_ID="keybindings";function Kd(a,e){const t=new G;return t.add(D(a,_.CLICK,Xa(e))),t.add(D(a,_.KEY_UP,i=>{const n=new Ge(i);(n.equals(10)||n.equals(3))&&(i.preventDefault(),i.stopPropagation(),e())})),t}let Bt=class ho{constructor(e){this.extensionsWorkbenchService=e,this.templateId=ho.TEMPLATE_ID}renderTemplate(e){const t=b(e,z(".source")),i=new lt(b(t,z(".source-label"))),n=b(t,z(".extension-container")),s=b(n,z("a.extension-label",{tabindex:0})),r=new lt(b(n,z(".extension-id-container.code")));return{sourceColumn:t,sourceLabel:i,extensionLabel:s,extensionContainer:n,extensionId:r,disposables:new G}}renderElement(e,t,i,n){if(Qe(e.keybindingItem.source))i.extensionContainer.classList.add("hide"),i.sourceLabel.element.classList.remove("hide"),i.sourceColumn.title="",i.sourceLabel.set(e.keybindingItem.source||"-",e.sourceMatches);else{i.extensionContainer.classList.remove("hide"),i.sourceLabel.element.classList.add("hide");const s=e.keybindingItem.source,r=s.displayName??s.identifier.value;i.sourceColumn.title=l("extension label","Extension ({0})",r),i.extensionLabel.textContent=r,i.disposables.add(Kd(i.extensionLabel,()=>{this.extensionsWorkbenchService.open(s.identifier.value)})),e.extensionIdMatches?(i.extensionId.element.classList.remove("hide"),i.extensionId.set(s.identifier.value,e.extensionIdMatches)):(i.extensionId.element.classList.add("hide"),i.extensionId.set(void 0))}}disposeTemplate(e){e.disposables.dispose()}};Bt.TEMPLATE_ID="source";Bt=v([u(0,cr)],Bt);let kn=class extends ee{constructor(e,t,i,n){super(),this._onDidAccept=this._register(new I),this.onDidAccept=this._onDidAccept.event,this._onDidReject=this._register(new I),this.onDidReject=this._onDidReject.event;const s=xt.bindTo(n);this.input=this._register(i.createInstance(Ri,"keyboardshortcutseditor#wheninput",e,{provideResults:()=>{const r=[];for(const o of Ya.all())r.push({label:o.key,documentation:o.description,detail:o.type,kind:14});return r},triggerCharacters:["!"," "],wordDefinition:/[a-zA-Z.]+/,alwaysShowSuggestions:!0},"","keyboardshortcutseditor#wheninput",{focusContextKey:s,overflowWidgetsDomNode:t.overflowWidgetsDomNode})),this._register(D(this.input.element,_.DBLCLICK,r=>Ze.stop(r))),this._register(Qt(()=>s.reset())),this._register(t.onAcceptWhenExpression(()=>this._onDidAccept.fire(this.input.getValue()))),this._register(he.any(t.onRejectWhenExpression,this.input.onDidBlur)(()=>this._onDidReject.fire()))}layout(e){this.input.layout(e)}show(e){this.input.setValue(e),this.input.focus(!0)}};kn=v([u(2,j),u(3,_e)],kn);let Vt=class po{constructor(e,t){this.keybindingsEditor=e,this.instantiationService=t,this.templateId=po.TEMPLATE_ID}renderTemplate(e){const t=b(e,z(".when")),i=b(t,z("div.when-label")),n=new lt(i),s=b(t,z("div.when-input-container"));return{element:t,whenLabelContainer:i,whenLabel:n,whenInputContainer:s,disposables:new G}}renderElement(e,t,i,n){i.disposables.clear();const s=i.disposables.add(new G);i.disposables.add(this.keybindingsEditor.onDefineWhenExpression(r=>{if(e===r){i.element.classList.add("input-mode");const o=s.add(this.instantiationService.createInstance(kn,i.whenInputContainer,this.keybindingsEditor));o.layout(new is(i.element.parentElement.clientWidth,18)),o.show(e.keybindingItem.when||"");const c=()=>{s.clear(),i.element.classList.remove("input-mode"),i.element.parentElement.style.paddingLeft="10px",Ae(i.whenInputContainer)};s.add(o.onDidAccept(d=>{c(),this.keybindingsEditor.updateKeybinding(e,e.keybindingItem.keybinding&&e.keybindingItem.keybinding.getUserSettingsLabel()||"",d),this.keybindingsEditor.selectKeybinding(e)})),s.add(o.onDidReject(()=>{c(),this.keybindingsEditor.selectKeybinding(e)})),i.element.parentElement.style.paddingLeft="0px"}})),i.whenLabelContainer.classList.toggle("code",!!e.keybindingItem.when),i.whenLabelContainer.classList.toggle("empty",!e.keybindingItem.when),e.keybindingItem.when?(i.whenLabel.set(e.keybindingItem.when,e.whenMatches),i.whenLabel.element.title=e.keybindingItem.when,i.element.title=e.keybindingItem.when):(i.whenLabel.set("-"),i.whenLabel.element.title="",i.element.title="")}disposeTemplate(e){e.disposables.dispose()}};Vt.TEMPLATE_ID="when";Vt=v([u(1,j)],Vt);class Bd{constructor(e){this.configurationService=e}getWidgetAriaLabel(){return l("keybindingsLabel","Keybindings")}getAriaLabel({keybindingItem:e}){var i;const t=[e.commandLabel?e.commandLabel:e.command,((i=e.keybinding)==null?void 0:i.getAriaLabel())||l("noKeybinding","No keybinding assigned"),e.when?e.when:l("noWhen","No when context"),Qe(e.source)?e.source:e.source.description??e.source.identifier.value];if(this.configurationService.getValue("accessibility.verbosity.keybindingsEditor")){const n=l("keyboard shortcuts aria label","use space or enter to change the keybinding.");t.push(n)}return t.join(", ")}}H("keybindingTable.headerBackground",{dark:Be,light:Be,hcDark:Be,hcLight:Be},"Background color for the keyboard shortcuts table header.");H("keybindingTable.rowsBackground",{light:Be,dark:Be,hcDark:Be,hcLight:Be},"Background color for the keyboard shortcuts table alternating rows.");ns((a,e)=>{const t=a.getColor(st);if(t){const h=t.transparent(.8).makeOpaque(tr(a));e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table .monaco-table-tr .monaco-table-td .code { color: ${h}; }`)}const i=a.getColor(Ba),n=a.getColor(Va);if(i&&n){const h=i.transparent(.8).makeOpaque(n);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table.focused .monaco-list-row.selected .monaco-table-tr .monaco-table-td .code { color: ${h}; }`)}const s=a.getColor(Ua),r=a.getColor(Ga);if(s&&r){const h=s.transparent(.8).makeOpaque(r);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table .monaco-list-row.selected .monaco-table-tr .monaco-table-td .code { color: ${h}; }`)}const o=a.getColor(ja),c=a.getColor(Ha);if(o&&c){const h=o.transparent(.8).makeOpaque(c);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table.focused .monaco-list-row.focused .monaco-table-tr .monaco-table-td .code { color: ${h}; }`)}const d=a.getColor($a),g=a.getColor(At);if(d&&g){const h=d.transparent(.8).makeOpaque(g);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table.focused .monaco-list-row:hover:not(.focused):not(.selected) .monaco-table-tr .monaco-table-td .code { color: ${h}; }`)}});let Oe=class extends le{constructor(e,t,i,n,s,r){super(e,t),this.modelService=i,this.languageService=n,this.quickInputService=s,this.preferencesService=r}async run(){const t=this.languageService.getSortedRegisteredLanguageNames().map(({languageName:i,languageId:n})=>{const s=l("languageDescriptionConfigured","({0})",n);let r;const o=this.languageService.getExtensions(n);if(o.length)r=Y.file(o[0]);else{const c=this.languageService.getFilenames(n);c.length&&(r=Y.file(c[0]))}return{label:i,iconClasses:Za(this.modelService,this.languageService,r),description:s}});await this.quickInputService.pick(t,{placeHolder:l("pickLanguage","Select Language")}).then(i=>{if(i){const n=this.languageService.getLanguageIdByLanguageName(i.label);if(typeof n=="string")return this.preferencesService.openLanguageSpecificSettings(n)}})}};Oe.ID="workbench.action.configureLanguageBasedSettings";Oe.LABEL={value:l("configureLanguageBasedSettings","Configure Language Specific Settings..."),original:"Configure Language Specific Settings..."};Oe=v([u(2,ji),u(3,Pe),u(4,Qa),u(5,F)],Oe);at.registerCommand({id:"_getAllSettings",handler:()=>ge.as(Ie.Configuration).getConfigurationProperties()});at.registerCommand("_getAllCommands",function(a){var i,n;const e=a.get(We),t=[];for(const s of rs.getEditorActions()){const r=e.lookupKeybinding(s.id);t.push({command:s.id,label:s.label,precondition:(i=s.precondition)==null?void 0:i.serialize(),keybinding:(r==null?void 0:r.getLabel())??"Not set"})}for(const s of Me.getMenuItems(W.CommandPalette))if(pr(s)){const r=typeof s.command.title=="string"?s.command.title:s.command.title.value,o=s.command.category?typeof s.command.category=="string"?s.command.category:s.command.category.value:void 0,c=o?`${o}: ${r}`:r,d=e.lookupKeybinding(s.command.id);t.push({command:s.command.id,label:c,precondition:(n=s.when)==null?void 0:n.serialize(),keybinding:(d==null?void 0:d.getLabel())??"Not set"})}return t});let Ni=class extends ee{constructor(e,t,i,n,s){super(),this.editor=e,this.preferencesModel=t,this.preferencesService=i,this.configurationService=n,this.instantiationService=s,this.modelChangeDelayer=new fe(200),this.settingHighlighter=this._register(s.createInstance(Dn,e)),this.editSettingActionRenderer=this._register(this.instantiationService.createInstance(_n,this.editor,this.preferencesModel,this.settingHighlighter)),this._register(this.editSettingActionRenderer.onUpdateSetting(({key:r,value:o,source:c})=>this.updatePreference(r,o,c))),this._register(this.editor.getModel().onDidChangeContent(()=>this.modelChangeDelayer.trigger(()=>this.onModelChanged()))),this.unsupportedSettingsRenderer=this._register(s.createInstance(Ln,e,t))}render(){this.editSettingActionRenderer.render(this.preferencesModel.settingsGroups,this.associatedPreferencesModel),this.unsupportedSettingsRenderer.render()}updatePreference(e,t,i){const n=i.overrideOf?ic(i.overrideOf.key):null,s=this.preferencesModel.uri;this.configurationService.updateValue(e,t,{overrideIdentifiers:n,resource:s},this.preferencesModel.configurationTarget).then(()=>this.onSettingUpdated(i))}onModelChanged(){this.editor.hasModel()&&this.render()}onSettingUpdated(e){this.editor.focus(),e=this.getSetting(e),e&&(this.editor.setSelection(e.valueRange),this.settingHighlighter.highlight(e,!0))}getSetting(e){const{key:t,overrideOf:i}=e;if(i){const n=this.getSetting(i);for(const s of n.overrides)if(s.key===t)return s;return}return this.preferencesModel.getPreference(t)}focusPreference(e){const t=this.getSetting(e);t?(this.settingHighlighter.highlight(t,!0),this.editor.setPosition({lineNumber:t.keyRange.startLineNumber,column:t.keyRange.startColumn})):this.settingHighlighter.clear(!0)}clearFocus(e){this.settingHighlighter.clear(!0)}editPreference(e){const t=this.getSetting(e);return!!(t&&this.editSettingActionRenderer.activateOnSetting(t))}};Ni=v([u(2,F),u(3,ie),u(4,j)],Ni);let In=class extends Ni{constructor(e,t,i,n,s){super(e,t,i,n,s),this.workspaceConfigurationRenderer=this._register(s.createInstance(Ut,e,t))}render(){super.render(),this.workspaceConfigurationRenderer.render()}};In=v([u(2,F),u(3,ie),u(4,j)],In);let _n=class extends ee{constructor(e,t,i,n,s,r){super(),this.editor=e,this.primarySettingsModel=t,this.settingHighlighter=i,this.configurationService=n,this.instantiationService=s,this.contextMenuService=r,this.settingsGroups=[],this._onUpdateSetting=new I,this.onUpdateSetting=this._onUpdateSetting.event,this.editPreferenceWidgetForCursorPosition=this._register(this.instantiationService.createInstance(Ms,e)),this.editPreferenceWidgetForMouseMove=this._register(this.instantiationService.createInstance(Ms,e)),this.toggleEditPreferencesForMouseMoveDelayer=new fe(75),this._register(this.editPreferenceWidgetForCursorPosition.onClick(o=>this.onEditSettingClicked(this.editPreferenceWidgetForCursorPosition,o))),this._register(this.editPreferenceWidgetForMouseMove.onClick(o=>this.onEditSettingClicked(this.editPreferenceWidgetForMouseMove,o))),this._register(this.editor.onDidChangeCursorPosition(o=>this.onPositionChanged(o))),this._register(this.editor.onMouseMove(o=>this.onMouseMoved(o))),this._register(this.editor.onDidChangeConfiguration(()=>this.onConfigurationChanged()))}render(e,t){this.editPreferenceWidgetForCursorPosition.hide(),this.editPreferenceWidgetForMouseMove.hide(),this.settingsGroups=e,this.associatedPreferencesModel=t;const i=this.getSettings(this.editor.getPosition().lineNumber);i.length&&this.showEditPreferencesWidget(this.editPreferenceWidgetForCursorPosition,i)}isDefaultSettings(){return this.primarySettingsModel instanceof eo}onConfigurationChanged(){this.editor.getOption(55)||(this.editPreferenceWidgetForCursorPosition.hide(),this.editPreferenceWidgetForMouseMove.hide())}onPositionChanged(e){this.editPreferenceWidgetForMouseMove.hide();const t=this.getSettings(e.position.lineNumber);t.length?this.showEditPreferencesWidget(this.editPreferenceWidgetForCursorPosition,t):this.editPreferenceWidgetForCursorPosition.hide()}onMouseMoved(e){const t=this.getEditPreferenceWidgetUnderMouse(e);if(t){this.onMouseOver(t);return}this.settingHighlighter.clear(),this.toggleEditPreferencesForMouseMoveDelayer.trigger(()=>this.toggleEditPreferenceWidgetForMouseMove(e))}getEditPreferenceWidgetUnderMouse(e){if(e.target.type===2){const t=e.target.position.lineNumber;if(this.editPreferenceWidgetForMouseMove.getLine()===t&&this.editPreferenceWidgetForMouseMove.isVisible())return this.editPreferenceWidgetForMouseMove;if(this.editPreferenceWidgetForCursorPosition.getLine()===t&&this.editPreferenceWidgetForCursorPosition.isVisible())return this.editPreferenceWidgetForCursorPosition}}toggleEditPreferenceWidgetForMouseMove(e){const t=e.target.position?this.getSettings(e.target.position.lineNumber):null;t&&t.length?this.showEditPreferencesWidget(this.editPreferenceWidgetForMouseMove,t):this.editPreferenceWidgetForMouseMove.hide()}showEditPreferencesWidget(e,t){const i=t[0].valueRange.startLineNumber;this.editor.getOption(55)&&this.marginFreeFromOtherDecorations(i)&&(e.show(i,l("editTtile","Edit"),t),(e===this.editPreferenceWidgetForCursorPosition?this.editPreferenceWidgetForMouseMove:this.editPreferenceWidgetForCursorPosition).hide())}marginFreeFromOtherDecorations(e){const t=this.editor.getLineDecorations(e);if(t){for(const{options:i}of t)if(i.glyphMarginClassName&&i.glyphMarginClassName.indexOf(oe.asClassName(Ji))===-1)return!1}return!0}getSettings(e){const t=this.getConfigurationsMap();return this.getSettingsAtLineNumber(e).filter(i=>{const n=t[i.key];if(n){if(n.policy&&this.configurationService.inspect(i.key).policyValue!==void 0)return!1;if(this.isDefaultSettings())return i.key!=="launch";if((n.type==="boolean"||n.enum)&&(this.primarySettingsModel.configurationTarget!==6||n.scope===4||n.scope===5))return!0}return!1})}getSettingsAtLineNumber(e){let t=0;const i=[];for(const n of this.settingsGroups){if(n.range.startLineNumber>e)break;if(e>=n.range.startLineNumber&&e<=n.range.endLineNumber)for(const s of n.sections)for(const r of s.settings){if(r.range.startLineNumber>e)break;if(e>=r.range.startLineNumber&&e<=r.range.endLineNumber)if(!this.isDefaultSettings()&&r.overrides.length)for(const o of r.overrides)e>=o.range.startLineNumber&&e<=o.range.endLineNumber&&i.push({...o,index:t,groupId:n.id});else i.push({...r,index:t,groupId:n.id});t++}}return i}onMouseOver(e){this.settingHighlighter.highlight(e.preferences[0])}onEditSettingClicked(e,t){Ze.stop(t.event,!0);const i={x:t.event.posx,y:t.event.posy},n=this.getSettings(e.getLine()).length===1?this.getActions(e.preferences[0],this.getConfigurationsMap()[e.preferences[0].key]):e.preferences.map(s=>new nc(`preferences.submenu.${s.key}`,s.key,this.getActions(s,this.getConfigurationsMap()[s.key])));this.contextMenuService.showContextMenu({getAnchor:()=>i,getActions:()=>n})}activateOnSetting(e){const t=e.keyRange.startLineNumber,i=this.getSettings(t);if(!i.length)return!1;this.editPreferenceWidgetForMouseMove.show(t,"",i);const n=this.getActions(this.editPreferenceWidgetForMouseMove.preferences[0],this.getConfigurationsMap()[this.editPreferenceWidgetForMouseMove.preferences[0].key]);return this.contextMenuService.showContextMenu({getAnchor:()=>this.toAbsoluteCoords(new rr(t,1)),getActions:()=>n}),!0}toAbsoluteCoords(e){const t=this.editor.getScrolledVisiblePosition(e),i=fr(this.editor.getDomNode()),n=i.left+t.left,s=i.top+t.top+t.height;return{x:n,y:s+10}}getConfigurationsMap(){return ge.as(Ie.Configuration).getConfigurationProperties()}getActions(e,t){return t.type==="boolean"?[{id:"truthyValue",label:"true",enabled:!0,run:()=>this.updateSetting(e.key,!0,e)},{id:"falsyValue",label:"false",enabled:!0,run:()=>this.updateSetting(e.key,!1,e)}]:t.enum?t.enum.map(i=>({id:i,label:JSON.stringify(i),enabled:!0,run:()=>this.updateSetting(e.key,i,e)})):this.getDefaultActions(e)}getDefaultActions(e){return this.isDefaultSettings()?[{id:"setDefaultValue",label:this.associatedPreferencesModel.getPreference(e.key)?l("replaceDefaultValue","Replace in Settings"):l("copyDefaultValue","Copy to Settings"),enabled:!0,run:()=>this.updateSetting(e.key,e.value,e)}]:[]}updateSetting(e,t,i){this._onUpdateSetting.fire({key:e,value:t,source:i})}};_n=v([u(3,ie),u(4,j),u(5,vt)],_n);let Dn=class extends ee{constructor(e,t){super(),this.editor=e,this.fixedHighlighter=this._register(t.createInstance(xs)),this.volatileHighlighter=this._register(t.createInstance(xs))}highlight(e,t=!1){this.volatileHighlighter.removeHighlightRange(),this.fixedHighlighter.removeHighlightRange(),(t?this.fixedHighlighter:this.volatileHighlighter).highlightRange({range:e.valueRange,resource:this.editor.getModel().uri},this.editor),this.editor.revealLineInCenterIfOutsideViewport(e.valueRange.startLineNumber,0)}clear(e=!1){this.volatileHighlighter.removeHighlightRange(),e&&this.fixedHighlighter.removeHighlightRange()}};Dn=v([u(1,j)],Dn);let Ln=class extends ee{constructor(e,t,i,n,s,r,o,c,d,g){super(),this.editor=e,this.settingsEditorModel=t,this.markerService=i,this.environmentService=n,this.configurationService=s,this.workspaceTrustManagementService=r,this.uriIdentityService=o,this.userDataProfileService=d,this.userDataProfilesService=g,this.renderingDelayer=new fe(200),this.codeActions=new sc(h=>this.uriIdentityService.extUri.getComparisonKey(h)),this._register(this.editor.getModel().onDidChangeContent(()=>this.delayedRender())),this._register(he.filter(this.configurationService.onDidChangeConfiguration,h=>h.source===7)(()=>this.delayedRender())),this._register(c.codeActionProvider.register({pattern:t.uri.path},this))}delayedRender(){this.renderingDelayer.trigger(()=>this.render())}render(){this.codeActions.clear();const e=this.generateMarkerData();e.length?this.markerService.changeOne("UnsupportedSettingsRenderer",this.settingsEditorModel.uri,e):this.markerService.remove("UnsupportedSettingsRenderer",[this.settingsEditorModel.uri])}async provideCodeActions(e,t,i,n){const s=[],r=this.codeActions.get(e.uri);if(r)for(const[o,c]of r)o.containsRange(t)&&s.push(...c);return{actions:s,dispose:()=>{}}}generateMarkerData(){const e=[],t=ge.as(Ie.Configuration).getConfigurationProperties();for(const i of this.settingsEditorModel.settingsGroups)for(const n of i.sections)for(const s of n.settings){if(Rt.test(s.key)){s.overrides&&this.handleOverrides(s.overrides,t,e);continue}const r=t[s.key];if(r){if(this.handlePolicyConfiguration(s,r,e))continue;switch(this.settingsEditorModel.configurationTarget){case 3:this.handleLocalUserConfiguration(s,r,e);break;case 4:this.handleRemoteUserConfiguration(s,r,e);break;case 5:this.handleWorkspaceConfiguration(s,r,e);break;case 6:this.handleWorkspaceFolderConfiguration(s,r,e);break}}else e.push(this.gemerateUnknownConfigurationMarker(s))}return e}handlePolicyConfiguration(e,t,i){return!t.policy||this.configurationService.inspect(e.key).policyValue===void 0||this.settingsEditorModel.configurationTarget===7?!1:(i.push({severity:xe.Hint,tags:[1],...e.range,message:l("unsupportedPolicySetting","This setting cannot be applied because it is configured in the system policy.")}),!0)}handleOverrides(e,t,i){for(const n of e||[]){const s=t[n.key];s?s.scope!==5&&i.push({severity:xe.Hint,tags:[1],...n.range,message:l("unsupportLanguageOverrideSetting","This setting cannot be applied because it is not registered as language override setting.")}):i.push(this.gemerateUnknownConfigurationMarker(n))}}handleLocalUserConfiguration(e,t,i){this.userDataProfileService.currentProfile.isDefault||(je(this.userDataProfilesService.defaultProfile.settingsResource,this.settingsEditorModel.uri)&&t.scope!==1?i.push({severity:xe.Hint,tags:[1],...e.range,message:l("defaultProfileSettingWhileNonDefaultActive","This setting cannot be applied while a non-default profile is active. It will be applied when the default profile is active.")}):je(this.userDataProfileService.currentProfile.settingsResource,this.settingsEditorModel.uri)&&t.scope===1&&i.push(this.generateUnsupportedApplicationSettingMarker(e))),this.environmentService.remoteAuthority&&(t.scope===2||t.scope===6)&&i.push({severity:xe.Hint,tags:[1],...e.range,message:l("unsupportedRemoteMachineSetting","This setting cannot be applied in this window. It will be applied when you open a local window.")})}handleRemoteUserConfiguration(e,t,i){t.scope===1&&i.push(this.generateUnsupportedApplicationSettingMarker(e))}handleWorkspaceConfiguration(e,t,i){if(t.scope===1&&i.push(this.generateUnsupportedApplicationSettingMarker(e)),t.scope===2&&i.push(this.generateUnsupportedMachineSettingMarker(e)),!this.workspaceTrustManagementService.isWorkspaceTrusted()&&t.restricted){const n=this.generateUntrustedSettingMarker(e);i.push(n);const s=this.generateUntrustedSettingCodeActions([n]);this.addCodeActions(n,s)}}handleWorkspaceFolderConfiguration(e,t,i){if(t.scope===1&&i.push(this.generateUnsupportedApplicationSettingMarker(e)),t.scope===2&&i.push(this.generateUnsupportedMachineSettingMarker(e)),t.scope===3&&i.push({severity:xe.Hint,tags:[1],...e.range,message:l("unsupportedWindowSetting","This setting cannot be applied in this workspace. It will be applied when you open the containing workspace folder directly.")}),!this.workspaceTrustManagementService.isWorkspaceTrusted()&&t.restricted){const n=this.generateUntrustedSettingMarker(e);i.push(n);const s=this.generateUntrustedSettingCodeActions([n]);this.addCodeActions(n,s)}}generateUnsupportedApplicationSettingMarker(e){return{severity:xe.Hint,tags:[1],...e.range,message:l("unsupportedApplicationSetting","This setting has an application scope and can be set only in the user settings file.")}}generateUnsupportedMachineSettingMarker(e){return{severity:xe.Hint,tags:[1],...e.range,message:l("unsupportedMachineSetting","This setting can only be applied in user settings in local window or in remote settings in remote window.")}}generateUntrustedSettingMarker(e){return{severity:xe.Warning,...e.range,message:l("untrustedSetting","This setting can only be applied in a trusted workspace.")}}gemerateUnknownConfigurationMarker(e){return{severity:xe.Hint,tags:[1],...e.range,message:l("unknown configuration setting","Unknown Configuration Setting")}}generateUntrustedSettingCodeActions(e){return[{title:l("manage workspace trust","Manage Workspace Trust"),command:{id:"workbench.trust.manage",title:l("manage workspace trust","Manage Workspace Trust")},diagnostics:e,kind:rc.QuickFix.value}]}addCodeActions(e,t){let i=this.codeActions.get(this.settingsEditorModel.uri);i||(i=[],this.codeActions.set(this.settingsEditorModel.uri,i)),i.push([dt.lift(e),t])}dispose(){this.markerService.remove("UnsupportedSettingsRenderer",[this.settingsEditorModel.uri]),this.codeActions.clear(),super.dispose()}};Ln=v([u(2,xr),u(3,wt),u(4,ie),u(5,Tr),u(6,ec),u(7,sr),u(8,yt),u(9,Jt)],Ln);let Ut=class Mn extends ee{constructor(e,t,i,n){super(),this.editor=e,this.workspaceSettingsEditorModel=t,this.workspaceContextService=i,this.markerService=n,this.decorations=this.editor.createDecorationsCollection(),this.renderingDelayer=new fe(200),this._register(this.editor.getModel().onDidChangeContent(()=>this.renderingDelayer.trigger(()=>this.render())))}render(){const e=[];if(this.workspaceContextService.getWorkbenchState()===3&&this.workspaceSettingsEditorModel instanceof bn){const t=[];for(const i of this.workspaceSettingsEditorModel.configurationGroups)for(const n of i.sections)for(const s of n.settings)Mn.supportedKeys.includes(s.key)||e.push({severity:xe.Hint,tags:[1],...s.range,message:l("unsupportedProperty","Unsupported Property")});this.decorations.set(t.map(i=>this.createDecoration(i)))}e.length?this.markerService.changeOne("WorkspaceConfigurationRenderer",this.workspaceSettingsEditorModel.uri,e):this.markerService.remove("WorkspaceConfigurationRenderer",[this.workspaceSettingsEditorModel.uri])}createDecoration(e){return{range:e,options:Mn._DIM_CONFIGURATION_}}dispose(){this.markerService.remove("WorkspaceConfigurationRenderer",[this.workspaceSettingsEditorModel.uri]),this.decorations.clear(),super.dispose()}};Ut.supportedKeys=["folders","tasks","launch","extensions","settings","remoteAuthority","transient"];Ut._DIM_CONFIGURATION_=tc.register({description:"dim-configuration",stickiness:1,inlineClassName:"dim-configuration"});Ut=v([u(2,it),u(3,xr)],Ut);let Gt=class extends ee{constructor(e,t,i,n){super(),this.editor=e,this.instantiationService=t,this.preferencesService=i,this.workspaceContextService=n,this.disposables=this._register(new G),this._createPreferencesRenderer(),this._register(this.editor.onDidChangeModel(s=>this._createPreferencesRenderer())),this._register(this.workspaceContextService.onDidChangeWorkbenchState(()=>this._createPreferencesRenderer()))}async _createPreferencesRenderer(){var t;this.disposables.clear(),this.currentRenderer=void 0;const e=this.editor.getModel();if(e&&/\.(json|code-workspace)$/.test(e.uri.path)){const i=await this.preferencesService.createPreferencesEditorModel(e.uri);if(i instanceof gs&&this.editor.getModel())switch(this.disposables.add(i),i.configurationTarget){case 5:this.currentRenderer=this.disposables.add(this.instantiationService.createInstance(In,this.editor,i));break;default:this.currentRenderer=this.disposables.add(this.instantiationService.createInstance(Ni,this.editor,i));break}(t=this.currentRenderer)==null||t.render()}}};Gt.ID="editor.contrib.settings";Gt=v([u(1,j),u(2,F),u(3,it)],Gt);var Vd='.editor-instance#workbench\\.editor\\.settings2:focus{outline:none}.settings-editor{margin:auto;max-width:1200px;overflow:hidden}.settings-editor:focus{outline:none!important}.settings-editor>.settings-header{box-sizing:border-box;margin:11px auto auto;max-width:1200px;overflow:hidden;padding-left:24px;padding-right:24px;padding-top:3px}.settings-editor>.settings-header>.search-container{position:relative}.monaco-workbench.vs .settings-editor>.settings-header>.search-container>.suggest-input-container{border:1px solid #ddd}.settings-editor>.settings-header>.search-container>.settings-count-widget{margin:4px 0;position:absolute;right:46px;top:0}.settings-editor>.settings-header>.search-container>.settings-count-widget:empty{visibility:hidden}.settings-editor>.settings-header>.search-container>.settings-clear-widget{align-items:center;display:flex;height:100%;position:absolute;right:0;top:0;width:43px}.settings-editor>.settings-header>.search-container>.settings-clear-widget .action-label{padding:2px}.settings-editor>.settings-header>.settings-header-controls{border-bottom:1px solid;display:flex;height:32px;margin-top:10px}.settings-editor>.settings-header>.settings-header-controls .settings-target-container{flex:auto}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget .action-label{border-radius:0;color:var(--vscode-foreground);opacity:.9}.settings-editor>.settings-header>.settings-header-controls .last-synced-label{opacity:.9;padding-top:7px}.settings-editor .settings-tabs-widget>.monaco-action-bar .action-item .action-details{opacity:.9}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget .action-label:hover{opacity:1}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget .action-label.checked{color:var(--vscode-settings-headerForeground);opacity:1}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget .action-label.checked:not(:focus){border-bottom-color:var(--vscode-settings-headerForeground)}.settings-editor>.settings-header .settings-tabs-widget>.monaco-action-bar .action-item .action-label{margin-right:0}.settings-editor>.settings-header .settings-tabs-widget .monaco-action-bar .action-item .dropdown-icon{padding-top:3px}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget>.monaco-action-bar .action-item{padding:0}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget>.monaco-action-bar .action-item .action-label{font-size:13px;padding:7px 8px 6.5px;text-transform:none}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget>.monaco-action-bar .action-item .action-label .dropdown-icon{padding-top:2px}.settings-editor>.settings-header>.settings-header-controls .settings-tabs-widget>.monaco-action-bar .action-item .action-label:not(.checked):not(:focus){border-bottom:1px solid transparent}.settings-editor>.settings-body{position:relative}.settings-editor>.settings-body>.no-results-message{box-sizing:border-box;display:none;margin:20px auto auto;max-width:1200px;padding-left:24px;padding-right:24px}.settings-editor>.settings-body>.monaco-split-view2{margin-top:14px}.settings-editor>.settings-body .settings-toc-container,.settings-editor>.settings-body .settings-tree-container{height:100%}.settings-editor>.settings-body .settings-tree-container .setting-item-label,.settings-editor>.settings-body .settings-tree-container .settings-group-title-label{color:var(--vscode-settings-headerForeground)}.settings-editor>.settings-body .settings-tree-container .setting-item-extension-toggle .setting-item-extension-toggle-button{display:block;width:fit-content}.settings-editor.no-results>.settings-body .settings-toc-container,.settings-editor.no-results>.settings-body .settings-tree-container{display:none}.settings-editor.no-results>.settings-body>.no-results-message{display:block}.settings-editor>.settings-body>.no-results-message a.prominent{text-decoration:underline}.settings-editor.narrow-width>.settings-body .settings-tree-container .monaco-list-row .monaco-tl-contents,.settings-editor.no-toc-search>.settings-body .settings-tree-container .monaco-list-row .monaco-tl-contents{padding-left:33px}.settings-editor>.settings-body .settings-tree-container .monaco-list-row{outline:none!important}.settings-editor>.settings-body .settings-tree-container .monaco-list-row .monaco-tl-twistie{display:none!important}.settings-editor>.settings-body .settings-tree-container .monaco-list-row.focused .settings-row-inner-container{background-color:var(--vscode-settings-focusedRowBackground)}.settings-editor>.settings-body .settings-tree-container .monaco-list-row:not(.focused) .settings-row-inner-container:hover{background-color:var(--vscode-settings-rowHoverBackground)}.settings-editor>.settings-body .settings-tree-container .monaco-list:focus-within .monaco-list-row.focused .setting-item-contents,.settings-editor>.settings-body .settings-tree-container .monaco-list:focus-within .monaco-list-row.focused .settings-group-title-label{outline:1px solid var(--vscode-settings-focusedRowBorder)}.settings-editor>.settings-body .settings-tree-container .settings-editor-tree>.monaco-scrollable-element>.shadow.top{z-index:11}.settings-editor>.settings-body .settings-tree-container .setting-toolbar-container{bottom:0;height:22px;left:-22px;position:absolute;top:8px;width:22px}.settings-editor>.settings-body .settings-tree-container .monaco-list-row .mouseover .setting-toolbar-container>.monaco-toolbar .codicon,.settings-editor>.settings-body .settings-tree-container .monaco-list-row .setting-toolbar-container:hover>.monaco-toolbar .codicon,.settings-editor>.settings-body .settings-tree-container .monaco-list-row .setting-toolbar-container>.monaco-toolbar .active .codicon,.settings-editor>.settings-body .settings-tree-container .monaco-list-row.focused .setting-item-contents .setting-toolbar-container>.monaco-toolbar .codicon{opacity:1}.settings-editor>.settings-body .settings-tree-container .setting-toolbar-container>.monaco-toolbar .codicon{align-items:center;display:flex;justify-content:center;opacity:0}.monaco-workbench:not(.reduce-motion) .settings-editor>.settings-body .settings-tree-container .setting-toolbar-container>.monaco-toolbar .codicon{transition:opacity .3s}.settings-editor>.settings-body .settings-toc-container{pointer-events:none;position:absolute;width:100%;z-index:10}.settings-editor>.settings-body .settings-toc-container .monaco-list{pointer-events:auto}.settings-editor.narrow-width>.settings-body .settings-toc-container,.settings-editor.no-toc-search>.settings-body .settings-toc-container{display:none}.settings-editor>.settings-body .settings-toc-container .monaco-list-row:not(.selected){color:var(--vscode-foreground);opacity:.9}.settings-editor>.settings-body .settings-toc-container .monaco-list-row .monaco-tl-contents{display:flex}.settings-editor>.settings-body .settings-toc-container .monaco-list-row .settings-toc-entry{flex-shrink:1;line-height:22px;overflow:hidden;text-overflow:ellipsis}.settings-editor>.settings-body .settings-toc-container .monaco-list-row .settings-toc-count{display:none;line-height:22px;margin-left:3px;opacity:.8}.settings-editor>.settings-body .settings-toc-container .monaco-list-row.selected .settings-toc-entry{font-weight:700}.settings-editor>.settings-body .settings-tree-container{border-collapse:separate;border-spacing:0;position:relative}.settings-editor>.settings-body .settings-toc-container .monaco-scrollable-element,.settings-editor>.settings-body .settings-tree-container .monaco-scrollable-element{padding-top:0}.settings-editor>.settings-body .settings-toc-wrapper{height:100%;margin:auto;max-width:1200px;padding-left:24px}.settings-editor.narrow-width>.settings-body .settings-tree-container,.settings-editor.no-toc-search>.settings-body .settings-tree-container{margin-left:0}.settings-editor>.settings-body .settings-tree-container .monaco-list-row{cursor:default;line-height:1.4em!important;overflow:visible}.settings-editor>.settings-body .settings-tree-container .monaco-list-rows{min-height:100%;overflow:visible!important}.settings-editor>.settings-body .settings-tree-container .monaco-list-row .monaco-tl-contents{box-sizing:border-box;margin:auto;max-width:min(100%,1200px);overflow:visible;padding-left:24px;padding-right:24px}.settings-editor>.settings-body .settings-tree-container .monaco-list-row .monaco-tl-contents.group-title{max-width:min(100%,1200px)}.settings-editor>.settings-body .settings-tree-container .setting-item-contents,.settings-editor>.settings-body .settings-tree-container .settings-group-title-label{outline-offset:-1px}.settings-editor>.settings-body .settings-tree-container .setting-item-contents{padding:12px 14px 18px;position:relative;white-space:normal}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title{display:inline-block;overflow:hidden;padding-bottom:2px;text-overflow:ellipsis}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-modified-indicator{border-color:var(--vscode-settings-modifiedItemIndicator);display:none}.settings-editor>.settings-body .settings-tree-container .setting-item-contents.is-configured .setting-item-modified-indicator{border-left-style:solid;border-left-width:2px;bottom:18px;content:" ";display:block;left:5px;position:absolute;top:15px;width:6px}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-item-contents.is-configured .setting-item-modified-indicator,.settings-editor>.settings-body .settings-tree-container .setting-item-list .setting-item-contents.is-configured .setting-item-modified-indicator{bottom:23px}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title>.setting-indicators-container{font-style:italic}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title .setting-item-ignored,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title .setting-item-overrides{color:var(--vscode-foreground);opacity:.9}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title>.setting-indicators-container .setting-indicator{padding-bottom:2px}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title .codicon{padding-left:1px;vertical-align:middle}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title .setting-item-label .codicon{vertical-align:middle}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-title .setting-item-overrides a.modified-scope{cursor:pointer;text-decoration:underline}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-label{margin-right:7px}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-cat-label-container{float:left}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-category,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-label{font-weight:600;user-select:text;-webkit-user-select:text}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-category{opacity:.9}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-deprecation-message{color:var(--vscode-errorForeground);display:none;margin-top:3px;user-select:text;-webkit-user-select:text}.settings-editor>.settings-body .settings-tree-container .setting-item-contents.is-deprecated .setting-item-deprecation-message{display:flex}.settings-editor>.settings-body .settings-tree-container .setting-item-contents.is-deprecated .setting-item-deprecation-message .codicon{color:inherit;margin-right:4px}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-description{color:var(--vscode-foreground);margin-top:-1px;opacity:.9;user-select:text;-webkit-user-select:text}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-validation-message{background-color:var(--vscode-inputValidation-errorBackground);border:1px solid var(--vscode-inputValidation-errorBorder);color:var(--vscode-inputValidation-errorForeground);display:none}.settings-editor>.settings-body .settings-tree-container .setting-item .setting-item-contents.invalid-input .setting-item-validation-message{box-sizing:border-box;display:block;margin-top:-1px;padding:5px;position:absolute;z-index:1}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-item-contents.invalid-input .setting-item-validation-message{margin-top:1rem;position:static}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-text .setting-item-validation-message{width:420px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-number .setting-item-validation-message{width:200px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-number input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none!important}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-number input[type=number]{-moz-appearance:textfield!important;appearance:textfield!important}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown *{margin:0}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .edit-in-settings-button{opacity:.9}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .edit-in-settings-button,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a>code{color:var(--vscode-textLink-foreground)}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .edit-in-settings-button:focus,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a:focus{outline:1px solid -webkit-focus-ring-color;outline-color:var(--vscode-focusBorder);outline-offset:-1px;text-decoration:underline}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .edit-in-settings-button:active,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .edit-in-settings-button:hover,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a:active,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a:active>code,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a:hover,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a:hover>code{color:var(--vscode-textLink-activeForeground)}.settings-editor>.settings-body .settings-tree-container .edit-in-settings-button:hover,.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown a:hover{cursor:pointer;text-decoration:underline}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown code{color:var(--vscode-textPreformat-foreground);font-family:var(--monaco-monospace-font);line-height:15px}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-markdown .monaco-tokenized-source{font-family:var(--monaco-monospace-font);white-space:pre}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-enumDescription{display:block}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-item-contents,.settings-editor>.settings-body .settings-tree-container .setting-item-list .setting-item-contents{padding-bottom:26px}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-item-value-description{cursor:pointer;display:flex}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-value-checkbox{border:1px solid transparent;border-radius:3px;height:18px;margin-left:0;margin-right:9px;padding:0;width:18px}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-value-checkbox.codicon:not(.checked):before{opacity:0}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .setting-item-value{display:flex;margin-top:9px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-number .setting-item-value>.setting-item-control{min-width:200px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-text .setting-item-control{width:420px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-enum .setting-item-value>.setting-item-control,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-text .setting-item-value>.setting-item-control{min-width:auto}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-enum .setting-item-value>.setting-item-control>select{width:320px}.settings-editor>.settings-body .settings-tree-container .setting-item-contents .monaco-select-box{font:inherit;height:26px;padding:2px 6px;width:auto}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown code{color:var(--vscode-textPreformat-foreground)}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a,.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a>code{color:var(--vscode-textLink-foreground)}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:active,.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:active>code,.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:hover,.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:hover>code{color:var(--vscode-textLink-activeForeground)}.settings-editor>.settings-body .settings-tree-container .setting-item-new-extensions{display:flex}.settings-editor>.settings-body .settings-tree-container .setting-item-new-extensions .settings-new-extensions-button{margin:auto auto 15px;padding:4px 10px;width:auto}.settings-editor>.settings-body .settings-tree-container .group-title{cursor:default}.settings-editor>.settings-body .settings-tree-container .settings-group-title-label{box-sizing:border-box;display:inline-block;font-weight:600;height:100%;margin:0;overflow:hidden;padding:10px 10px 10px 15px;position:relative;text-overflow:ellipsis;width:100%}.settings-editor>.settings-body .settings-tree-container .settings-group-title-label.settings-group-level-1{font-size:26px}.settings-editor>.settings-body .settings-tree-container .settings-group-title-label.settings-group-level-2{font-size:22px}.settings-editor>.settings-body .settings-tree-container .settings-group-title-label.settings-group-level-3{font-size:18px}.settings-editor.search-mode>.settings-body .settings-toc-container .monaco-list-row .settings-toc-count{display:block}.settings-editor>.settings-body .settings-tree-container .setting-list-widget .setting-list-object-list-row.select-container{width:320px}.settings-editor>.settings-body .settings-tree-container .setting-list-widget .setting-list-object-list-row.select-container>select{width:inherit}.settings-editor>.settings-body .settings-toc-container .monaco-list-row.focused .codicon,.settings-editor>.settings-body .settings-tree-container .monaco-list-row.focused .setting-item-contents .codicon,.settings-editor>.settings-body .settings-tree-container .setting-item-bool .codicon{color:inherit!important}';St(Vd,{});const Ud=["files.autoSave","editor.fontSize","editor.fontFamily","editor.tabSize","editor.renderWhitespace","editor.cursorStyle","editor.multiCursorModifier","editor.insertSpaces","editor.wordWrap","files.exclude","files.associations","workbench.editor.enablePreview"];async function Gd(a,e,t){const i=await kr(a,e,t);return{id:"commonlyUsed",label:l("commonlyUsed","Commonly Used"),settings:i?i.commonlyUsed:Ud}}const fo={id:"root",label:"root",children:[{id:"editor",label:l("textEditor","Text Editor"),settings:["editor.*"],children:[{id:"editor/cursor",label:l("cursor","Cursor"),settings:["editor.cursor*"]},{id:"editor/find",label:l("find","Find"),settings:["editor.find.*"]},{id:"editor/font",label:l("font","Font"),settings:["editor.font*"]},{id:"editor/format",label:l("formatting","Formatting"),settings:["editor.format*"]},{id:"editor/diffEditor",label:l("diffEditor","Diff Editor"),settings:["diffEditor.*"]},{id:"editor/minimap",label:l("minimap","Minimap"),settings:["editor.minimap.*"]},{id:"editor/suggestions",label:l("suggestions","Suggestions"),settings:["editor.*suggest*"]},{id:"editor/files",label:l("files","Files"),settings:["files.*"]}]},{id:"workbench",label:l("workbench","Workbench"),settings:["workbench.*"],children:[{id:"workbench/appearance",label:l("appearance","Appearance"),settings:["workbench.activityBar.*","workbench.*color*","workbench.fontAliasing","workbench.iconTheme","workbench.sidebar.location","workbench.*.visible","workbench.tips.enabled","workbench.tree.*","workbench.view.*"]},{id:"workbench/breadcrumbs",label:l("breadcrumbs","Breadcrumbs"),settings:["breadcrumbs.*"]},{id:"workbench/editor",label:l("editorManagement","Editor Management"),settings:["workbench.editor.*"]},{id:"workbench/settings",label:l("settings","Settings Editor"),settings:["workbench.settings.*"]},{id:"workbench/zenmode",label:l("zenMode","Zen Mode"),settings:["zenmode.*"]},{id:"workbench/screencastmode",label:l("screencastMode","Screencast Mode"),settings:["screencastMode.*"]}]},{id:"window",label:l("window","Window"),settings:["window.*"],children:[{id:"window/newWindow",label:l("newWindow","New Window"),settings:["window.*newwindow*"]}]},{id:"features",label:l("features","Features"),children:[{id:"features/accessibility",label:l("accessibility","Accessibility"),settings:["accessibility.*"]},{id:"features/explorer",label:l("fileExplorer","Explorer"),settings:["explorer.*","outline.*"]},{id:"features/search",label:l("search","Search"),settings:["search.*"]},{id:"features/debug",label:l("debug","Debug"),settings:["debug.*","launch"]},{id:"features/testing",label:l("testing","Testing"),settings:["testing.*"]},{id:"features/scm",label:l("scm","Source Control"),settings:["scm.*"]},{id:"features/extensions",label:l("extensions","Extensions"),settings:["extensions.*"]},{id:"features/terminal",label:l("terminal","Terminal"),settings:["terminal.*"]},{id:"features/task",label:l("task","Task"),settings:["task.*"]},{id:"features/problems",label:l("problems","Problems"),settings:["problems.*"]},{id:"features/output",label:l("output","Output"),settings:["output.*"]},{id:"features/comments",label:l("comments","Comments"),settings:["comments.*"]},{id:"features/remote",label:l("remote","Remote"),settings:["remote.*"]},{id:"features/timeline",label:l("timeline","Timeline"),settings:["timeline.*"]},{id:"features/notebook",label:l("notebook","Notebook"),settings:["notebook.*","interactiveWindow.*"]},{id:"features/audioCues",label:l("audioCues","Audio Cues"),settings:["audioCues.*"]},{id:"features/mergeEditor",label:l("mergeEditor","Merge Editor"),settings:["mergeEditor.*"]},{id:"features/chat",label:l("interactiveSession","Interactive Session"),settings:["chat.*","interactiveEditor.*"]}]},{id:"application",label:l("application","Application"),children:[{id:"application/http",label:l("proxy","Proxy"),settings:["http.*"]},{id:"application/keyboard",label:l("keyboard","Keyboard"),settings:["keyboard.*"]},{id:"application/update",label:l("update","Update"),settings:["update.*"]},{id:"application/telemetry",label:l("telemetry","Telemetry"),settings:["telemetry.*"]},{id:"application/settingsSync",label:l("settingsSync","Settings Sync"),settings:["settingsSync.*"]},{id:"application/experimental",label:l("experimental","Experimental"),settings:["application.experimental.*"]},{id:"application/other",label:l("other","Other"),settings:["application.*"]}]},{id:"security",label:l("security","Security"),settings:nr?["security.*"]:void 0,children:[{id:"security/workspace",label:l("workspace","Workspace"),settings:["security.workspace.*"]}]}]},mo=new Set;["css","html","scss","less","json","js","ts","ie","id","php","scm"].forEach(a=>mo.add(a));const Zt=new Map;Zt.set("power shell","PowerShell");Zt.set("powershell","PowerShell");Zt.set("javascript","JavaScript");Zt.set("typescript","TypeScript");class hs extends ee{constructor(e){super(),this._tabbable=!1,this._onDidChangeTabbable=new I,this.onDidChangeTabbable=this._onDidChangeTabbable.event,this.id=e}get tabbable(){return this._tabbable}set tabbable(e){this._tabbable=e,this._onDidChangeTabbable.fire()}}class Q extends hs{get children(){return this._children}set children(e){this._children=e,this._childSettingKeys=new Set,this._children.forEach(t=>{t instanceof Z&&this._childSettingKeys.add(t.setting.key)})}constructor(e,t,i,n,s){super(e),this._childSettingKeys=new Set,this._children=[],this.count=t,this.label=i,this.level=n,this.isFirstGroup=s}containsSetting(e){return this._childSettingKeys.has(e)}}class ps extends hs{constructor(e,t){super(e),this.extensionIds=t}}class Z extends hs{constructor(e,t,i,n,s,r){super(Hd(t.id+"_"+e.key)),this.languageService=s,this.productService=r,this._displayCategory=null,this._displayLabel=null,this.isConfigured=!1,this.isUntrusted=!1,this.hasPolicyValue=!1,this.overriddenScopeList=[],this.overriddenDefaultsLanguageList=[],this.languageOverrideValues=new Map,this.setting=e,this.parent=t,this.update(i,n)}get displayCategory(){return this._displayCategory||this.initLabels(),this._displayCategory}get displayLabel(){return this._displayLabel||this.initLabels(),this._displayLabel}initLabels(){if(this.setting.title){this._displayLabel=this.setting.title,this._displayCategory="";return}const e=bo(this.setting.key,this.parent.id,this.setting.isLanguageTagSetting);this._displayLabel=e.label,this._displayCategory=e.category}update(e,t){var h,f,m,p,y,x,E;let{isConfigured:i,inspected:n,targetSelector:s,inspectedLanguageOverrides:r,languageSelector:o}=e;switch(s){case"workspaceFolderValue":case"workspaceValue":this.isUntrusted=!!this.setting.restricted&&!t;break}let c=i?n[s]:n.defaultValue;const d=[],g=[];if((o||s!=="workspaceValue")&&typeof n.workspaceValue<"u"&&d.push("workspace:"),(o||s!=="userRemoteValue")&&typeof n.userRemoteValue<"u"&&d.push("remote:"),(o||s!=="userLocalValue")&&typeof n.userLocalValue<"u"&&d.push("user:"),n.overrideIdentifiers)for(const S of n.overrideIdentifiers){const R=r.get(S);R&&(this.languageService.isRegisteredLanguageId(S)&&(o!==S&&typeof((h=R.default)==null?void 0:h.override)<"u"&&g.push(S),(o!==S||s!=="workspaceValue")&&typeof((f=R.workspace)==null?void 0:f.override)<"u"&&d.push(`workspace:${S}`),(o!==S||s!=="userRemoteValue")&&typeof((m=R.userRemote)==null?void 0:m.override)<"u"&&d.push(`remote:${S}`),(o!==S||s!=="userLocalValue")&&typeof((p=R.userLocal)==null?void 0:p.override)<"u"&&d.push(`user:${S}`)),this.languageOverrideValues.set(S,R))}if(this.overriddenScopeList=d,this.overriddenDefaultsLanguageList=g,this.defaultValueSource=this.setting.nonLanguageSpecificDefaultValueSource,n.policyValue)this.hasPolicyValue=!0,i=!1,c=n.policyValue,this.scopeValue=n.policyValue,this.defaultValue=n.defaultValue;else if(o&&this.languageOverrideValues.has(o)){const S=this.languageOverrideValues.get(o);c=(i?S[s]:S.defaultValue)??c,this.scopeValue=i&&S[s],this.defaultValue=S.defaultValue??n.defaultValue;const T=(x=(y=ge.as(Ie.Configuration).getConfigurationDefaultsOverrides().get(`[${o}]`))==null?void 0:y.valuesSources)==null?void 0:x.get(this.setting.key);T&&(this.defaultValueSource=T)}else this.scopeValue=i&&n[s],this.defaultValue=n.defaultValue;if(this.value=c,this.isConfigured=i,(i||this.setting.tags||this.tags||this.setting.restricted||this.hasPolicyValue)&&(this.tags=new Set,i&&this.tags.add(tt),(E=this.setting.tags)==null||E.forEach(S=>this.tags.add(S)),this.setting.restricted&&this.tags.add(Ir),this.hasPolicyValue&&this.tags.add(ht)),this.setting.description.length>Z.MAX_DESC_LINES){const S=this.setting.description.slice(0,Z.MAX_DESC_LINES);S.push("[...]"),this.description=S.join(`
`)}else this.description=this.setting.description.join(`
`);zd(this.setting,this.productService)?this.valueType=w.ExtensionToggle:this.setting.enum&&(!this.setting.type||Qd(this.setting.type))?this.valueType=w.Enum:this.setting.type==="string"?this.setting.editPresentation===oc.Multiline?this.valueType=w.MultilineString:this.valueType=w.String:qd(this.setting)?this.valueType=w.Exclude:Jd(this.setting)?this.valueType=w.Include:this.setting.type==="integer"?this.valueType=w.Integer:this.setting.type==="number"?this.valueType=w.Number:this.setting.type==="boolean"?this.valueType=w.Boolean:this.setting.type==="array"&&this.setting.arrayItemType&&["string","enum","number","integer"].includes(this.setting.arrayItemType)?this.valueType=w.Array:Array.isArray(this.setting.type)&&this.setting.type.includes(w.Null)&&this.setting.type.length===2?this.setting.type.includes(w.Integer)?this.valueType=w.NullableInteger:this.setting.type.includes(w.Number)?this.valueType=w.NullableNumber:this.valueType=w.Complex:Xd(this.setting)?this.setting.allKeysAreBoolean?this.valueType=w.BooleanObject:this.valueType=w.Object:this.setting.isLanguageTagSetting?this.valueType=w.LanguageTag:this.valueType=w.Complex}matchesAllTags(e){if(!e||!e.size)return!0;if(this.tags){let t=!0;return e.forEach(i=>{t=t&&this.tags.has(i)}),t}else return!1}matchesScope(e,t){const i=Y.isUri(e)?6:e;return this.setting.scope?i===1?nd.includes(this.setting.scope):i===6?Jr.includes(this.setting.scope):i===5?Yr.includes(this.setting.scope):i===4?sd.includes(this.setting.scope):i===3&&t?rd.includes(this.setting.scope):!0:!0}matchesAnyExtension(e){return!e||!e.size?!0:this.setting.extensionInfo?Array.from(e).some(t=>t.toLowerCase()===this.setting.extensionInfo.id.toLowerCase()):!1}matchesAnyFeature(e){if(!e||!e.size)return!0;const t=fo.children.find(i=>i.id==="features");return Array.from(e).some(i=>{var n;if(t&&t.children){const s=t.children.find(r=>"features/"+i===r.id);if(s){const r=(n=s.settings)==null?void 0:n.map(o=>jd(o));return r&&!this.setting.extensionInfo&&r.some(o=>o.test(this.setting.key.toLowerCase()))}else return!1}else return!1})}matchesAnyId(e){return!e||!e.size?!0:e.has(this.setting.key)}matchesAllLanguages(e){return e?this.languageService.isRegisteredLanguageId(e)?this.setting.scope===5:!1:!0}}Z.MAX_DESC_LINES=20;function jd(a){return a=Yn(a).replace(/\\\*/g,".*"),new RegExp(`^${a}$`,"i")}let Wi=class{constructor(e,t,i,n,s,r){this._viewState=e,this._isWorkspaceTrusted=t,this._configurationService=i,this._languageService=n,this._userDataProfileService=s,this._productService=r,this._treeElementsBySettingName=new Map}get root(){return this._root}update(e=this._tocRoot){this._treeElementsBySettingName.clear();const t=this.createSettingsTreeGroupElement(e);t.children[0]instanceof Q&&(t.children[0].isFirstGroup=!0),this._root?(this.disposeChildren(this._root.children),this._root.children=t.children):this._root=t}updateWorkspaceTrust(e){this._isWorkspaceTrusted=e,this.updateRequireTrustedTargetElements()}disposeChildren(e){for(const t of e)this.recursiveDispose(t)}recursiveDispose(e){e instanceof Q&&this.disposeChildren(e.children),e.dispose()}getElementsByName(e){return yi(this._treeElementsBySettingName.get(e))}updateElementsByName(e){this._treeElementsBySettingName.has(e)&&this.updateSettings(this._treeElementsBySettingName.get(e))}updateRequireTrustedTargetElements(){this.updateSettings([...this._treeElementsBySettingName.values()].flat().filter(e=>e.isUntrusted))}getTargetToInspect(e){return!this._userDataProfileService.currentProfile.isDefault&&e===1?1:this._viewState.settingsTarget}updateSettings(e){for(const t of e){const i=this.getTargetToInspect(t.setting.scope),n=Rn(t.setting.key,i,this._viewState.languageFilter,this._configurationService);t.update(n,this._isWorkspaceTrusted)}}createSettingsTreeGroupElement(e,t){const i=t?this.getDepth(t)+1:0,n=new Q(e.id,void 0,e.label,i,!1);n.parent=t;const s=[];if(e.settings){const r=e.settings.map(o=>this.createSettingsTreeSettingElement(o,n)).filter(o=>o.setting.deprecationMessage?o.isConfigured:!0);s.push(...r)}if(e.children){const r=e.children.map(o=>this.createSettingsTreeGroupElement(o,n));s.push(...r)}return n.children=s,n}getDepth(e){return e.parent?1+this.getDepth(e.parent):0}createSettingsTreeSettingElement(e,t){const i=this.getTargetToInspect(e.scope),n=Rn(e.key,i,this._viewState.languageFilter,this._configurationService),s=new Z(e,t,n,this._isWorkspaceTrusted,this._languageService,this._productService),r=this._treeElementsBySettingName.get(e.key)||[];return r.push(s),this._treeElementsBySettingName.set(e.key,r),s}};Wi=v([u(2,ds),u(3,Pe),u(4,yt),u(5,Yt)],Wi);function Rn(a,e,t,i){var h;const n=Y.isUri(e)?{resource:e}:void 0,s=i.inspect(a,n),r=e===1?"applicationValue":e===3?"userLocalValue":e===4?"userRemoteValue":e===5?"workspaceValue":"workspaceFolderValue",o=e===1?"application":e===3?"userLocal":e===4?"userRemote":e===5?"workspace":"workspaceFolder";let c=typeof s[r]<"u";const d=s.overrideIdentifiers,g=new Map;if(t&&(c=!1),d){for(const f of d)g.set(f,i.inspect(a,{overrideIdentifier:f}));t&&g.has(t)&&typeof((h=g.get(t)[o])==null?void 0:h.override)<"u"&&(c=!0)}return{isConfigured:c,inspected:s,targetSelector:r,inspectedLanguageOverrides:g,languageSelector:t}}function Hd(a){return a.replace(/[\.\/]/,"_")}function bo(a,e="",t=!1){const i=a.lastIndexOf(".");let n="";i>=0&&(n=a.substring(0,i),a=a.substring(i+1)),e=e.replace(/\//g,"."),n=$d(n,e),n=Os(n),t&&(a=a.replace(/[\[\]]/g,""),a="$(bracket) "+a);const s=Os(a);return{category:n,label:s}}function Os(a){a=a.replace(/\.([a-z0-9])/g,(e,t)=>`  ${t.toUpperCase()}`).replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/^[a-z]/g,e=>e.toUpperCase()).replace(/\b\w+\b/g,e=>mo.has(e.toLowerCase())?e.toUpperCase():e);for(const[e,t]of Zt)a=a.replace(new RegExp(`\\b${e}\\b`,"gi"),t);return a}function $d(a,e){const t=n=>{/insiders$/i.test(a)||(e=e.replace(/-?insiders$/i,""));const s=e.split(".").map(r=>r.replace(/-/g,"").toLowerCase()===a.toLowerCase()?r.replace(/-/g,""):r);for(;s.length;){const r=new RegExp(`^${s.join("\\.")}(\\.|$)`,"i");if(r.test(a))return a.replace(r,"");n?s.pop():s.shift()}return null};let i=t(!0);return i===null&&(i=t(!1)),i===null&&(i=a),i}function zd(a,e){return!!e.extensionRecommendations&&!!a.displayExtensionId}function qd(a){return a.key==="files.exclude"||a.key==="search.exclude"||a.key==="workbench.localHistory.exclude"||a.key==="explorer.autoRevealExclude"||a.key==="files.readonlyExclude"||a.key==="files.watcherExclude"}function Jd(a){return a.key==="files.readonlyInclude"}function Yd({type:a}){return a==="string"||a==="boolean"||a==="integer"||a==="number"}function Xd({type:a,objectProperties:e,objectPatternProperties:t,objectAdditionalProperties:i}){if(a!=="object"||pe(e)&&pe(t)&&pe(i)||(i===!0||i===void 0)&&!Object.keys(t??{}).includes(".*"))return!1;const n=[...Object.values(e??{}),...Object.values(t??{})];return i&&typeof i=="object"&&n.push(i),$s(n.map(r=>Array.isArray(r.anyOf)?r.anyOf:[r])).every(Yd)}function Qd(a){const e=["string","boolean","null","integer","number"];return(Array.isArray(a)?a:[a]).every(i=>e.includes(i))}let Pi=class extends Wi{constructor(e,t,i,n,s,r,o){super(e,t,i,s,r,o),this.environmentService=n,this.rawSearchResults=null,this.cachedUniqueSearchResults=null,this.newExtensionSearchResults=null,this.searchResultCount=null,this.id="searchResultModel",this.update({id:"searchResultModel",label:""})}getUniqueResults(){if(this.cachedUniqueSearchResults)return this.cachedUniqueSearchResults;if(!this.rawSearchResults)return[];const e=new Set,t=this.rawSearchResults[0];t==null||t.filterMatches.forEach(n=>e.add(n.setting.key));const i=this.rawSearchResults[1];return i&&(i.filterMatches=i.filterMatches.filter(n=>!e.has(n.setting.key))),i&&(this.newExtensionSearchResults=this.rawSearchResults[2]),this.cachedUniqueSearchResults=[t,i],this.cachedUniqueSearchResults}getRawResults(){return this.rawSearchResults||[]}setResult(e,t){if(this.cachedUniqueSearchResults=null,this.newExtensionSearchResults=null,this.rawSearchResults=this.rawSearchResults||[],!t){delete this.rawSearchResults[e];return}t.exactMatch&&(this.rawSearchResults=[]),this.rawSearchResults[e]=t,this.updateChildren()}updateChildren(){var t;this.update({id:"searchResultModel",label:"searchResultModel",settings:this.getFlatSettings()});const e=!!this.environmentService.remoteAuthority;if(this.root.children=this.root.children.filter(i=>i instanceof Z&&i.matchesAllTags(this._viewState.tagFilters)&&i.matchesScope(this._viewState.settingsTarget,e)&&i.matchesAnyExtension(this._viewState.extensionFilters)&&i.matchesAnyId(this._viewState.idFilters)&&i.matchesAnyFeature(this._viewState.featureFilters)&&i.matchesAllLanguages(this._viewState.languageFilter)),this.searchResultCount=this.root.children.length,(t=this.newExtensionSearchResults)!=null&&t.filterMatches.length){let i=this.newExtensionSearchResults.filterMatches.map(n=>n.setting).filter(n=>n.extensionName&&n.extensionPublisher).map(n=>`${n.extensionPublisher}.${n.extensionName}`);if(i=Gi(i),i.length){const n=new ps("newExtensions",i);n.parent=this._root,this._root.children.push(n)}}}getUniqueResultsCount(){return this.searchResultCount??0}getFlatSettings(){const e=[];return Hn(this.getUniqueResults()).forEach(t=>{e.push(...t.filterMatches.map(i=>i.setting))}),e}};Pi=v([u(2,ds),u(3,wt),u(4,Pe),u(5,yt),u(6,Yt)],Pi);const Zd=/(^|\s)@tag:("([^"]*)"|[^"]\S*)/g,el=/(^|\s)@ext:("([^"]*)"|[^"]\S*)?/g,tl=/(^|\s)@feature:("([^"]*)"|[^"]\S*)?/g,il=/(^|\s)@id:("([^"]*)"|[^"]\S*)?/g,nl=/(^|\s)@lang:("([^"]*)"|[^"]\S*)?/g;function fi(a){function e(o,c,d){return o.replace(c,(g,h,f,m)=>{const p=m||f;return p&&d.push(...p.split(",").map(y=>y.trim()).filter(y=>!ac(y))),""})}const t=[];a=a.replace(Zd,(o,c,d,g)=>(t.push(g||d),"")),a=a.replace(`@${tt}`,()=>(t.push(tt),"")),a=a.replace(`@${ht}`,()=>(t.push(ht),""));const i=[],n=[],s=[],r=[];return a=e(a,el,i),a=e(a,tl,n),a=e(a,il,s),a=e(a,nl,r),a=a.trim(),{tags:t,extensionFilters:i,featureFilters:n,idFilters:s,languageFilter:r.length?r[0]:void 0,query:a}}var sl=".settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-item-value>.setting-item-control{width:100%}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-key,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-value{margin-left:2px;margin-right:3px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-key,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-value,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-sibling,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-value{overflow:hidden;text-overflow:ellipsis;white-space:pre}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-value-checkbox{background-color:var(--vscode-settings-checkboxBackground)!important;border-color:var(--vscode-settings-checkboxBorder)!important;color:var(--vscode-settings-checkboxForeground)!important}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-list-object-input-key-checkbox{height:24px;margin-left:4px}.settings-editor>.settings-body .settings-tree-container .setting-item-bool .setting-list-object-input-key-checkbox .setting-value-checkbox{margin-top:3px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-item-bool .setting-list-object-value{cursor:pointer;width:100%}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-key{margin-left:4px;width:40%}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-input-key{margin-left:0;min-width:40%}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-input-value,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-value{width:100%}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-row .setting-list-object-value,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-value{box-sizing:border-box;padding-right:40px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-value{width:60%}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-key,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-value,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-sibling,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-value{display:inline-block;line-height:24px;min-height:24px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-include-exclude-widget .setting-list-sibling,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-include-exclude-widget .setting-list-value{font-family:var(--monaco-monospace-font)}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-sibling{font-size:.9em;margin-left:.5em;opacity:.7;white-space:pre}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row .monaco-action-bar{display:none;position:absolute;right:0;top:0}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row{display:flex}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row:hover{background-color:var(--vscode-list-hoverBackground);color:var(--vscode-list-hoverForeground)}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row.selected:focus{background-color:var(--vscode-list-activeSelectionBackground);color:var(--vscode-list-activeSelectionForeground)}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row.selected:not(:focus){background-color:var(--vscode-list-inactiveSelectionBackground);color:var(--vscode-list-inactiveSelectionForeground)}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row.draggable{cursor:pointer;user-select:none}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row.drag-hover{background-color:var(--vscode-list-dropBackground)}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row.drag-hover *{pointer-events:none}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row-header{max-height:24px;position:relative}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row-header{font-weight:700}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-row,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-row-header{display:flex;padding-right:4px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-edit-row.setting-list-object-row:nth-child(odd):hover,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-row:nth-child(odd):not(:hover):not(:focus):not(.selected),.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-row-header{background-color:hsla(0,0%,51%,.04)}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row.selected .monaco-action-bar,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row:hover .monaco-action-bar{display:block}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row .monaco-action-bar .action-label{align-items:center;color:inherit;display:flex;height:20px;justify-content:center;margin-right:2px;padding:2px;width:16px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row .monaco-action-bar .setting-listAction-edit{margin-right:4px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .monaco-text-button{padding:2px 14px;white-space:nowrap;width:auto}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-item-control.setting-list-hide-add-button .setting-list-new-row{display:none}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .monaco-text-button.setting-list-addButton{display:inline-block;margin-right:4px;margin-top:4px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-edit-row,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-row{display:flex}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-input,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-siblingInput,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-valueInput{height:24px;margin-right:4px;max-width:320px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-input,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-valueInput.no-sibling{max-width:unset}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-valueInput.no-sibling{width:100%}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-value-container .setting-list-object-input{margin-right:0}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-ok-button{margin:0 4px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-include-exclude-widget,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-widget{margin-bottom:1px;padding:1px}.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-input select,.settings-editor>.settings-body .settings-tree-container .setting-item.setting-item-list .setting-list-object-widget .setting-list-object-value-container{height:24px;width:100%}.settings-editor>.settings-body .settings-tree-container .setting-list-widget .setting-list-object-list-row.select-container{width:320px}.settings-editor>.settings-body .settings-tree-container .setting-list-widget .setting-list-object-list-row.select-container>select{width:inherit}";St(sl,{});const U=P;class rl{get items(){const e=this._dataItems.map((t,i)=>{const n=typeof this._editKey=="number"&&this._editKey===i;return{...t,editing:n,selected:i===this._selectedIdx||n}});return this._editKey==="create"&&e.push({editing:!0,selected:!0,...this._newDataItem}),e}constructor(e){this._dataItems=[],this._editKey=null,this._selectedIdx=null,this._newDataItem=e}setEditKey(e){this._editKey=e}setValue(e){this._dataItems=e}select(e){this._selectedIdx=e}getSelected(){return this._selectedIdx}selectNext(){typeof this._selectedIdx=="number"?this._selectedIdx=Math.min(this._selectedIdx+1,this._dataItems.length-1):this._selectedIdx=0}selectPrevious(){typeof this._selectedIdx=="number"?this._selectedIdx=Math.max(this._selectedIdx-1,0):this._selectedIdx=0}}let jt=class extends ee{get domNode(){return this.listElement}get items(){return this.model.items}get inReadMode(){return this.model.items.every(e=>!e.editing)}constructor(e,t,i){super(),this.container=e,this.themeService=t,this.contextViewService=i,this.rowElements=[],this._onDidChangeList=this._register(new I),this.model=new rl(this.getEmptyItem()),this.listDisposables=this._register(new G),this.onDidChangeList=this._onDidChangeList.event,this.listElement=b(e,U("div")),this.listElement.setAttribute("role","list"),this.getContainerClasses().forEach(n=>this.listElement.classList.add(n)),b(e,this.renderAddButton()),this.renderList(),this._register(D(this.listElement,_.POINTER_DOWN,n=>this.onListClick(n))),this._register(D(this.listElement,_.DBLCLICK,n=>this.onListDoubleClick(n))),this._register(pt(this.listElement,"keydown",n=>{if(n.equals(16))this.selectPreviousRow();else if(n.equals(18))this.selectNextRow();else return;n.preventDefault(),n.stopPropagation()}))}setValue(e){this.model.setValue(e),this.renderList()}renderHeader(){}isAddButtonVisible(){return!0}renderList(){const e=_r(document.activeElement,this.listElement);Ae(this.listElement),this.listDisposables.clear();const t=this.model.items.some(r=>!!(r.editing&&this.isItemNew(r)));this.container.classList.toggle("setting-list-hide-add-button",!this.isAddButtonVisible()||t),this.model.items.length?this.listElement.tabIndex=0:this.listElement.removeAttribute("tabIndex");const i=this.renderHeader(),n=24;let s=n*this.model.items.length;i&&(s+=n,this.listElement.appendChild(i)),this.rowElements=this.model.items.map((r,o)=>this.renderDataOrEditItem(r,o,e)),this.rowElements.forEach(r=>this.listElement.appendChild(r)),this.listElement.style.height=s+"px"}createBasicSelectBox(e){const t=e.options.map(({value:r,description:o})=>({text:r,description:o})),i=e.options.findIndex(r=>e.data===r.value),n=Dr({selectBackground:oo,selectForeground:ao,selectBorder:co,selectListBorder:lo});return new Lr(t,i,this.contextViewService,n,{useCustomDrawn:!(et&&Mr.pointerEvents)})}editSetting(e){this.model.setEditKey(e),this.renderList()}cancelEdit(){this.model.setEditKey("none"),this.renderList()}handleItemChange(e,t,i){this.model.setEditKey("none"),this._onDidChangeList.fire({originalItem:e,item:t,targetIndex:i}),this.renderList()}renderDataOrEditItem(e,t,i){const n=e.editing?this.renderEdit(e,t):this.renderDataItem(e,t,i);return n.setAttribute("role","listitem"),n}renderDataItem(e,t,i){const n=this.renderItem(e,t),s=n.rowElement;s.setAttribute("data-index",t+""),s.setAttribute("tabindex",e.selected?"0":"-1"),s.classList.toggle("selected",e.selected);const r=new $i(s);return this.listDisposables.add(r),r.push(this.getActionsForItem(e,t),{icon:!0,label:!0}),this.addTooltipsToRow(n,e),e.selected&&i&&this.listDisposables.add(cs(()=>s.focus())),this.listDisposables.add(D(s,"click",o=>{o.stopPropagation()})),s}renderAddButton(){const e=U(".setting-list-new-row"),t=this._register(new He(e,$e));return t.label=this.getLocalizedStrings().addButtonLabel,t.element.classList.add("setting-list-addButton"),this._register(t.onDidClick(()=>{this.model.setEditKey("create"),this.renderList()})),e}onListClick(e){const t=this.getClickedItemIndex(e);t<0||(e.preventDefault(),e.stopImmediatePropagation(),this.model.getSelected()!==t&&this.selectRow(t))}onListDoubleClick(e){const t=this.getClickedItemIndex(e);if(t<0)return;this.model.items[t]&&(this.editSetting(t),e.preventDefault(),e.stopPropagation())}getClickedItemIndex(e){if(!e.target||Ii(e.target,"monaco-action-bar"))return-1;const i=Ii(e.target,"setting-list-row");if(!i)return-1;const n=i.getAttribute("data-index");return n?parseInt(n):-1}selectRow(e){this.model.select(e),this.rowElements.forEach(i=>i.classList.remove("selected"));const t=this.rowElements[this.model.getSelected()];t.classList.add("selected"),t.focus()}selectNextRow(){this.model.selectNext(),this.selectRow(this.model.getSelected())}selectPreviousRow(){this.model.selectPrevious(),this.selectRow(this.model.getSelected())}};jt=v([u(1,zi),u(2,Xt)],jt);class fs extends jt{constructor(){super(...arguments),this.showAddButton=!0}setValue(e,t){this.keyValueSuggester=t==null?void 0:t.keySuggester,this.showAddButton=(t==null?void 0:t.showAddButton)??!0,super.setValue(e)}getEmptyItem(){return{value:{type:"string",data:""}}}isAddButtonVisible(){return this.showAddButton}getContainerClasses(){return["setting-list-widget"]}getActionsForItem(e,t){return[{class:oe.asClassName(Ji),enabled:!0,id:"workbench.action.editListItem",tooltip:this.getLocalizedStrings().editActionTooltip,run:()=>this.editSetting(t)},{class:oe.asClassName(no),enabled:!0,id:"workbench.action.removeListItem",tooltip:this.getLocalizedStrings().deleteActionTooltip,run:()=>this._onDidChangeList.fire({originalItem:e,item:void 0,targetIndex:t})}]}getDragImage(e){const t=U(".monaco-drag-image");return t.textContent=e.value.data,t}renderItem(e,t){const i=U(".setting-list-row"),n=b(i,U(".setting-list-value")),s=b(i,U(".setting-list-sibling"));return n.textContent=e.value.data.toString(),s.textContent=e.sibling?`when: ${e.sibling}`:null,this.addDragAndDrop(i,e,t),{rowElement:i,keyElement:n,valueElement:s}}addDragAndDrop(e,t,i){this.inReadMode?(e.draggable=!0,e.classList.add("draggable")):(e.draggable=!1,e.classList.remove("draggable")),this.listDisposables.add(D(e,_.DRAG_START,s=>{if(this.dragDetails={element:e,item:t,itemIndex:i},s.dataTransfer){s.dataTransfer.dropEffect="move";const r=this.getDragImage(t);document.body.appendChild(r),s.dataTransfer.setDragImage(r,-10,-10),setTimeout(()=>document.body.removeChild(r),0)}})),this.listDisposables.add(D(e,_.DRAG_OVER,s=>this.dragDetails?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="move"),!0):!1));let n=0;this.listDisposables.add(D(e,_.DRAG_ENTER,s=>{n++,e.classList.add("drag-hover")})),this.listDisposables.add(D(e,_.DRAG_LEAVE,s=>{n--,n||e.classList.remove("drag-hover")})),this.listDisposables.add(D(e,_.DROP,s=>this.dragDetails?(s.preventDefault(),n=0,this.dragDetails.element!==e&&this._onDidChangeList.fire({originalItem:this.dragDetails.item,sourceIndex:this.dragDetails.itemIndex,item:t,targetIndex:i}),!0):!1)),this.listDisposables.add(D(e,_.DRAG_END,s=>{var r;n=0,e.classList.remove("drag-hover"),(r=s.dataTransfer)==null||r.clearData(),this.dragDetails&&(this.dragDetails=void 0)}))}renderEdit(e,t){const i=U(".setting-list-edit-row");let n,s,r;if(this.keyValueSuggester){const m=this.keyValueSuggester(this.model.items.map(({value:{data:p}})=>p),t);e={...e,value:{type:"enum",data:e.value.data,options:m?m.options:[]}}}switch(e.value.type){case"string":n=this.renderInputBox(e.value,i);break;case"enum":n=this.renderDropdown(e.value,i),r=e.value.options,e.value.options.length&&(s=this.isItemNew(e)?r[0].value:e.value.data);break}const o=()=>({value:{type:"string",data:n.value},sibling:g==null?void 0:g.value}),c=m=>({value:{type:"enum",data:m,options:r??[]}}),d=m=>{m.equals(3)?this.handleItemChange(e,o(),t):m.equals(9)&&(this.cancelEdit(),m.preventDefault()),i==null||i.focus()};if(e.value.type!=="string"){const m=n;this.listDisposables.add(m.onDidSelect(({selected:p})=>{s=p}))}else{const m=n;this.listDisposables.add(pt(m.inputElement,_.KEY_DOWN,d))}let g;pe(e.sibling)?n instanceof Ve&&n.element.classList.add("no-sibling"):(g=new Ve(i,this.contextViewService,{placeholder:this.getLocalizedStrings().siblingInputPlaceholder,inputBoxStyles:ut({inputBackground:Ai,inputForeground:Oi,inputBorder:bt})}),g.element.classList.add("setting-list-siblingInput"),this.listDisposables.add(g),g.value=e.sibling,this.listDisposables.add(pt(g.inputElement,_.KEY_DOWN,d)));const h=this._register(new He(i,$e));h.label=l("okButton","OK"),h.element.classList.add("setting-list-ok-button"),this.listDisposables.add(h.onDidClick(()=>{e.value.type==="string"?this.handleItemChange(e,o(),t):this.handleItemChange(e,c(s),t)}));const f=this._register(new He(i,{secondary:!0,...$e}));return f.label=l("cancelButton","Cancel"),f.element.classList.add("setting-list-cancel-button"),this.listDisposables.add(f.onDidClick(()=>this.cancelEdit())),this.listDisposables.add(cs(()=>{n.focus(),n instanceof Ve&&n.select()})),i}isItemNew(e){return e.value.data===""}addTooltipsToRow(e,{value:t,sibling:i}){const n=pe(i)?l("listValueHintLabel","List item `{0}`",t.data):l("listSiblingHintLabel","List item `{0}` with sibling `${1}`",t.data,i),{rowElement:s}=e;s.title=n,s.setAttribute("aria-label",s.title)}getLocalizedStrings(){return{deleteActionTooltip:l("removeItem","Remove Item"),editActionTooltip:l("editItem","Edit Item"),addButtonLabel:l("addItem","Add Item"),inputPlaceholder:l("itemInputPlaceholder","Item..."),siblingInputPlaceholder:l("listSiblingInputPlaceholder","Sibling...")}}renderInputBox(e,t){const i=new Ve(t,this.contextViewService,{placeholder:this.getLocalizedStrings().inputPlaceholder,inputBoxStyles:ut({inputBackground:Ai,inputForeground:Oi,inputBorder:bt})});return i.element.classList.add("setting-list-valueInput"),this.listDisposables.add(i),i.value=e.data.toString(),i}renderDropdown(e,t){if(e.type!=="enum")throw new Error("Valuetype must be enum.");const i=this.createBasicSelectBox(e),n=U(".setting-list-object-list-row");return i.render(n),t.appendChild(n),i}}class ol extends fs{getContainerClasses(){return["setting-list-include-exclude-widget"]}addDragAndDrop(e,t,i){}addTooltipsToRow(e,{value:t,sibling:i}){const n=pe(i)?l("excludePatternHintLabel","Exclude files matching `{0}`",t.data):l("excludeSiblingHintLabel","Exclude files matching `{0}`, only when a file matching `{1}` is present",t.data,i),{rowElement:s}=e;s.title=n,s.setAttribute("aria-label",s.title)}getLocalizedStrings(){return{deleteActionTooltip:l("removeExcludeItem","Remove Exclude Item"),editActionTooltip:l("editExcludeItem","Edit Exclude Item"),addButtonLabel:l("addPattern","Add Pattern"),inputPlaceholder:l("excludePatternInputPlaceholder","Exclude Pattern..."),siblingInputPlaceholder:l("excludeSiblingInputPlaceholder","When Pattern Is Present...")}}}class al extends fs{getContainerClasses(){return["setting-list-include-exclude-widget"]}addDragAndDrop(e,t,i){}addTooltipsToRow(e,{value:t,sibling:i}){const n=pe(i)?l("includePatternHintLabel","Include files matching `{0}`",t.data):l("includeSiblingHintLabel","Include files matching `{0}`, only when a file matching `{1}` is present",t.data,i),{rowElement:s}=e;s.title=n,s.setAttribute("aria-label",s.title)}getLocalizedStrings(){return{deleteActionTooltip:l("removeIncludeItem","Remove Include Item"),editActionTooltip:l("editIncludeItem","Edit Include Item"),addButtonLabel:l("addPattern","Add Pattern"),inputPlaceholder:l("includePatternInputPlaceholder","Include Pattern..."),siblingInputPlaceholder:l("includeSiblingInputPlaceholder","When Pattern Is Present...")}}}class cl extends jt{constructor(){super(...arguments),this.currentSettingKey="",this.showAddButton=!0,this.keySuggester=()=>{},this.valueSuggester=()=>{}}setValue(e,t){this.showAddButton=(t==null?void 0:t.showAddButton)??this.showAddButton,this.keySuggester=(t==null?void 0:t.keySuggester)??this.keySuggester,this.valueSuggester=(t==null?void 0:t.valueSuggester)??this.valueSuggester,we(t)&&t.settingKey!==this.currentSettingKey&&(this.model.setEditKey("none"),this.model.select(null),this.currentSettingKey=t.settingKey),super.setValue(e)}isItemNew(e){return e.key.data===""&&e.value.data===""}isAddButtonVisible(){return this.showAddButton}getEmptyItem(){return{key:{type:"string",data:""},value:{type:"string",data:""},removable:!0}}getContainerClasses(){return["setting-list-object-widget"]}getActionsForItem(e,t){const i=[{class:oe.asClassName(Ji),enabled:!0,id:"workbench.action.editListItem",tooltip:this.getLocalizedStrings().editActionTooltip,run:()=>this.editSetting(t)}];return e.removable?i.push({class:oe.asClassName(no),enabled:!0,id:"workbench.action.removeListItem",tooltip:this.getLocalizedStrings().deleteActionTooltip,run:()=>this._onDidChangeList.fire({originalItem:e,item:void 0,targetIndex:t})}):i.push({class:oe.asClassName(Dd),enabled:!0,id:"workbench.action.resetListItem",tooltip:this.getLocalizedStrings().resetActionTooltip,run:()=>this._onDidChangeList.fire({originalItem:e,item:void 0,targetIndex:t})}),i}renderHeader(){const e=U(".setting-list-row-header"),t=b(e,U(".setting-list-object-key")),i=b(e,U(".setting-list-object-value")),{keyHeaderText:n,valueHeaderText:s}=this.getLocalizedStrings();return t.textContent=n,i.textContent=s,e}renderItem(e,t){const i=U(".setting-list-row");i.classList.add("setting-list-object-row");const n=b(i,U(".setting-list-object-key")),s=b(i,U(".setting-list-object-value"));return n.textContent=e.key.data,s.textContent=e.value.data.toString(),{rowElement:i,keyElement:n,valueElement:s}}renderEdit(e,t){const i=U(".setting-list-edit-row.setting-list-object-row"),n={...e},s=p=>{n.key=p,f.enabled=p.data!=="";const y=this.valueSuggester(p.data)??e.value;this.shouldUseSuggestion(e.value,n.value,y)&&(r(y),h())},r=p=>{n.value=p};let o,c;if(this.showAddButton){if(this.isItemNew(e)){const x=this.keySuggester(this.model.items.map(({key:{data:E}})=>E));if(we(x)){n.key=x;const E=this.valueSuggester(n.key.data);r(E??n.value)}}const{widget:p,element:y}=this.renderEditWidget(n.key,{idx:t,isKey:!0,originalItem:e,changedItem:n,update:s});o=p,c=y}else c=U(".setting-list-object-key"),c.textContent=e.key.data;let d;const g=U(".setting-list-object-value-container"),h=()=>{const{widget:p,element:y}=this.renderEditWidget(n.value,{idx:t,isKey:!1,originalItem:e,changedItem:n,update:r});d=p,Ae(g),g.append(y)};h(),i.append(c,g);const f=this._register(new He(i,$e));f.enabled=n.key.data!=="",f.label=l("okButton","OK"),f.element.classList.add("setting-list-ok-button"),this.listDisposables.add(f.onDidClick(()=>this.handleItemChange(e,n,t)));const m=this._register(new He(i,{secondary:!0,...$e}));return m.label=l("cancelButton","Cancel"),m.element.classList.add("setting-list-cancel-button"),this.listDisposables.add(m.onDidClick(()=>this.cancelEdit())),this.listDisposables.add(cs(()=>{const p=o??d;p.focus(),p instanceof Ve&&p.select()})),i}renderEditWidget(e,t){switch(e.type){case"string":return this.renderStringEditWidget(e,t);case"enum":return this.renderEnumEditWidget(e,t);case"boolean":return this.renderEnumEditWidget({type:"enum",data:e.data.toString(),options:[{value:"true"},{value:"false"}]},t)}}renderStringEditWidget(e,{idx:t,isKey:i,originalItem:n,changedItem:s,update:r}){const o=U(i?".setting-list-object-input-key":".setting-list-object-input-value"),c=new Ve(o,this.contextViewService,{placeholder:i?l("objectKeyInputPlaceholder","Key"):l("objectValueInputPlaceholder","Value"),inputBoxStyles:ut({inputBackground:Ai,inputForeground:Oi,inputBorder:bt})});c.element.classList.add("setting-list-object-input"),this.listDisposables.add(c),c.value=e.data,this.listDisposables.add(c.onDidChange(g=>r({...e,data:g})));const d=g=>{g.equals(3)?this.handleItemChange(n,s,t):g.equals(9)&&(this.cancelEdit(),g.preventDefault())};return this.listDisposables.add(pt(c.inputElement,_.KEY_DOWN,d)),{widget:c,element:o}}renderEnumEditWidget(e,{isKey:t,changedItem:i,update:n}){const s=this.createBasicSelectBox(e),r=t?i.key:i.value;this.listDisposables.add(s.onDidSelect(({selected:d})=>n(r.type==="boolean"?{...r,data:d==="true"}:{...r,data:d})));const o=U(".setting-list-object-input");return o.classList.add(t?"setting-list-object-input-key":"setting-list-object-input-value"),s.render(o),e.options.findIndex(d=>e.data===d.value)===-1&&e.options.length?n(r.type==="boolean"?{...r,data:!0}:{...r,data:e.options[0].value}):r.type==="boolean"&&n({...r,data:e.data==="true"}),{widget:s,element:o}}shouldUseSuggestion(e,t,i){if(i.type!=="enum"&&i.type===t.type&&i.data===t.data)return!1;if(e.data==="")return!0;if(t.type===i.type&&i.type!=="enum")return!1;if(t.type==="enum"&&i.type==="enum"){const n=new Set(t.options.map(({value:s})=>s));if(i.options.forEach(({value:s})=>n.delete(s)),n.size===0)return!1}return!0}addTooltipsToRow(e,t){const{keyElement:i,valueElement:n,rowElement:s}=e,r=l("objectPairHintLabel","The property `{0}` is set to `{1}`.",t.key.data,t.value.data),o=this.getEnumDescription(t.key)??t.keyDescription??r;i.title=o;const c=this.getEnumDescription(t.value)??r;n.title=c,s.setAttribute("aria-label",r)}getEnumDescription(e){var i;return e.type==="enum"?(i=e.options.find(({value:n})=>e.data===n))==null?void 0:i.description:void 0}getLocalizedStrings(){return{deleteActionTooltip:l("removeItem","Remove Item"),resetActionTooltip:l("resetItem","Reset Item"),editActionTooltip:l("editItem","Edit Item"),addButtonLabel:l("addItem","Add Item"),keyHeaderText:l("objectKeyHeader","Item"),valueHeaderText:l("objectValueHeader","Value")}}}class yo extends jt{constructor(){super(...arguments),this.currentSettingKey=""}setValue(e,t){we(t)&&t.settingKey!==this.currentSettingKey&&(this.model.setEditKey("none"),this.model.select(null),this.currentSettingKey=t.settingKey),super.setValue(e)}isItemNew(e){return!e.key.data&&!e.value.data}getEmptyItem(){return{key:{type:"string",data:""},value:{type:"boolean",data:!1},removable:!1}}getContainerClasses(){return["setting-list-object-widget"]}getActionsForItem(e,t){return[]}isAddButtonVisible(){return!1}renderHeader(){}renderDataOrEditItem(e,t,i){const n=this.renderEdit(e,t);return n.setAttribute("role","listitem"),n}renderItem(e,t){const i=U(".blank-row"),n=U(".blank-row-key");return{rowElement:i,keyElement:n}}renderEdit(e,t){const i=U(".setting-list-edit-row.setting-list-object-row.setting-item-bool"),n={...e},s=h=>{n.value.data=h,this.handleItemChange(e,n,t)},r=e.keyDescription?`${e.keyDescription} (${e.key.data})`:e.key.data,{element:o,widget:c}=this.renderEditWidget(n.value.data,r,s);i.appendChild(o);const d=b(i,U(".setting-list-object-value"));d.textContent=r;const g={rowElement:i,keyElement:d,valueElement:c.domNode};return this.addTooltipsToRow(g,e),this._register(D(d,_.MOUSE_DOWN,h=>{h.target.tagName.toLowerCase()!=="a"&&(c.checked=!c.checked,s(c.checked)),Ze.stop(h)})),i}renderEditWidget(e,t,i){const n=new Rr({icon:ue.check,actionClassName:"setting-value-checkbox",isChecked:e,title:t,...Ar});this.listDisposables.add(n);const s=U(".setting-list-object-input");return s.classList.add("setting-list-object-input-key-checkbox"),n.domNode.classList.add("setting-value-checkbox"),s.appendChild(n.domNode),this._register(D(s,_.MOUSE_DOWN,r=>{n.checked=!n.checked,i(n.checked),r.stopImmediatePropagation()})),{widget:n,element:s}}addTooltipsToRow(e,t){const i=l("objectPairHintLabel","The property `{0}` is set to `{1}`.",t.key.data,t.value.data),n=t.keyDescription??i,{rowElement:s,keyElement:r,valueElement:o}=e;r.title=n,o.setAttribute("aria-label",i),s.setAttribute("aria-label",i)}getLocalizedStrings(){return{deleteActionTooltip:l("removeItem","Remove Item"),resetActionTooltip:l("resetItem","Reset Item"),editActionTooltip:l("editItem","Edit Item"),addButtonLabel:l("addItem","Add Item"),keyHeaderText:l("objectKeyHeader","Item"),valueHeaderText:l("objectValueHeader","Value")}}}const De=P;let So=new Set,en=[],Fi=class{constructor(e,t,i,n,s,r,o){this.configurationService=t,this.hoverService=i,this.userDataSyncEnablementService=n,this.languageService=s,this.userDataProfilesService=r,this.commandService=o,this.keybindingListeners=new G,this.focusedIndex=0,this.defaultHoverOptions={hoverPosition:2,showPointer:!0,compact:!1,trapFocus:!0},this.indicatorsContainerElement=b(e,De(".setting-indicators-container")),this.indicatorsContainerElement.style.display="inline",this.profilesEnabled=this.userDataProfilesService.isEnabled(),this.workspaceTrustIndicator=this.createWorkspaceTrustIndicator(),this.scopeOverridesIndicator=this.createScopeOverridesIndicator(),this.syncIgnoredIndicator=this.createSyncIgnoredIndicator(),this.defaultOverrideIndicator=this.createDefaultOverrideIndicator(),this.allIndicators=[this.workspaceTrustIndicator,this.scopeOverridesIndicator,this.syncIgnoredIndicator,this.defaultOverrideIndicator]}addHoverDisposables(e,t,i){e.clear();const n=e.add(new dc(()=>{const s=i(!1);s&&e.add(s)},this.configurationService.getValue("workbench.hover.delay")));e.add(D(t,_.MOUSE_OVER,()=>{n.isScheduled()||n.schedule()})),e.add(D(t,_.MOUSE_LEAVE,()=>{n.cancel()})),e.add(D(t,_.KEY_DOWN,s=>{const r=new Ge(s);if(r.equals(10)||r.equals(3)){const o=i(!0);o&&e.add(o),s.preventDefault()}}))}createWorkspaceTrustIndicator(){const e=De("span.setting-indicator.setting-item-workspace-trust"),t=new ct(e);t.text="$(warning) "+l("workspaceUntrustedLabel","Setting value not applied");const i=l("trustLabel","The setting value can only be applied in a trusted workspace."),n=new G,s=r=>this.hoverService.showHover({...this.defaultHoverOptions,content:i,target:e,actions:[{label:l("manageWorkspaceTrust","Manage Workspace Trust"),commandId:"workbench.trust.manage",run:o=>{this.commandService.executeCommand("workbench.trust.manage")}}]},r);return this.addHoverDisposables(n,e,s),{element:e,label:t,disposables:n}}createScopeOverridesIndicator(){const e=De("span.setting-item-overrides"),t=new ct(e);return{element:e,label:t,disposables:new G}}createSyncIgnoredIndicator(){const e=De("span.setting-indicator.setting-item-ignored"),t=new ct(e);t.text=l("extensionSyncIgnoredLabel","Not synced");const i=l("syncIgnoredTitle","This setting is ignored during sync"),n=new G,s=r=>this.hoverService.showHover({...this.defaultHoverOptions,content:i,target:e},r);return this.addHoverDisposables(n,e,s),{element:e,label:t,disposables:new G}}createDefaultOverrideIndicator(){const e=De("span.setting-indicator.setting-item-default-overridden"),t=new ct(e);return t.text=l("defaultOverriddenLabel","Default value changed"),{element:e,label:t,disposables:new G}}render(){const e=this.allIndicators.filter(t=>t.element.style.display!=="none");if(this.indicatorsContainerElement.innerText="",this.indicatorsContainerElement.style.display="none",e.length){this.indicatorsContainerElement.style.display="inline",b(this.indicatorsContainerElement,De("span",void 0,"("));for(let t=0;t<e.length-1;t++)b(this.indicatorsContainerElement,e[t].element),b(this.indicatorsContainerElement,De("span.comma",void 0,"  "));b(this.indicatorsContainerElement,e[e.length-1].element),b(this.indicatorsContainerElement,De("span",void 0,")")),this.resetIndicatorNavigationKeyBindings(e)}}resetIndicatorNavigationKeyBindings(e){if(this.keybindingListeners.clear(),this.indicatorsContainerElement.role=e.length>=1?"toolbar":"button",!e.length)return;const t=e[0].focusElement??e[0].element;t.tabIndex=0,this.keybindingListeners.add(D(this.indicatorsContainerElement,"keydown",i=>{const n=new Ge(i);let s=!0;if(n.equals(14))this.focusIndicatorAt(e,0);else if(n.equals(13))this.focusIndicatorAt(e,e.length-1);else if(n.equals(17)){const r=(this.focusedIndex+1)%e.length;this.focusIndicatorAt(e,r)}else if(n.equals(15)){const r=this.focusedIndex?this.focusedIndex-1:e.length-1;this.focusIndicatorAt(e,r)}else s=!1;s&&(i.preventDefault(),i.stopPropagation())}))}focusIndicatorAt(e,t){if(t===this.focusedIndex)return;const i=e[t],n=i.focusElement??i.element;n.tabIndex=0,n.focus();const s=e[this.focusedIndex],r=s.focusElement??s.element;r.tabIndex=-1,this.focusedIndex=t}updateWorkspaceTrust(e){this.workspaceTrustIndicator.element.style.display=e.isUntrusted?"inline":"none",this.render()}updateSyncIgnored(e,t){this.syncIgnoredIndicator.element.style.display=this.userDataSyncEnablementService.isEnabled()&&t.includes(e.setting.key)?"inline":"none",this.render(),en!==t&&(en=t,So=new Set(en))}getInlineScopeDisplayText(e){const[t,i]=e.split(":"),n=t==="user"?l("user","User"):t==="workspace"?l("workspace","Workspace"):l("remote","Remote");return i?`${this.languageService.getLanguageName(i)} > ${n}`:n}dispose(){this.keybindingListeners.dispose();for(const e of this.allIndicators)e.disposables.dispose()}updateScopeOverrides(e,t,i){if(this.scopeOverridesIndicator.element.innerText="",this.scopeOverridesIndicator.element.style.display="none",this.scopeOverridesIndicator.focusElement=this.scopeOverridesIndicator.element,e.hasPolicyValue){this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.add("setting-indicator"),this.scopeOverridesIndicator.label.text="$(warning) "+l("policyLabelText","Setting value not applied");const n=l("policyDescription","This setting is managed by your organization and its applied value cannot be changed."),s=r=>this.hoverService.showHover({...this.defaultHoverOptions,content:n,actions:[{label:l("policyFilterLink","View policy settings"),commandId:"_settings.action.viewPolicySettings",run:o=>{i.fire(`@${ht}`)}}],target:this.scopeOverridesIndicator.element},r);this.addHoverDisposables(this.scopeOverridesIndicator.disposables,this.scopeOverridesIndicator.element,s)}else if(this.profilesEnabled&&e.matchesScope(1,!1)){this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.add("setting-indicator");const n=l("applicationSetting","Applies to all profiles");this.scopeOverridesIndicator.label.text=n;const s=l("applicationSettingDescription","The setting is not specific to the current profile, and will retain its value when switching profiles."),r=o=>this.hoverService.showHover({...this.defaultHoverOptions,content:s,target:this.scopeOverridesIndicator.element},o);this.addHoverDisposables(this.scopeOverridesIndicator.disposables,this.scopeOverridesIndicator.element,r)}else if(e.overriddenScopeList.length||e.overriddenDefaultsLanguageList.length)if(e.overriddenScopeList.length===1&&!e.overriddenDefaultsLanguageList.length){this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.remove("setting-indicator"),this.scopeOverridesIndicator.disposables.clear();const n=e.isConfigured?l("alsoConfiguredIn","Also modified in"):l("configuredIn","Modified in");this.scopeOverridesIndicator.label.text=`${n} `;const s=e.overriddenScopeList[0],r=b(this.scopeOverridesIndicator.element,De("a.modified-scope",void 0,this.getInlineScopeDisplayText(s)));r.tabIndex=-1,this.scopeOverridesIndicator.focusElement=r;const o=c=>{const[d,g]=s.split(":");t.fire({settingKey:e.setting.key,scope:d,language:g}),c.preventDefault(),c.stopPropagation()};this.scopeOverridesIndicator.disposables.add(D(r,_.CLICK,c=>{o(c)})),this.scopeOverridesIndicator.disposables.add(D(r,_.KEY_DOWN,c=>{const d=new Ge(c);(d.equals(10)||d.equals(3))&&o(c)}))}else{this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.add("setting-indicator");const n=e.isConfigured?l("alsoConfiguredElsewhere","Also modified elsewhere"):l("configuredElsewhere","Modified elsewhere");this.scopeOverridesIndicator.label.text=n;let s="";if(e.overriddenScopeList.length){s=e.isConfigured?l("alsoModifiedInScopes","The setting has also been modified in the following scopes:"):l("modifiedInScopes","The setting has been modified in the following scopes:");for(const d of e.overriddenScopeList){const g=this.getInlineScopeDisplayText(d);s+=`
- [${g}](${encodeURIComponent(d)} "${dl(d,this.languageService)}")`}}if(e.overriddenDefaultsLanguageList.length){s&&(s+=`

`);const c=l("hasDefaultOverridesForLanguages","The following languages have default overrides:");s+=c;for(const d of e.overriddenDefaultsLanguageList){const g=this.languageService.getLanguageName(d);s+=`
- [${g}](${encodeURIComponent(`default:${d}`)} "${g}")`}}const r={value:s,isTrusted:!1,supportHtml:!1},o=c=>this.hoverService.showHover({...this.defaultHoverOptions,content:r,linkHandler:d=>{const[g,h]=decodeURIComponent(d).split(":");t.fire({settingKey:e.setting.key,scope:g,language:h})},target:this.scopeOverridesIndicator.element},c);this.addHoverDisposables(this.scopeOverridesIndicator.disposables,this.scopeOverridesIndicator.element,o)}this.render()}updateDefaultOverrideIndicator(e){this.defaultOverrideIndicator.element.style.display="none";const t=vo(e);if(t!==void 0){this.defaultOverrideIndicator.element.style.display="inline",this.defaultOverrideIndicator.disposables.clear();const i=l("defaultOverriddenDetails","Default setting value overridden by {0}",t),n=s=>this.hoverService.showHover({content:i,target:this.defaultOverrideIndicator.element,hoverPosition:2,showPointer:!0,compact:!1},s);this.addHoverDisposables(this.defaultOverrideIndicator.disposables,this.defaultOverrideIndicator.element,n)}this.render()}};Fi=v([u(1,ie),u(2,cc),u(3,qi),u(4,Pe),u(5,Jt),u(6,ft)],Fi);function vo(a){let e;const t=a.defaultValueSource;return t&&(typeof t!="string"?e=t.displayName??t.id:typeof t=="string"&&(e=t)),e}function dl(a,e){const[t,i]=a.split(":"),n=t==="user"?l("user","User"):t==="workspace"?l("workspace","Workspace"):l("remote","Remote");return i?l("modifiedInScopeForLanguage","The {0} scope for {1}",n,e.getLanguageName(i)):n}function ll(a,e){const[t,i]=a.split(":"),n=t==="user"?l("user","User"):t==="workspace"?l("workspace","Workspace"):l("remote","Remote");return i?l("modifiedInScopeForLanguageMidSentence","the {0} scope for {1}",n.toLowerCase(),e.getLanguageName(i)):n}function gl(a,e,t,i){const n=[];a.isUntrusted&&n.push(l("workspaceUntrustedAriaLabel","Workspace untrusted; setting value not applied"));const s=t.isEnabled();if(a.hasPolicyValue)n.push(l("policyDescriptionAccessible","Managed by organization policy; setting value not applied"));else if(s&&a.matchesScope(1,!1))n.push(l("applicationSettingDescriptionAccessible","Setting value retained when switching profiles"));else{const d=a.isConfigured?l("alsoConfiguredIn","Also modified in"):l("configuredIn","Modified in"),g=a.overriddenScopeList.map(h=>ll(h,i)).join(", ");a.overriddenScopeList.length&&n.push(`${d} ${g}`)}So.has(a.setting.key)&&n.push(l("syncIgnoredAriaLabel","Setting ignored during sync"));const r=vo(a);r!==void 0&&n.push(l("defaultOverriddenDetailsAriaLabel","{0} overrides the default value",r));const o=a.overriddenDefaultsLanguageList.map(d=>i.getLanguageName(d)).join(", ");if(a.overriddenDefaultsLanguageList.length){const d=l("defaultOverriddenLanguagesList","Language-specific default values exist for {0}",o);n.push(d)}return n.join(". ")}const A=P;function ul(a){const e=a.isConfigured?{...a.defaultValue,...a.scopeValue}:a.defaultValue;return Object.keys(e).filter(t=>!!e[t]).map(t=>{const i=e[t],n=typeof i=="boolean"?void 0:i.when;return{value:{type:"string",data:t},sibling:n,elementType:a.valueType}})}function hl(a,e){const t=new Set(a);return e.forEach(({key:i})=>t.delete(i.data)),t.size===0}function Lt(a){if(a.anyOf)return a.anyOf.map(Lt).flat();const e=a.enumDescriptions??[];return(a.enum??[]).map((t,i)=>{const n=i<e.length?e[i]:void 0;return{value:t,description:n}})}function Mt(a){return a.anyOf?a.anyOf.map(Mt).some(t=>t==="enum")?"enum":"string":a.type==="boolean"?"boolean":a.type==="string"&&we(a.enum)&&a.enum.length>0?"enum":"string"}function wo(a){const e=typeof a.defaultValue=="object"?a.defaultValue??{}:{},t=typeof a.scopeValue=="object"?a.scopeValue??{}:{},i=a.isConfigured?{...e,...t}:e,{objectProperties:n,objectPatternProperties:s,objectAdditionalProperties:r}=a.setting,o=Object.entries(s??{}).map(([d,g])=>({pattern:new RegExp(d),schema:g})),c=Object.entries(n??{}).map(([d,g])=>({value:d,description:g.description}));return Object.keys(i).map(d=>{var p;const g=e[d];if(we(n)&&d in n){if(a.setting.allKeysAreBoolean)return{key:{type:"string",data:d},value:{type:"boolean",data:i[d]},keyDescription:n[d].description,removable:!1};const y=Lt(n[d]);return{key:{type:"enum",data:d,options:c},value:{type:Mt(n[d]),data:i[d],options:y},keyDescription:n[d].description,removable:pe(g)}}const h=!g,f=(p=o.find(({pattern:y})=>y.test(d)))==null?void 0:p.schema;if(f){const y=Lt(f);return{key:{type:"string",data:d},value:{type:Mt(f),data:i[d],options:y},keyDescription:f.description,removable:h}}const m=Lt(typeof r=="boolean"?{}:r??{});return{key:{type:"string",data:d},value:{type:typeof r=="object"?Mt(r):"string",data:i[d],options:m},keyDescription:typeof r=="object"?r.description:void 0,removable:h}}).filter(d=>!pe(d.value.data))}function pl(a){return(e,t)=>{const i=[];return a.setting.enum&&a.setting.enum.forEach((n,s)=>{var r;if(!a.setting.uniqueItems||t!==void 0&&n===e[t]||!e.includes(n)){const o=(r=a.setting.enumDescriptions)==null?void 0:r[s];i.push({value:n,description:o})}}),i.length>0?{type:"enum",data:i[0].value,options:i}:void 0}}function fl(a){const{objectProperties:e}=a.setting,t=Object.keys(e??{});return i=>{const n=new Set(i),s=[];return t.forEach(r=>{n.has(r)||s.push({value:r,description:e[r].description})}),s.length>0?{type:"enum",data:s[0].value,options:s}:void 0}}function ml(a){const{objectProperties:e,objectPatternProperties:t,objectAdditionalProperties:i}=a.setting,n=Object.entries(t??{}).map(([s,r])=>({pattern:new RegExp(s),schema:r}));return s=>{var c;let r;we(e)&&s in e&&(r=e[s]);const o=r??((c=n.find(({pattern:d})=>d.test(s)))==null?void 0:c.schema);if(we(o)?r=o:we(i)&&typeof i=="object"&&(r=i),we(r)){const d=Mt(r);if(d==="boolean")return{type:d,data:r.default??!0};if(d==="enum"){const g=Lt(r);return{type:d,data:r.default??g[0].value,options:g}}else return{type:d,data:r.default??""}}}}function wi(a){return a==="number"||a==="integer"}function bl(a,e){const t={};for(const i in e){let n;const s=a.setting.objectPatternProperties,r=a.setting.objectProperties,o=a.setting.objectAdditionalProperties;if(r){for(const c in r)if(c===i){n=wi(r[c].type);break}}if(n===void 0&&s){for(const c in s)if(i.match(c)){n=wi(s[c].type);break}}n===void 0&&o&&typeof o!="boolean"&&wi(o.type)&&(n=!0),t[i]=n?Number(e[i]):e[i]}return t}function yl(a){if(!a.value||!Array.isArray(a.value))return[];if(a.setting.arrayItemType==="enum"){let e=[];return a.setting.enum&&(e=a.setting.enum.map((t,i)=>{var n;return{value:t,description:(n=a.setting.enumDescriptions)==null?void 0:n[i]}})),a.value.map(t=>({value:{type:"enum",data:t,options:e}}))}else return a.value.map(e=>({value:{type:"string",data:e}}))}function Sl(a,e){return a.setting.enum&&a.setting.uniqueItems?a.setting.enum.length-e.length>0:!0}function Ns(a,e,t){const i=Co(e);return{tree:Eo(a,i,t),leftoverSettings:i}}function vl(a,e,t,i){return[...Co(a)].filter(s=>s.restricted&&Rn(s.key,e,t,i).isConfigured)}function Ws(a,e){const t=a??Number.MAX_SAFE_INTEGER,i=e??Number.MAX_SAFE_INTEGER;return t-i}async function wl(a,e){const t=new Map,i=(r,o,c)=>{if(!t.has(r)){const d={id:r,label:o,children:[]};t.set(r,d)}t.get(r).children.push(c)},n=async r=>{const o=r.sections.map(f=>f.settings).flat(),c=r.extensionInfo.id,d=await a.getExtension(c),g=(d==null?void 0:d.displayName)??(d==null?void 0:d.name)??c,h={id:r.id||r.title,label:r.title,order:r.order,settings:o};i(c,g,h)},s=e.map(r=>n(r));return Promise.all(s).then(()=>{var o;const r=[];for(const c of t.values()){for(const d of c.children)(o=d.settings)==null||o.sort((g,h)=>Ws(g.order,h.order));if(c.children.length===1)r.push({id:c.id,label:c.children[0].label,settings:c.children[0].settings});else{c.children.sort((g,h)=>Ws(g.order,h.order));const d=c.children.find(g=>g.label===c.label);if(d&&!d.children){const g=c.children.filter(h=>h!==d);r.push({id:c.id,label:c.label,settings:d.settings,children:g})}else r.push(c)}}return r.sort((c,d)=>c.label.localeCompare(d.label)),{id:"extensions",label:l("extensions","Extensions"),children:r}})}function Eo(a,e,t){let i;a.children&&(i=a.children.map(s=>Eo(s,e,t)).filter(s=>{var r,o;return((r=s.children)==null?void 0:r.length)||((o=s.settings)==null?void 0:o.length)}));let n;if(a.settings&&(n=a.settings.map(s=>Cl(e,s,t)).flat()),!i&&!n)throw new Error(`TOC node has no child groups or settings: ${a.id}`);return{id:a.id,label:a.label,children:i,settings:n}}const El=[/^settingsSync\..*/,/^sync\..*/,/^workbench.fontAliasing$/];function Cl(a,e,t){const i=[];return a.forEach(n=>{Tl(n,e)&&(i.push(n),a.delete(n))}),!i.length&&!El.some(n=>n.test(e))&&t.warn(`Settings pattern "${e}" doesn't match any settings`),i.sort((n,s)=>n.key.localeCompare(s.key))}const Ps=new Map;function xl(a){return a=Yn(a).replace(/\\\*/g,".*"),new RegExp(`^${a}$`,"i")}function Tl(a,e){let t=Ps.get(e);return t||(t=xl(e),Ps.set(e,t)),t.test(a.key)}function Co(a){const e=new Set;for(const t of a)for(const i of t.sections)for(const n of i.settings)(!n.overrides||!n.overrides.length)&&e.add(n);return e}const xo="settings.text.template",To="settings.multilineText.template",ko="settings.number.template",Io="settings.enum.template",_o="settings.bool.template",Do="settings.array.template",Lo="settings.exclude.template",Mo="settings.include.template",Ro="settings.object.template",Ao="settings.boolObject.template",Ei="settings.complex.template",Oo="settings.newExtensions.template",No="settings.group.template",Wo="settings.extensionToggle.template";function kl(a){a.querySelectorAll(`
		[tabindex="0"],
		input:not([tabindex="-1"]),
		select:not([tabindex="-1"]),
		textarea:not([tabindex="-1"]),
		a:not([tabindex="-1"]),
		button:not([tabindex="-1"]),
		area:not([tabindex="-1"])
	`).forEach(t=>{t.setAttribute(C.ELEMENT_FOCUSABLE_ATTR,"true"),t.setAttribute("tabindex","-1")})}function Il(a){a.querySelectorAll(`[${C.ELEMENT_FOCUSABLE_ATTR}="true"]`).forEach(t=>{t.removeAttribute(C.ELEMENT_FOCUSABLE_ATTR),t.setAttribute("tabindex","0")})}let C=class Ci extends ee{constructor(e,t,i,n,s,r,o,c,d,g,h,f,m,p){super(),this.settingActions=e,this.disposableActionFactory=t,this._themeService=i,this._contextViewService=n,this._openerService=s,this._instantiationService=r,this._commandService=o,this._contextMenuService=c,this._keybindingService=d,this._configService=g,this._extensionsService=h,this._extensionsWorkbenchService=f,this._productService=m,this._telemetryService=p,this._onDidClickOverrideElement=this._register(new I),this.onDidClickOverrideElement=this._onDidClickOverrideElement.event,this._onDidChangeSetting=this._register(new I),this.onDidChangeSetting=this._onDidChangeSetting.event,this._onDidOpenSettings=this._register(new I),this.onDidOpenSettings=this._onDidOpenSettings.event,this._onDidClickSettingLink=this._register(new I),this.onDidClickSettingLink=this._onDidClickSettingLink.event,this._onDidFocusSetting=this._register(new I),this.onDidFocusSetting=this._onDidFocusSetting.event,this._onDidChangeIgnoredSettings=this._register(new I),this.onDidChangeIgnoredSettings=this._onDidChangeIgnoredSettings.event,this._onDidChangeSettingHeight=this._register(new I),this.onDidChangeSettingHeight=this._onDidChangeSettingHeight.event,this._onApplyFilter=this._register(new I),this.onApplyFilter=this._onApplyFilter.event,this.markdownRenderer=this._register(r.createInstance(gc,{})),this.ignoredSettings=hn(_i(),this._configService),this._register(this._configService.onDidChangeConfiguration(y=>{this.ignoredSettings=hn(_i(),this._configService),this._onDidChangeIgnoredSettings.fire()}))}renderCommonTemplate(e,t,i){t.classList.add("setting-item"),t.classList.add("setting-item-"+i);const n=new G,s=b(t,A(Ci.CONTENTS_SELECTOR));s.classList.add("settings-row-inner-container");const r=b(s,A(".setting-item-title")),o=b(r,A(".setting-item-cat-label-container")),c=b(o,A("span.setting-item-category")),d=b(o,A("span.setting-item-label")),g=new ct(d),h=this._instantiationService.createInstance(Fi,r);n.add(h);const f=b(s,A(".setting-item-description")),m=b(s,A(".setting-item-modified-indicator"));m.title=l("modified","The setting has been configured in the current scope.");const p=b(s,A(".setting-item-value")),y=b(p,A("div.setting-item-control")),x=b(s,A(".setting-item-deprecation-message")),E=b(s,A(".setting-toolbar-container")),S=this.renderSettingToolbar(E),R={toDispose:n,elementDisposables:n.add(new G),containerElement:s,categoryElement:c,labelElement:g,descriptionElement:f,controlElement:y,deprecationWarningElement:x,indicatorsLabel:h,toolbar:S};return n.add(D(y,_.MOUSE_DOWN,T=>T.stopPropagation())),n.add(D(r,_.MOUSE_ENTER,T=>s.classList.add("mouseover"))),n.add(D(r,_.MOUSE_LEAVE,T=>s.classList.remove("mouseover"))),R}addSettingElementFocusHandler(e){const t=es(e.containerElement);e.toDispose.add(t),t.onDidBlur(()=>{e.containerElement.classList.contains("focused")&&e.containerElement.classList.remove("focused")}),t.onDidFocus(()=>{e.containerElement.classList.add("focused"),e.context&&this._onDidFocusSetting.fire(e.context)})}renderSettingToolbar(e){const t=this._keybindingService.lookupKeybinding(Nr);let i=l("settingsContextMenuTitle","More Actions... ");return t&&(i+=` (${t&&t.getLabel()})`),new hr(e,this._contextMenuService,{toggleMenuTitle:i,renderDropdownAsChildElement:!et,moreIcon:xd})}renderSettingElement(e,t,i){const n=e.element;i.context=n,i.toolbar.context=n;const s=this.disposableActionFactory(n.setting);s.forEach(g=>uc(g)&&i.elementDisposables.add(g)),i.toolbar.setActions([],[...this.settingActions,...s]);const r=n.setting;i.containerElement.classList.toggle("is-configured",n.isConfigured),i.containerElement.setAttribute(Ci.SETTING_KEY_ATTR,n.setting.key),i.containerElement.setAttribute(Ci.SETTING_ID_ATTR,n.id);const o=r.key+(n.isConfigured?" - Modified":"");if(i.categoryElement.textContent=n.displayCategory?n.displayCategory+": ":"",i.categoryElement.title=o,i.labelElement.text=n.displayLabel,i.labelElement.title=o,i.descriptionElement.innerText="",n.setting.descriptionIsMarkdown){const g=this.renderSettingMarkdown(n,i.containerElement,n.description,i.elementDisposables);i.descriptionElement.appendChild(g)}else i.descriptionElement.innerText=n.description;i.indicatorsLabel.updateScopeOverrides(n,this._onDidClickOverrideElement,this._onApplyFilter);const c=g=>this._onDidChangeSetting.fire({key:n.setting.key,value:g,type:i.context.valueType,manualReset:!1,scope:n.setting.scope}),d=n.setting.deprecationMessage||"";d&&n.setting.deprecationMessageIsMarkdown?(i.deprecationWarningElement.innerText="",i.deprecationWarningElement.appendChild(this.renderSettingMarkdown(n,i.containerElement,n.setting.deprecationMessage,i.elementDisposables))):i.deprecationWarningElement.innerText=d,i.deprecationWarningElement.prepend(A(".codicon.codicon-error")),i.containerElement.classList.toggle("is-deprecated",!!d),this.renderValue(n,i,c),i.indicatorsLabel.updateWorkspaceTrust(n),i.indicatorsLabel.updateSyncIgnored(n,this.ignoredSettings),i.indicatorsLabel.updateDefaultOverrideIndicator(n),i.elementDisposables.add(this.onDidChangeIgnoredSettings(()=>{i.indicatorsLabel.updateSyncIgnored(n,this.ignoredSettings)})),this.updateSettingTabbable(n,i),i.elementDisposables.add(n.onDidChangeTabbable(()=>{this.updateSettingTabbable(n,i)}))}updateSettingTabbable(e,t){e.tabbable?Il(t.containerElement):kl(t.containerElement)}renderSettingMarkdown(e,t,i,n){i=ms(i);const s=this.markdownRenderer.render({value:i,isTrusted:!0},{actionHandler:{callback:r=>{if(r.startsWith("#")){const o={source:e,targetKey:r.substring(1)};this._onDidClickSettingLink.fire(o)}else this._openerService.open(r,{allowCommands:!0}).catch(Wr)},disposables:n},asyncRenderCallback:()=>{const r=t.clientHeight;r&&this._onDidChangeSettingHeight.fire({element:e,height:r})}});return n.add(s),s.element.classList.add("setting-item-markdown"),Bo(s.element),s.element}disposeTemplate(e){e.toDispose.dispose()}disposeElement(e,t,i,n){var s;(s=i.elementDisposables)==null||s.clear()}};C.CONTROL_CLASS="setting-control-focus-target";C.CONTROL_SELECTOR="."+C.CONTROL_CLASS;C.CONTENTS_CLASS="setting-item-contents";C.CONTENTS_SELECTOR="."+C.CONTENTS_CLASS;C.ALL_ROWS_SELECTOR=".monaco-list-row";C.SETTING_KEY_ATTR="data-key";C.SETTING_ID_ATTR="data-id";C.ELEMENT_FOCUSABLE_ATTR="data-focusable";C=v([u(2,zi),u(3,Xt),u(4,lc),u(5,j),u(6,ft),u(7,vt),u(8,We),u(9,ie),u(10,Ui),u(11,cr),u(12,Yt),u(13,os)],C);class _l{constructor(){this.templateId=No}renderTemplate(e){return e.classList.add("group-title"),{parent:e,toDispose:new G}}renderElement(e,t,i){i.parent.innerText="";const n=b(i.parent,A("div.settings-group-title-label.settings-row-inner-container"));n.classList.add(`settings-group-level-${e.element.level}`),n.textContent=e.element.label,e.element.isFirstGroup&&n.classList.add("settings-group-first")}disposeTemplate(e){}}let An=class{constructor(e){this._commandService=e,this.templateId=Oo}renderTemplate(e){const t=new G;e.classList.add("setting-item-new-extensions");const i=new He(e,{title:!0,...$e});t.add(i),t.add(i.onDidClick(()=>{n.context&&this._commandService.executeCommand("workbench.extensions.action.showExtensionsWithIds",n.context.extensionIds)})),i.label=l("newExtensionsButtonLabel","Show matching extensions"),i.element.classList.add("settings-new-extensions-button");const n={button:i,toDispose:t};return n}renderElement(e,t,i){i.context=e.element}disposeTemplate(e){_t(e.toDispose)}};An=v([u(0,ft)],An);class Ht extends C{constructor(){super(...arguments),this.templateId=Ei}renderTemplate(e){const t=this.renderCommonTemplate(null,e,"complex"),i=b(t.controlElement,A("a.edit-in-settings-button"));i.classList.add(C.CONTROL_CLASS),i.role="button";const n=A(".setting-item-validation-message");t.containerElement.appendChild(n);const s={...t,button:i,validationErrorMessageElement:n};return this.addSettingElementFocusHandler(s),s}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){const n=hc(e.setting.key),s=l("editLanguageSettingLabel","Edit settings for {0}",n),r=e.setting.isLanguageTagSetting;t.button.textContent=r?s:Ht.EDIT_IN_JSON_LABEL;const o=c=>{r?this._onApplyFilter.fire(`@${Le}${n}`):this._onDidOpenSettings.fire(e.setting.key),c.preventDefault(),c.stopPropagation()};t.elementDisposables.add(D(t.button,_.CLICK,c=>{o(c)})),t.elementDisposables.add(D(t.button,_.KEY_DOWN,c=>{const d=new Ge(c);(d.equals(10)||d.equals(3))&&o(c)})),this.renderValidations(e,t),r?t.button.setAttribute("aria-label",s):t.button.setAttribute("aria-label",`${Ht.EDIT_IN_JSON_LABEL}: ${e.setting.key}`)}renderValidations(e,t){const i=e.isConfigured&&Qr(e.value,e.setting.type);if(i){t.containerElement.classList.add("invalid-input"),t.validationErrorMessageElement.innerText=i;return}t.containerElement.classList.remove("invalid-input")}}Ht.EDIT_IN_JSON_LABEL=l("editInSettingsJson","Edit in settings.json");class Dl extends C{constructor(){super(...arguments),this.templateId=Do}renderTemplate(e){const t=this.renderCommonTemplate(null,e,"list"),i=t.containerElement.querySelector(".setting-item-description"),n=A(".setting-item-validation-message");i.after(n);const s=this._instantiationService.createInstance(fs,t.controlElement);s.domNode.classList.add(C.CONTROL_CLASS),t.toDispose.add(s);const r={...t,listWidget:s,validationErrorMessageElement:n};return this.addSettingElementFocusHandler(r),t.toDispose.add(s.onDidChangeList(o=>{var d;const c=this.computeNewList(r,o);(d=r.onChange)==null||d.call(r,c)})),r}computeNewList(e,t){var i,n,s,r;if(e.context){let o=[];if(Array.isArray(e.context.scopeValue)?o=[...e.context.scopeValue]:Array.isArray(e.context.value)&&(o=[...e.context.value]),t.sourceIndex!==void 0){const c=t.sourceIndex,d=t.targetIndex,g=o.splice(c,1)[0];o.splice(d,0,g)}else if(t.targetIndex!==void 0){const c=((i=t.item)==null?void 0:i.value.data.toString())??"";!((n=t.item)!=null&&n.value.data)&&t.originalItem.value.data&&t.targetIndex>-1?o.splice(t.targetIndex,1):(s=t.item)!=null&&s.value.data&&t.originalItem.value.data?t.targetIndex>-1?o[t.targetIndex]=c:o.push(c):(r=t.item)!=null&&r.value.data&&!t.originalItem.value.data&&t.targetIndex>=o.length&&o.push(c)}return e.context.defaultValue&&Array.isArray(e.context.defaultValue)&&e.context.defaultValue.length===o.length&&e.context.defaultValue.join()===o.join()?void 0:o}}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){const n=yl(e),s=e.setting.enum?pl(e):void 0;t.listWidget.setValue(n,{showAddButton:Sl(e,n),keySuggester:s}),t.context=e,t.elementDisposables.add(Qt(()=>{t.listWidget.cancelEdit()})),t.onChange=r=>{if(r&&!Bi(e,t,r,!1)){const o=e.setting.arrayItemType,c=wi(o)?r.map(d=>+d):r;i(c)}else i(r)},Bi(e,t,n.map(r=>r.value.data.toString()),!0)}}class Po extends C{renderTemplateWithWidget(e,t){t.domNode.classList.add(C.CONTROL_CLASS),e.toDispose.add(t);const i=e.containerElement.querySelector(".setting-item-description"),n=A(".setting-item-validation-message");i.after(n);const s={...e,validationErrorMessageElement:n};return t instanceof yo?s.objectCheckboxWidget=t:s.objectDropdownWidget=t,this.addSettingElementFocusHandler(s),e.toDispose.add(t.onDidChangeList(r=>{this.onDidChangeObject(s,r)})),s}onDidChangeObject(e,t){var n;const i=e.objectCheckboxWidget??e.objectDropdownWidget;if(e.context){const s=typeof e.context.defaultValue=="object"?e.context.defaultValue??{}:{},r=typeof e.context.scopeValue=="object"?e.context.scopeValue??{}:{},o={},c=[];if(i.items.forEach((g,h)=>{we(t.item)&&t.targetIndex===h?(o[t.item.key.data]=t.item.value.data,c.push(t.item)):(pe(t.item)||t.item.key.data!==g.key.data)&&(o[g.key.data]=g.value.data,c.push(g))}),pe(t.item)){delete o[t.originalItem.key.data];const g=c.findIndex(f=>f.key.data===t.originalItem.key.data),h=s[t.originalItem.key.data];pe(s[t.originalItem.key.data])&&g>-1?c.splice(g,1):g>-1&&(c[g].value.data=h)}else i.isItemNew(t.originalItem)&&t.item.key.data!==""&&(o[t.item.key.data]=t.item.value.data,c.push(t.item));Object.entries(o).forEach(([g,h])=>{r[g]!==h&&s[g]===h&&delete o[g]});const d=Object.keys(o).length===0?void 0:o;e.objectCheckboxWidget?e.objectCheckboxWidget.setValue(c):e.objectDropdownWidget.setValue(c),(n=e.onChange)==null||n.call(e,d)}}renderElement(e,t,i){super.renderSettingElement(e,t,i)}}class Ll extends Po{constructor(){super(...arguments),this.templateId=Ro}renderTemplate(e){const t=this.renderCommonTemplate(null,e,"list"),i=this._instantiationService.createInstance(cl,t.controlElement);return this.renderTemplateWithWidget(t,i)}renderValue(e,t,i){const n=wo(e),{key:s,objectProperties:r,objectPatternProperties:o,objectAdditionalProperties:c}=e.setting;t.objectDropdownWidget.setValue(n,{settingKey:s,showAddButton:c===!1?!hl(Object.keys(r??{}),n)||we(o):!0,keySuggester:fl(e),valueSuggester:ml(e)}),t.context=e,t.elementDisposables.add(Qt(()=>{t.objectDropdownWidget.cancelEdit()})),t.onChange=d=>{if(d&&!Bi(e,t,d,!1)){const g=bl(e,d);i(g)}else i(d)},Bi(e,t,e.value,!0)}}class Ml extends Po{constructor(){super(...arguments),this.templateId=Ao}renderTemplate(e){const t=this.renderCommonTemplate(null,e,"list"),i=this._instantiationService.createInstance(yo,t.controlElement);return this.renderTemplateWithWidget(t,i)}onDidChangeObject(e,t){e.context&&(super.onDidChangeObject(e,t),this._onDidFocusSetting.fire(e.context))}renderValue(e,t,i){const n=wo(e),{key:s}=e.setting;t.objectCheckboxWidget.setValue(n,{settingKey:s}),t.context=e,t.onChange=r=>{i(r)}}}class Fo extends C{renderTemplate(e){const t=this.renderCommonTemplate(null,e,"list"),i=this._instantiationService.createInstance(this.isExclude()?ol:al,t.controlElement);i.domNode.classList.add(C.CONTROL_CLASS),t.toDispose.add(i);const n={...t,includeExcludeWidget:i};return this.addSettingElementFocusHandler(n),t.toDispose.add(i.onDidChangeList(s=>this.onDidChangeIncludeExclude(n,s))),n}onDidChangeIncludeExclude(e,t){var i;if(e.context){let s=function(r){const o=Object.keys(r).sort((d,g)=>d.localeCompare(g)),c={};for(const d of o)c[d]=r[d];return c};const n={...e.context.scopeValue};t.originalItem.value.data.toString()in e.context.defaultValue?n[t.originalItem.value.data.toString()]=!1:delete n[t.originalItem.value.data.toString()],(i=t.item)!=null&&i.value&&(t.item.value.data.toString()in e.context.defaultValue&&!t.item.sibling?delete n[t.item.value.data.toString()]:n[t.item.value.data.toString()]=t.item.sibling?{when:t.item.sibling}:!0),this._onDidChangeSetting.fire({key:e.context.setting.key,value:Object.keys(n).length===0?void 0:s(n),type:e.context.valueType,manualReset:!1,scope:e.context.setting.scope})}}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){const n=ul(e);t.includeExcludeWidget.setValue(n),t.context=e,t.elementDisposables.add(Qt(()=>{t.includeExcludeWidget.cancelEdit()}))}}class Rl extends Fo{constructor(){super(...arguments),this.templateId=Lo}isExclude(){return!0}}class Al extends Fo{constructor(){super(...arguments),this.templateId=Mo}isExclude(){return!1}}const Ol=ut({inputBackground:Ai,inputForeground:Oi,inputBorder:bt});class Ko extends C{constructor(){super(...arguments),this.MULTILINE_MAX_HEIGHT=150}renderTemplate(e,t){const i=this.renderCommonTemplate(null,e,"text"),n=b(i.containerElement,A(".setting-item-validation-message")),s={flexibleHeight:t,flexibleWidth:!1,flexibleMaxHeight:this.MULTILINE_MAX_HEIGHT,inputBoxStyles:Ol},r=new Ve(i.controlElement,this._contextViewService,s);i.toDispose.add(r),i.toDispose.add(r.onDidChange(c=>{var d;(d=o.onChange)==null||d.call(o,c)})),i.toDispose.add(r),r.inputElement.classList.add(C.CONTROL_CLASS),r.inputElement.tabIndex=0;const o={...i,inputBox:r,validationErrorMessageElement:n};return this.addSettingElementFocusHandler(o),o}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){t.onChange=void 0,t.inputBox.value=e.value,t.inputBox.setAriaLabel(e.setting.key),t.onChange=n=>{Ki(e,t,!1)||i(n)},Ki(e,t,!0)}}class Nl extends Ko{constructor(){super(...arguments),this.templateId=xo}renderTemplate(e){const t=super.renderTemplate(e,!1);return t.toDispose.add(pt(t.inputBox.inputElement,_.KEY_DOWN,i=>{(i.equals(16)||i.equals(18))&&i.preventDefault()})),t}}class Wl extends Ko{constructor(){super(...arguments),this.templateId=To}renderTemplate(e){return super.renderTemplate(e,!0)}renderValue(e,t,i){const n=s=>{e.value=s,i(s)};super.renderValue(e,t,n),t.elementDisposables.add(t.inputBox.onDidHeightChange(s=>{t.containerElement.clientHeight&&this._onDidChangeSettingHeight.fire({element:e,height:t.containerElement.clientHeight})})),t.inputBox.layout()}}class Pl extends C{constructor(){super(...arguments),this.templateId=Io}renderTemplate(e){const t=this.renderCommonTemplate(null,e,"enum"),i=Dr({selectBackground:oo,selectForeground:ao,selectBorder:co,selectListBorder:lo}),n=new Lr([],0,this._contextViewService,i,{useCustomDrawn:!(et&&Mr.pointerEvents)});t.toDispose.add(n),n.render(t.controlElement);const s=t.controlElement.querySelector("select");s&&(s.classList.add(C.CONTROL_CLASS),s.tabIndex=0),t.toDispose.add(n.onDidSelect(c=>{var d;(d=o.onChange)==null||d.call(o,c.index)}));const r=t.containerElement.insertBefore(A(".setting-item-enumDescription"),t.descriptionElement.nextSibling),o={...t,selectBox:n,selectElement:s,enumDescriptionElement:r};return this.addSettingElementFocusHandler(o),o}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){const n=e.setting.enumItemLabels?[...e.setting.enumItemLabels]:[],s=e.setting.enumDescriptions?[...e.setting.enumDescriptions]:[],r=[...e.setting.enum],o=e.setting.enumDescriptionsAreMarkdown,c=new G;t.toDispose.add(c);let d=!1;r.includes(e.defaultValue)||(r.unshift(e.defaultValue),s.unshift(""),n.unshift(""),d=!0);const g=Fs(String(e.defaultValue)),h=r.map(String).map(Fs).map((m,p)=>{const y=s[p]&&(o?ms(s[p],!1):s[p]);return{text:n[p]?n[p]:m,detail:n[p]?m:"",description:y,descriptionIsMarkdown:o,descriptionMarkdownActionHandler:{callback:x=>{this._openerService.open(x).catch(Wr)},disposables:c},decoratorRight:m===g||d&&p===0?l("settings.Default","default"):""}});t.selectBox.setOptions(h),t.selectBox.setAriaLabel(e.setting.key);let f=r.indexOf(e.value);f===-1&&(f=0),t.onChange=void 0,t.selectBox.select(f),t.onChange=m=>{i(d&&m===0?e.defaultValue:r[m])},t.enumDescriptionElement.innerText=""}}const Fl=ut({inputBackground:Nd,inputForeground:Wd,inputBorder:Pd});class Kl extends C{constructor(){super(...arguments),this.templateId=ko}renderTemplate(e){const t=super.renderCommonTemplate(null,e,"number"),i=b(t.containerElement,A(".setting-item-validation-message")),n=new Ve(t.controlElement,this._contextViewService,{type:"number",inputBoxStyles:Fl});t.toDispose.add(n),t.toDispose.add(n.onDidChange(r=>{var o;(o=s.onChange)==null||o.call(s,r)})),t.toDispose.add(n),n.inputElement.classList.add(C.CONTROL_CLASS),n.inputElement.tabIndex=0;const s={...t,inputBox:n,validationErrorMessageElement:i};return this.addSettingElementFocusHandler(s),s}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){const n=e.valueType==="integer"||e.valueType==="nullable-integer"?parseInt:parseFloat,s=e.valueType==="nullable-integer"||e.valueType==="nullable-number"?r=>r===""?null:n(r):n;t.onChange=void 0,t.inputBox.value=typeof e.value=="number"?e.value.toString():"",t.inputBox.step=e.valueType.includes("integer")?"1":"any",t.inputBox.setAriaLabel(e.setting.key),t.onChange=r=>{Ki(e,t,!1)||i(s(r))},Ki(e,t,!0)}}class Bl extends C{constructor(){super(...arguments),this.templateId=_o}renderTemplate(e){e.classList.add("setting-item"),e.classList.add("setting-item-bool");const t=b(e,A(C.CONTENTS_SELECTOR));t.classList.add("settings-row-inner-container");const i=b(t,A(".setting-item-title")),n=b(i,A("span.setting-item-category")),s=b(i,A("span.setting-item-label")),r=new ct(s),o=this._instantiationService.createInstance(Fi,i),c=b(t,A(".setting-item-value-description")),d=b(c,A(".setting-item-bool-control")),g=b(c,A(".setting-item-description")),h=b(t,A(".setting-item-modified-indicator"));h.title=l("modified","The setting has been configured in the current scope.");const f=b(t,A(".setting-item-deprecation-message")),m=new G,p=new Rr({icon:ue.check,actionClassName:"setting-value-checkbox",isChecked:!0,title:"",...Ar});d.appendChild(p.domNode),m.add(p),m.add(p.onChange(()=>{E.onChange(p.checked)})),m.add(D(g,_.MOUSE_DOWN,S=>{S.target.tagName.toLowerCase()!=="a"&&(E.checkbox.checked=!E.checkbox.checked,E.onChange(p.checked)),Ze.stop(S)})),p.domNode.classList.add(C.CONTROL_CLASS);const y=b(t,A(".setting-toolbar-container")),x=this.renderSettingToolbar(y);m.add(x);const E={toDispose:m,elementDisposables:m.add(new G),containerElement:t,categoryElement:n,labelElement:r,controlElement:d,checkbox:p,descriptionElement:g,deprecationWarningElement:f,indicatorsLabel:o,toolbar:x};return this.addSettingElementFocusHandler(E),m.add(D(d,"mousedown",S=>S.stopPropagation())),m.add(D(i,_.MOUSE_ENTER,S=>t.classList.add("mouseover"))),m.add(D(i,_.MOUSE_LEAVE,S=>t.classList.remove("mouseover"))),E}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){t.onChange=void 0,t.checkbox.checked=e.value,t.checkbox.setTitle(e.setting.key),t.onChange=i}}class Vl extends C{constructor(){super(...arguments),this.templateId=Wo}renderTemplate(e){const t=super.renderCommonTemplate(null,e,"extension-toggle"),i=new He(t.containerElement,{title:!1,...$e});i.element.classList.add("setting-item-extension-toggle-button"),i.label=l("showExtension","Show Extension");const n={...t,actionButton:i};return this.addSettingElementFocusHandler(n),n}renderElement(e,t,i){super.renderSettingElement(e,t,i)}renderValue(e,t,i){t.elementDisposables.clear();const n=e.setting.displayExtensionId;t.elementDisposables.add(t.actionButton.onDidClick(async()=>{this._telemetryService.publicLog2("ManageExtensionClick",{extensionId:n}),this._commandService.executeCommand("extension.open",n)}))}}let On=class{constructor(e,t,i,n){this._instantiationService=e,this._contextMenuService=t,this._contextViewService=i,this._userDataSyncEnablementService=n,this._onDidChangeSetting=new I,this.settingActions=[new le("settings.resetSetting",l("resetSettingLabel","Reset Setting"),void 0,void 0,async c=>{c instanceof Z&&(c.isUntrusted||this._onDidChangeSetting.fire({key:c.setting.key,value:void 0,type:c.setting.type,manualReset:!0,scope:c.setting.scope}))}),new ot,this._instantiationService.createInstance($t),this._instantiationService.createInstance(zt)];const s=c=>this.getActionsForSetting(c),r=c=>[],o=[this._instantiationService.createInstance(Bl,this.settingActions,s),this._instantiationService.createInstance(Kl,this.settingActions,s),this._instantiationService.createInstance(Dl,this.settingActions,s),this._instantiationService.createInstance(Ht,this.settingActions,s),this._instantiationService.createInstance(Nl,this.settingActions,s),this._instantiationService.createInstance(Wl,this.settingActions,s),this._instantiationService.createInstance(Rl,this.settingActions,s),this._instantiationService.createInstance(Al,this.settingActions,s),this._instantiationService.createInstance(Pl,this.settingActions,s),this._instantiationService.createInstance(Ll,this.settingActions,s),this._instantiationService.createInstance(Ml,this.settingActions,s),this._instantiationService.createInstance(Vl,[],r)];this.onDidClickOverrideElement=he.any(...o.map(c=>c.onDidClickOverrideElement)),this.onDidChangeSetting=he.any(...o.map(c=>c.onDidChangeSetting),this._onDidChangeSetting.event),this.onDidOpenSettings=he.any(...o.map(c=>c.onDidOpenSettings)),this.onDidClickSettingLink=he.any(...o.map(c=>c.onDidClickSettingLink)),this.onDidFocusSetting=he.any(...o.map(c=>c.onDidFocusSetting)),this.onDidChangeSettingHeight=he.any(...o.map(c=>c.onDidChangeSettingHeight)),this.onApplyFilter=he.any(...o.map(c=>c.onApplyFilter)),this.allRenderers=[...o,this._instantiationService.createInstance(_l),this._instantiationService.createInstance(An)]}getActionsForSetting(e){return this._userDataSyncEnablementService.isEnabled()&&!e.disallowSyncIgnore?[new ot,this._instantiationService.createInstance(qt,e)]:[]}cancelSuggesters(){this._contextViewService.hideContextView()}showContextMenu(e,t){const i=t.querySelector(".monaco-toolbar");i&&this._contextMenuService.showContextMenu({getActions:()=>this.settingActions,getAnchor:()=>i,getActionsContext:()=>e})}getSettingDOMElementForDOMElement(e){const t=Ii(e,C.CONTENTS_CLASS);return t||null}getDOMElementsForSettingKey(e,t){return e.querySelectorAll(`[${C.SETTING_KEY_ATTR}="${t}"]`)}getKeyForDOMElementInSetting(e){const t=this.getSettingDOMElementForDOMElement(e);return t&&t.getAttribute(C.SETTING_KEY_ATTR)}getIdForDOMElementInSetting(e){const t=this.getSettingDOMElementForDOMElement(e);return t&&t.getAttribute(C.SETTING_ID_ATTR)}};On=v([u(0,j),u(1,vt),u(2,Xt),u(3,qi)],On);function Ki(a,e,t){if(a.setting.validator){const i=a.setting.validator(e.inputBox.value);if(i){e.containerElement.classList.add("invalid-input"),e.validationErrorMessageElement.innerText=i;const n=l("validationError","Validation Error.");return e.inputBox.inputElement.parentElement.setAttribute("aria-label",[n,i].join(" ")),t||ts(n+" "+i),!0}else e.inputBox.inputElement.parentElement.removeAttribute("aria-label")}return e.containerElement.classList.remove("invalid-input"),!1}function Bi(a,e,t,i){if(e.containerElement.classList.add("invalid-input"),a.setting.validator){const n=a.setting.validator(t);if(n&&n!==""){e.containerElement.classList.add("invalid-input"),e.validationErrorMessageElement.innerText=n;const s=l("validationError","Validation Error.");return e.containerElement.setAttribute("aria-label",[a.setting.key,s,n].join(" ")),i||ts(s+" "+n),!0}else e.containerElement.setAttribute("aria-label",a.setting.key),e.containerElement.classList.remove("invalid-input")}return!1}function Bo(a){for(let e=0;e<a.childNodes.length;e++){const t=a.childNodes.item(e);(t.tagName&&t.tagName.toLowerCase())==="img"?a.removeChild(t):Bo(t)}}function ms(a,e=!0){return a.replace(/`#([^#\s`]+)#`|'#([^#\s']+)#'/g,(t,i,n)=>{const s=i??n,r=bo(s),o=`${r.category}: ${r.label}`;return e?`[${o}](#${s} "${s}")`:`"${o}"`})}function Fs(a){return a&&a.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}let Vi=class{constructor(e,t){this.viewState=e,this.environmentService=t}filter(e,t){var i;if(this.viewState.filterToCategory&&e instanceof Z&&!this.settingContainedInGroup(e.setting,this.viewState.filterToCategory))return!1;if(e instanceof Z&&this.viewState.settingsTarget!==3){const n=!!this.environmentService.remoteAuthority;if(!e.matchesScope(this.viewState.settingsTarget,n))return!1}return e instanceof Q?typeof e.count=="number"?e.count>0:2:!(e instanceof ps&&((i=this.viewState.tagFilters)!=null&&i.size||this.viewState.filterToCategory))}settingContainedInGroup(e,t){return t.children.some(i=>i instanceof Q?this.settingContainedInGroup(e,i):i instanceof Z?i.setting.key===e.key:!1)}};Vi=v([u(1,wt)],Vi);class Ul extends pc{getTemplateId(e){if(e instanceof Q)return No;if(e instanceof Z)return e.valueType===w.ExtensionToggle?Wo:e.isConfigured&&Qr(e.value,e.setting.type)?Ei:e.valueType===w.Boolean?_o:e.valueType===w.Integer||e.valueType===w.Number||e.valueType===w.NullableInteger||e.valueType===w.NullableNumber?ko:e.valueType===w.MultilineString?To:e.valueType===w.String?xo:e.valueType===w.Enum?Io:e.valueType===w.Array?Do:e.valueType===w.Exclude?Lo:e.valueType===w.Include?Mo:e.valueType===w.Object?Ro:e.valueType===w.BooleanObject?Ao:(e.valueType===w.LanguageTag,Ei);if(e instanceof ps)return Oo;throw new Error("unknown element type: "+e)}hasDynamicHeight(e){return!(e instanceof Q)}estimateHeight(e){return e instanceof Q?42:e instanceof Z&&e.valueType===w.Boolean?78:104}}class Gl extends fc{isCollapsible(e){return!1}setCollapsed(e,t,i){return!1}}class jl{constructor(e,t,i){this.configurationService=e,this.languageService=t,this.userDataProfilesService=i}getAriaLabel(e){if(e instanceof Z){const t=[];if(t.push(`${e.displayCategory} ${e.displayLabel}.`),e.isConfigured){const s=l("settings.Modified","Modified.");t.push(s)}const i=gl(e,this.configurationService,this.userDataProfilesService,this.languageService);i.length&&t.push(`${i}.`);const n=ms(e.description,!1);return n.length&&t.push(n),t.join(" ")}else return e instanceof Q?e.label:e.id}getWidgetAriaLabel(){return l("settings","Settings")}}let Nn=class extends Pr{constructor(e,t,i,n,s,r,o,c,d){super("SettingsTree",e,new Ul,i,{horizontalScrolling:!1,supportDynamicHeights:!0,identityProvider:{getId(g){return g.id}},accessibilityProvider:new jl(r,c,d),styleController:g=>new Fr(Kr(e),g),filter:o.createInstance(Vi,t),smoothScrolling:r.getValue("workbench.list.smoothScrolling"),multipleSelectionSupport:!1,findWidgetEnabled:!1,renderIndentGuides:Br.None},o,n,s,r),this.getHTMLElement().classList.add("settings-editor-tree"),this.style(Vr({listBackground:J,listActiveSelectionBackground:J,listActiveSelectionForeground:st,listFocusAndSelectionBackground:J,listFocusAndSelectionForeground:st,listFocusBackground:J,listFocusForeground:st,listHoverForeground:st,listHoverBackground:J,listHoverOutline:J,listFocusOutline:J,listInactiveSelectionBackground:J,listInactiveSelectionForeground:st,listInactiveFocusBackground:J,listInactiveFocusOutline:J,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0})),this.disposables.add(r.onDidChangeConfiguration(g=>{g.affectsConfiguration("workbench.list.smoothScrolling")&&this.updateOptions({smoothScrolling:r.getValue("workbench.list.smoothScrolling")})}))}createModel(e,t,i){return new Gl(e,t,i)}};Nn=v([u(3,_e),u(4,Or),u(5,ie),u(6,j),u(7,Pe),u(8,Jt)],Nn);let $t=class Wn extends le{constructor(e){super(Wn.ID,Wn.LABEL),this.clipboardService=e}async run(e){return e&&await this.clipboardService.writeText(e.setting.key),Promise.resolve(void 0)}};$t.ID="settings.copySettingId";$t.LABEL=l("copySettingIdLabel","Copy Setting ID");$t=v([u(0,as)],$t);let zt=class Pn extends le{constructor(e){super(Pn.ID,Pn.LABEL),this.clipboardService=e}async run(e){if(e){const t=`"${e.setting.key}": ${JSON.stringify(e.value,void 0,"  ")}`;await this.clipboardService.writeText(t)}return Promise.resolve(void 0)}};zt.ID="settings.copySettingAsJSON";zt.LABEL=l("copySettingAsJSONLabel","Copy Setting as JSON");zt=v([u(0,as)],zt);let qt=class Fn extends le{constructor(e,t){super(Fn.ID,Fn.LABEL),this.setting=e,this.configService=t,this._register(he.filter(t.onDidChangeConfiguration,i=>i.affectsConfiguration("settingsSync.ignoredSettings"))(()=>this.update())),this.update()}async update(){const e=hn(_i(),this.configService);this.checked=!e.includes(this.setting.key)}async run(){let e=[...this.configService.getValue("settingsSync.ignoredSettings")];e=e.filter(s=>s!==this.setting.key&&s!==`-${this.setting.key}`);const i=_i().includes(this.setting.key),n=!this.checked;return n&&i&&e.push(`-${this.setting.key}`),!n&&!i&&e.push(this.setting.key),this.configService.updateValue("settingsSync.ignoredSettings",e.length?e:void 0,2),Promise.resolve(void 0)}};qt.ID="settings.stopSyncingSetting";qt.LABEL=l("stopSyncingSetting","Sync This Setting");qt=v([u(1,ie)],qt);const Ks=P;let Kn=class{constructor(e,t){this._viewState=e,this.environmentService=t,this._currentSearchModel=null}get settingsTreeRoot(){return this._settingsTreeRoot}set settingsTreeRoot(e){this._settingsTreeRoot=e,this.update()}get currentSearchModel(){return this._currentSearchModel}set currentSearchModel(e){this._currentSearchModel=e,this.update()}get children(){return this._settingsTreeRoot.children}update(){this._settingsTreeRoot&&this.updateGroupCount(this._settingsTreeRoot)}updateGroupCount(e){e.children.forEach(i=>{i instanceof Q&&this.updateGroupCount(i)});const t=e.children.filter(i=>i instanceof Q).reduce((i,n)=>i+n.count,0);e.count=t+this.getGroupCount(e)}getGroupCount(e){return e.children.filter(t=>{if(!(t instanceof Z)||this._currentSearchModel&&!this._currentSearchModel.root.containsSetting(t.setting.key))return!1;const i=!!this.environmentService.remoteAuthority;return t.matchesScope(this._viewState.settingsTarget,i)&&t.matchesAllTags(this._viewState.tagFilters)&&t.matchesAnyFeature(this._viewState.featureFilters)&&t.matchesAnyExtension(this._viewState.extensionFilters)&&t.matchesAnyId(this._viewState.idFilters)}).length}};Kn=v([u(1,wt)],Kn);const Vo="settings.toc.entry";class Hl{constructor(){this.templateId=Vo}renderTemplate(e){return{labelElement:b(e,Ks(".settings-toc-entry")),countElement:b(e,Ks(".settings-toc-count"))}}renderElement(e,t,i){const n=e.element,s=n.count,r=n.label;i.labelElement.textContent=r,i.labelElement.title=r,s?i.countElement.textContent=` (${s})`:i.countElement.textContent=""}disposeTemplate(e){}}class $l{getTemplateId(e){return Vo}getHeight(e){return 22}}function Uo(a,e){const t=a.children.filter(i=>i instanceof Q);return Ur.map(t,i=>{const n=i.children.some(s=>s instanceof Q);return{element:i,collapsed:void 0,collapsible:n,children:i instanceof Q?Uo(i):void 0}})}class zl{getWidgetAriaLabel(){return l({key:"settingsTOC",comment:["A label for the table of contents for the full settings list"]},"Settings Table of Contents")}getAriaLabel(e){return e&&e instanceof Q?l("groupRowAriaLabel","{0}, group",e.label):""}getAriaLevel(e){let t=1;for(;e instanceof Q&&e.parent;)t++,e=e.parent;return t}}let Bn=class extends Pr{constructor(e,t,i,n,s,r){const c={filter:r.createInstance(Vi,t),multipleSelectionSupport:!1,identityProvider:{getId(d){return d.id}},styleController:d=>new Fr(Kr(e),d),accessibilityProvider:r.createInstance(zl),collapseByDefault:!0,horizontalScrolling:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:Br.None};super("SettingsTOC",e,new $l,[new Hl],c,r,i,n,s),this.style(Vr({listBackground:J,listFocusOutline:Ct,listActiveSelectionBackground:J,listActiveSelectionForeground:Xe,listFocusAndSelectionBackground:J,listFocusAndSelectionForeground:Xe,listFocusBackground:J,listFocusForeground:Rs,listHoverForeground:Rs,listHoverBackground:J,listInactiveSelectionBackground:J,listInactiveSelectionForeground:Xe,listInactiveFocusBackground:J,listInactiveFocusOutline:J,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0}))}};Bn=v([u(2,_e),u(3,Or),u(4,ie),u(5,j)],Bn);let Vn=class extends mc{constructor(e,t,i,n){super(e,{getActions:()=>this.getActions()},n,{actionRunner:t,classNames:e.class,anchorAlignmentProvider:()=>1,menuAsChild:!0}),this.searchWidget=i,this.suggestController=Jn.get(this.searchWidget.inputWidget)}render(e){super.render(e)}doSearchWidgetAction(e,t){this.searchWidget.setValue(this.searchWidget.getValue().trimEnd()+" "+e),this.searchWidget.focus(),t&&this.suggestController&&this.suggestController.triggerSuggest()}createAction(e,t,i,n,s){return{id:e,label:t,tooltip:i,class:void 0,enabled:!0,checked:!1,run:()=>{this.doSearchWidgetAction(n,s)}}}createToggleAction(e,t,i,n){const r=this.searchWidget.getValue().split(" ").includes(n);return{id:e,label:t,tooltip:i,class:void 0,enabled:!0,checked:r,run:()=>{if(r){const o=this.searchWidget.getValue().split(" ").filter(c=>c!==n).join(" ");this.searchWidget.setValue(o)}else{const o=this.searchWidget.getValue().trimEnd(),c=o?o+" "+n:n;this.searchWidget.setValue(c)}this.searchWidget.focus()}}}getActions(){return[this.createToggleAction("modifiedSettingsSearch",l("modifiedSettingsSearch","Modified"),l("modifiedSettingsSearchTooltip","Add or remove modified settings filter"),`@${tt}`),this.createAction("extSettingsSearch",l("extSettingsSearch","Extension ID..."),l("extSettingsSearchTooltip","Add extension ID filter"),`@${Di}`,!0),this.createAction("featuresSettingsSearch",l("featureSettingsSearch","Feature..."),l("featureSettingsSearchTooltip","Add feature filter"),`@${de}`,!0),this.createAction("tagSettingsSearch",l("tagSettingsSearch","Tag..."),l("tagSettingsSearchTooltip","Add tag filter"),`@${bc}`,!0),this.createAction("langSettingsSearch",l("langSettingsSearch","Language..."),l("langSettingsSearchTooltip","Add language ID filter"),`@${Le}`,!0),this.createToggleAction("onlineSettingsSearch",l("onlineSettingsSearch","Online services"),l("onlineSettingsSearchTooltip","Show settings for online services"),"@tag:usesOnlineServices"),this.createToggleAction("policySettingsSearch",l("policySettingsSearch","Policy services"),l("policySettingsSearchTooltip","Show settings for policy services"),`@${ht}`)]}};Vn=v([u(3,vt)],Vn);function Go(a){return Ur.map(a.children,e=>({element:e,children:e instanceof Q?Go(e):void 0}))}const re=P,tn=l("SearchSettings.AriaLabel","Search settings"),ql="settingsEditorState";let N=class V extends dr{static shouldSettingUpdateFast(e){return Array.isArray(e)?!1:e===w.Enum||e===w.Array||e===w.BooleanObject||e===w.Object||e===w.Complex||e===w.Boolean||e===w.Exclude||e===w.Include}constructor(e,t,i,n,s,r,o,c,d,g,h,f,m,p,y,x,E,S,R,T,te){super(V.ID,e,n,g),this.configurationService=t,this.preferencesService=s,this.instantiationService=r,this.preferencesSearchService=o,this.logService=c,this.storageService=g,this.editorGroupService=h,this.userDataSyncWorkbenchService=f,this.userDataSyncEnablementService=m,this.workspaceTrustManagementService=p,this.extensionService=y,this.languageService=x,this.workbenchAssignmentService=S,this.productService=R,this.environmentService=T,this.extensionGalleryService=te,this.searchInProgress=null,this.pendingSettingUpdate=null,this._searchResultModel=null,this.searchResultLabel=null,this.lastSyncedLabel=null,this._currentFocusContext=0,this.hasWarnedMissingSettings=!1,this.tocFocusedElement=null,this.treeFocusedElement=null,this.settingsTreeScrollTop=0,this.installedExtensionIds=[],this.delayedFilterLogging=new fe(1e3),this.localSearchDelayer=new fe(300),this.remoteSearchThrottle=new kc(200),this.viewState={settingsTarget:3},this.settingFastUpdateDelayer=new fe(V.SETTING_UPDATE_FAST_DEBOUNCE),this.settingSlowUpdateDelayer=new fe(V.SETTING_UPDATE_SLOW_DEBOUNCE),this.searchInputDelayer=new fe(V.SEARCH_DEBOUNCE),this.updatedConfigSchemaDelayer=new fe(V.CONFIG_SCHEMA_UPDATE_DELAYER),this.inSettingsEditorContextKey=Te.bindTo(d),this.searchFocusContextKey=Tt.bindTo(d),this.tocRowFocused=Hr.bindTo(d),this.settingRowFocused=un.bindTo(d),this.scheduledRefreshes=new Map,this.editorMemento=this.getEditorMemento(h,i,ql),this._register(t.onDidChangeConfiguration(q=>{q.source!==7&&this.onConfigUpdate(q.affectedKeys)})),this._register(p.onDidChangeTrust(()=>{var q;(q=this.searchResultModel)==null||q.updateWorkspaceTrust(p.isWorkspaceTrusted()),this.settingsTreeModel&&(this.settingsTreeModel.updateWorkspaceTrust(p.isWorkspaceTrusted()),this.renderTree())})),this._register(t.onDidChangeRestrictedSettings(q=>{q.default.length&&this.currentSettingsModel&&this.updateElementsByKey(new Set(q.default))})),this.modelDisposables=this._register(new G),V.SUGGESTIONS.includes(`@${Le}`)||V.SUGGESTIONS.push(`@${Le}`),E.getInstalled().then(q=>{this.installedExtensionIds=q.filter(ne=>ne.manifest&&ne.manifest.contributes&&ne.manifest.contributes.configuration).map(ne=>ne.identifier.id)})}get minimumWidth(){return V.EDITOR_MIN_WIDTH}get maximumWidth(){return Number.POSITIVE_INFINITY}get minimumHeight(){return 180}set minimumWidth(e){}set maximumWidth(e){}get currentSettingsModel(){return this.searchResultModel||this.settingsTreeModel}get searchResultModel(){return this._searchResultModel}set searchResultModel(e){this._searchResultModel=e,this.rootElement.classList.toggle("search-mode",!!this._searchResultModel)}get focusedSettingDOMElement(){const e=this.settingsTree.getFocus()[0];if(e instanceof Z)return this.settingRenderers.getDOMElementsForSettingKey(this.settingsTree.getHTMLElement(),e.setting.key)[0]}get currentFocusContext(){return this._currentFocusContext}createEditor(e){e.setAttribute("tabindex","-1"),this.rootElement=b(e,re(".settings-editor",{tabindex:"-1"})),this.createHeader(this.rootElement),this.createBody(this.rootElement),this.addCtrlAInterceptor(this.rootElement),this.updateStyles()}async setInput(e,t,i,n){if(this.inSettingsEditorContextKey.set(!0),await super.setInput(e,t,i,n),await er(0),!this.input)return;const s=await this.input.resolve(t);if(!(n.isCancellationRequested||!(s instanceof Li))){if(this.modelDisposables.clear(),this.modelDisposables.add(s.onDidChangeGroups(()=>{this.updatedConfigSchemaDelayer.trigger(()=>{this.onConfigUpdate(void 0,!1,!0)})})),this.defaultSettingsEditorModel=s,t=t||mi({}),!this.viewState.settingsTarget||!this.settingsTargetsWidget.settingsTarget){const r=t.viewState&&t.viewState.settingsTarget;!t.target&&!r&&(t.target=3)}this._setOptions(t),this.onConfigUpdate(void 0,!0).then(()=>{this._register(e.onWillDispose(()=>{this.searchWidget.setValue("")})),this.updateTreeScrollSync()})}}restoreCachedState(){const e=this.group&&this.input&&this.editorMemento.loadEditorState(this.group,this.input);if(e&&typeof e.target=="object"&&(e.target=Y.revive(e.target)),e){const t=e.target;this.settingsTargetsWidget.settingsTarget=t,this.viewState.settingsTarget=t,this.searchWidget.setValue(e.searchQuery)}return this.input&&this.editorMemento.clearEditorState(this.input,this.group),yi(e)}getViewState(){return this.viewState}setOptions(e){super.setOptions(e),e&&this._setOptions(e)}_setOptions(e){e.focusSearch&&!et&&this.focusSearch();const t=e.viewState?e.viewState:void 0,i=(t==null?void 0:t.query)??e.query;i!==void 0&&(this.searchWidget.setValue(i),this.viewState.query=i);const n=e.folderUri??(t==null?void 0:t.settingsTarget)??e.target;n&&(this.settingsTargetsWidget.settingsTarget=n,this.viewState.settingsTarget=n)}clearInput(){this.inSettingsEditorContextKey.set(!1),super.clearInput()}layout(e){if(this.dimension=e,!this.isVisible())return;this.layoutSplitView(e);const i=Math.min(this.headerContainer.clientWidth,e.width)-24*2-10-this.countElement.clientWidth-this.controlsElement.clientWidth-12;this.searchWidget.layout(new is(i,20)),this.rootElement.classList.toggle("narrow-width",e.width<V.NARROW_TOTAL_WIDTH)}focus(){if(this._currentFocusContext===0)et||this.focusSearch();else if(this._currentFocusContext===3){const e=this.focusedSettingDOMElement;if(e){const t=e.querySelector(C.CONTROL_SELECTOR);if(t){t.focus();return}}}else this._currentFocusContext===2?this.settingsTree.domFocus():this._currentFocusContext===1&&this.tocTree.domFocus()}setEditorVisible(e,t){super.setEditorVisible(e,t),e||setTimeout(()=>{this.searchWidget.onHide()},0)}focusSettings(e=!1){if(this.settingsTree.getFocus().length||this.settingsTree.focusFirst(),this.settingsTree.domFocus(),e){const i=this.settingsTree.getHTMLElement().querySelector(`.focused ${C.CONTROL_SELECTOR}`);i&&i.focus()}}focusTOC(){this.tocTree.domFocus()}showContextMenu(){const e=this.settingsTree.getFocus()[0],t=this.focusedSettingDOMElement;t&&e instanceof Z&&this.settingRenderers.showContextMenu(e,t)}focusSearch(e,t=!0){e&&this.searchWidget&&this.searchWidget.setValue(e),this.searchWidget.focus(t)}clearSearchResults(){this.searchWidget.setValue(""),this.focusSearch()}clearSearchFilters(){const t=this.searchWidget.getValue().split(" ").filter(i=>i.length&&!V.SUGGESTIONS.some(n=>i.startsWith(n)));this.searchWidget.setValue(t.join(" "))}updateInputAriaLabel(){let e=tn;this.searchResultLabel&&(e+=`. ${this.searchResultLabel}`),this.lastSyncedLabel&&(e+=`. ${this.lastSyncedLabel}`),this.searchWidget.updateAriaLabel(e)}createHeader(e){this.headerContainer=b(e,re(".settings-header"));const t=b(this.headerContainer,re(".search-container")),i=new le($r,l("clearInput","Clear Settings Search Input"),oe.asClassName(so),!1,async()=>this.clearSearchResults()),n=new le(Ic,l("filterInput","Filter Settings"),oe.asClassName(Ld));this.searchWidget=this._register(this.instantiationService.createInstance(Ri,`${V.ID}.searchbox`,t,{triggerCharacters:["@",":"],provideResults:c=>{const d=c.split(/\s/g);return d[d.length-1].startsWith(`@${Le}`)?this.languageService.getRegisteredLanguageIds().map(h=>`@${Le}${h} `).sort().filter(h=>!c.includes(h)):d[d.length-1].startsWith(`@${Di}`)?this.installedExtensionIds.map(h=>`@${Di}${h} `).sort().filter(h=>!c.includes(h)):d[d.length-1].startsWith("@")?V.SUGGESTIONS.filter(g=>!c.includes(g)).map(g=>g.endsWith(":")?g:g+" "):[]}},tn,"settingseditor:searchinput"+V.NUM_INSTANCES++,{placeholderText:tn,focusContextKey:this.searchFocusContextKey,styleOverrides:{inputBorder:bt}})),this._register(this.searchWidget.onDidFocus(()=>{this._currentFocusContext=0})),this.countElement=b(t,P(".settings-count-widget.monaco-count-badge.long")),this.countElement.style.backgroundColor=X(Xn),this.countElement.style.color=X(Qn),this.countElement.style.border=`1px solid ${X(Zn)}`,this._register(this.searchWidget.onInputDidChange(()=>{const c=this.searchWidget.getValue();i.enabled=!!c,this.searchInputDelayer.trigger(()=>this.onSearchInputChanged())}));const s=b(this.headerContainer,re(".settings-header-controls"));s.style.borderColor=X(Od);const r=b(s,re(".settings-target-container"));if(this.settingsTargetsWidget=this._register(this.instantiationService.createInstance(Cn,r,{enableRemoteSettings:!0})),this.settingsTargetsWidget.settingsTarget=3,this.settingsTargetsWidget.onDidTargetChange(c=>this.onDidSettingsTargetChange(c)),this._register(D(r,_.KEY_DOWN,c=>{new Ge(c).keyCode===18&&this.focusSettings()})),this.userDataSyncWorkbenchService.enabled&&this.userDataSyncEnablementService.canToggleEnablement()){const c=this._register(this.instantiationService.createInstance(Un,s));this._register(c.onDidChangeLastSyncedLabel(d=>{this.lastSyncedLabel=d,this.updateInputAriaLabel()}))}this.controlsElement=b(t,P(".settings-clear-widget")),this._register(new $i(this.controlsElement,{animated:!1,actionViewItemProvider:c=>{if(c.id===n.id)return this.instantiationService.createInstance(Vn,c,this.actionRunner,this.searchWidget)}})).push([i,n],{label:!1,icon:!0})}onDidSettingsTargetChange(e){this.viewState.settingsTarget=e,this.onConfigUpdate(void 0,!0)}onDidClickSetting(e,t){var s;const i=(s=this.currentSettingsModel.getElementsByName(e.targetKey))==null?void 0:s[0];let n=!1;if(i){let r=.5;try{const o=this.settingsTree.getRelativeTop(e.source);o!==null&&(r=o)}catch{}this.viewState.filterToCategory&&e.source.displayCategory!==i.displayCategory&&this.tocTree.setFocus([]);try{this.settingsTree.reveal(i,r)}catch{n=!0}if(!n){setTimeout(()=>{this.settingsTree.setFocus([i])},50);const o=this.settingRenderers.getDOMElementsForSettingKey(this.settingsTree.getHTMLElement(),e.targetKey);if(o&&o[0]){const c=o[0].querySelector(C.CONTROL_SELECTOR);c&&c.focus()}}}!t&&(!i||n)&&this.triggerSearch("").then(()=>{this.searchWidget.setValue(""),this.onDidClickSetting(e,!0)})}switchToApplicationSettingsFile(){const e=fi(this.searchWidget.getValue()).query;return this.openSettingsFile({query:e},!0)}switchToSettingsFile(){const e=fi(this.searchWidget.getValue()).query;return this.openSettingsFile({query:e})}async openSettingsFile(e,t){var s;const i=this.settingsTargetsWidget.settingsTarget,n={jsonEditor:!0,...e};if(i===3)return e!=null&&e.revealSetting&&((s=ge.as(Ie.Configuration).getConfigurationProperties()[e==null?void 0:e.revealSetting.key])==null?void 0:s.scope)===1?this.preferencesService.openApplicationSettings(n):t?this.preferencesService.openApplicationSettings(n):this.preferencesService.openUserSettings(n);if(i===4)return this.preferencesService.openRemoteSettings(n);if(i===5)return this.preferencesService.openWorkspaceSettings(n);if(Y.isUri(i))return this.preferencesService.openFolderSettings({folderUri:i,...n})}createBody(e){this.bodyContainer=b(e,re(".settings-body")),this.noResultsMessage=b(this.bodyContainer,re(".no-results-message")),this.noResultsMessage.innerText=l("noResults","No Settings Found"),this.clearFilterLinkContainer=re("span.clear-search-filters"),this.clearFilterLinkContainer.textContent=" - ";const t=b(this.clearFilterLinkContainer,re("a.pointer.prominent",{tabindex:0},l("clearSearchFilters","Clear Filters")));this._register(D(t,_.CLICK,s=>{Ze.stop(s,!1),this.clearSearchFilters()})),b(this.noResultsMessage,this.clearFilterLinkContainer),this.noResultsMessage.style.color=X(_c),this.tocTreeContainer=re(".settings-toc-container"),this.settingsTreeContainer=re(".settings-tree-container"),this.createTOC(this.tocTreeContainer),this.createSettingsTree(this.settingsTreeContainer),this.splitView=new Dc(this.bodyContainer,{orientation:1,proportionalLayout:!0});const i=this.storageService.getNumber("settingsEditor2.splitViewWidth",0,V.TOC_RESET_WIDTH);this.splitView.addView({onDidChange:he.None,element:this.tocTreeContainer,minimumSize:V.TOC_MIN_WIDTH,maximumSize:Number.POSITIVE_INFINITY,layout:(s,r,o)=>{this.tocTreeContainer.style.width=`${s}px`,this.tocTree.layout(o,s)}},i,void 0,!0),this.splitView.addView({onDidChange:he.None,element:this.settingsTreeContainer,minimumSize:V.EDITOR_MIN_WIDTH,maximumSize:Number.POSITIVE_INFINITY,layout:(s,r,o)=>{this.settingsTreeContainer.style.width=`${s}px`,this.settingsTree.layout(o,s)}},Lc.Distribute,void 0,!0),this._register(this.splitView.onDidSashReset(()=>{const s=this.splitView.getViewSize(0)+this.splitView.getViewSize(1);this.splitView.resizeView(0,V.TOC_RESET_WIDTH),this.splitView.resizeView(1,s-V.TOC_RESET_WIDTH)})),this._register(this.splitView.onDidSashChange(()=>{const s=this.splitView.getViewSize(0);this.storageService.store("settingsEditor2.splitViewWidth",s,0,0)}));const n=this.theme.getColor(As);this.splitView.style({separatorBorder:n})}addCtrlAInterceptor(e){this._register(pt(e,_.KEY_DOWN,t=>{t.keyCode===31&&(ss?t.metaKey:t.ctrlKey)&&t.target.tagName!=="TEXTAREA"&&t.target.tagName!=="INPUT"&&(t.browserEvent.stopPropagation(),t.browserEvent.preventDefault())}))}createTOC(e){this.tocTreeModel=this.instantiationService.createInstance(Kn,this.viewState),this.tocTree=this._register(this.instantiationService.createInstance(Bn,b(e,re(".settings-toc-wrapper",{role:"navigation","aria-label":l("settings","Settings")})),this.viewState)),this._register(this.tocTree.onDidFocus(()=>{this._currentFocusContext=1})),this._register(this.tocTree.onDidChangeFocus(t=>{var n;const i=yi((n=t.elements)==null?void 0:n[0]);this.tocFocusedElement!==i&&(this.tocFocusedElement=i,this.tocTree.setSelection(i?[i]:[]),this.searchResultModel?this.viewState.filterToCategory!==i&&(this.viewState.filterToCategory=zn(i),this.renderTree(void 0,!0),this.settingsTree.scrollTop=0):i&&(!t.browserEvent||!t.browserEvent.fromScroll)&&(this.settingsTree.reveal(i,0),this.settingsTree.setFocus([i])))})),this._register(this.tocTree.onDidFocus(()=>{this.tocRowFocused.set(!0)})),this._register(this.tocTree.onDidBlur(()=>{this.tocRowFocused.set(!1)}))}applyFilter(e){if(this.searchWidget&&!this.searchWidget.getValue().includes(e)){const t=`${e} ${this.searchWidget.getValue().trimStart()}`;this.focusSearch(t,!1)}}removeLanguageFilters(){if(this.searchWidget&&this.searchWidget.getValue().includes(`@${Le}`)){const t=this.searchWidget.getValue().split(" ").filter(i=>!i.startsWith(`@${Le}`)).join(" ");this.focusSearch(t,!1)}}createSettingsTree(e){this.settingRenderers=this.instantiationService.createInstance(On),this._register(this.settingRenderers.onDidChangeSetting(t=>this.onDidChangeSetting(t.key,t.value,t.type,t.manualReset,t.scope))),this._register(this.settingRenderers.onDidOpenSettings(t=>{this.openSettingsFile({revealSetting:{key:t,edit:!0}})})),this._register(this.settingRenderers.onDidClickSettingLink(t=>this.onDidClickSetting(t))),this._register(this.settingRenderers.onDidFocusSetting(t=>{this.settingsTree.setFocus([t]),this._currentFocusContext=3,this.settingRowFocused.set(!1)})),this._register(this.settingRenderers.onDidChangeSettingHeight(t=>{const{element:i,height:n}=t;try{this.settingsTree.updateElementHeight(i,n)}catch{}})),this._register(this.settingRenderers.onApplyFilter(t=>this.applyFilter(t))),this._register(this.settingRenderers.onDidClickOverrideElement(t=>{this.removeLanguageFilters(),t.language&&this.applyFilter(`@${Le}${t.language}`),t.scope==="workspace"?this.settingsTargetsWidget.updateTarget(5):t.scope==="user"?this.settingsTargetsWidget.updateTarget(3):t.scope==="remote"&&this.settingsTargetsWidget.updateTarget(4),this.applyFilter(`@${Gr}${t.settingKey}`)})),this.settingsTree=this._register(this.instantiationService.createInstance(Nn,e,this.viewState,this.settingRenderers.allRenderers)),this._register(this.settingsTree.onDidScroll(()=>{this.settingsTree.scrollTop!==this.settingsTreeScrollTop&&(this.settingsTreeScrollTop=this.settingsTree.scrollTop,setTimeout(()=>{this.updateTreeScrollSync()},0))})),this._register(this.settingsTree.onDidFocus(()=>{var i;const t=(i=document.activeElement)==null?void 0:i.classList;t&&t.contains("monaco-list")&&t.contains("settings-editor-tree")&&(this._currentFocusContext=2,this.settingRowFocused.set(!0),this.treeFocusedElement??(this.treeFocusedElement=yi(this.settingsTree.firstVisibleElement)),this.treeFocusedElement&&(this.treeFocusedElement.tabbable=!0))})),this._register(this.settingsTree.onDidBlur(()=>{this.settingRowFocused.set(!1),this.treeFocusedElement=null})),this._register(this.settingsTree.onDidChangeFocus(t=>{const i=t.elements[0];this.treeFocusedElement!==i&&(this.treeFocusedElement&&(this.treeFocusedElement.tabbable=!1),this.treeFocusedElement=i,this.treeFocusedElement&&(this.treeFocusedElement.tabbable=!0),this.settingsTree.setSelection(i?[i]:[]))}))}onDidChangeSetting(e,t,i,n,s){const o=fi(this.searchWidget.getValue()).languageFilter;(n||this.pendingSettingUpdate&&this.pendingSettingUpdate.key!==e)&&this.updateChangedSetting(e,t,n,o,s),this.pendingSettingUpdate={key:e,value:t,languageFilter:o},V.shouldSettingUpdateFast(i)?this.settingFastUpdateDelayer.trigger(()=>this.updateChangedSetting(e,t,n,o,s)):this.settingSlowUpdateDelayer.trigger(()=>this.updateChangedSetting(e,t,n,o,s))}updateTreeScrollSync(){if(this.settingRenderers.cancelSuggesters(),this.searchResultModel||!this.tocTreeModel)return;const e=this.settingsTree.firstVisibleElement,t=e instanceof Z?e.parent:e instanceof Q?e:null;let i=!0;try{this.tocTree.getNode(t)}catch{i=!1}if(i&&t&&this.tocTree.getSelection()[0]!==t){const n=this.getAncestors(t);n.forEach(o=>this.tocTree.expand(o)),this.tocTree.reveal(t);const s=this.tocTree.getRelativeTop(t);if(typeof s!="number")return;this.tocTree.collapseAll(),n.forEach(o=>this.tocTree.expand(o)),s<0||s>1?this.tocTree.reveal(t):this.tocTree.reveal(t,s),this.tocTree.expand(t),this.tocTree.setSelection([t]);const r=new KeyboardEvent("keydown");r.fromScroll=!0,this.tocTree.setFocus([t],r)}}getAncestors(e){const t=[];for(;e.parent;)e.parent.id!=="root"&&t.push(e.parent),e=e.parent;return t.reverse()}updateChangedSetting(e,t,i,n,s){const r=this.settingsTargetsWidget.settingsTarget,o=Y.isUri(r)?r:void 0,c=(o?6:r)??3,d={resource:o,overrideIdentifiers:n?[n]:void 0},h=c===5||c===6||!!n,f=h?i:t===void 0,m=this.configurationService.inspect(e,d);return!h&&m.defaultValue===t&&(t=void 0),this.configurationService.updateValue(e,t,d,c,{handleDirtyFile:"save"}).then(()=>{const p=this.searchWidget.getValue();p.includes(`@${tt}`)&&this.refreshTOCTree(),this.renderTree(e,f);const y={key:e,query:p,searchResults:this.searchResultModel&&this.searchResultModel.getUniqueResults(),rawResults:this.searchResultModel&&this.searchResultModel.getRawResults(),showConfiguredOnly:!!this.viewState.tagFilters&&this.viewState.tagFilters.has(tt),isReset:typeof t>"u",settingsTarget:this.settingsTargetsWidget.settingsTarget};return this.reportModifiedSetting(y)})}reportModifiedSetting(e){this.pendingSettingUpdate=null;let t,i,n;if(e.searchResults){const o=e.searchResults[1],c=e.searchResults[0],d=c.filterMatches.findIndex(g=>g.setting.key===e.key);if(t=d>=0?"local":"remote",n=d>=0?d:o&&o.filterMatches.findIndex(g=>g.setting.key===e.key)+c.filterMatches.length,this.searchResultModel){const g=this.searchResultModel.getRawResults();if(g[1]){const h=g[1].filterMatches.findIndex(f=>f.setting.key===e.key);i=h>=0?h:void 0}}}const s=e.settingsTarget===3?"user":e.settingsTarget===4?"user_remote":e.settingsTarget===5?"workspace":"folder",r={key:e.key,groupId:t,nlpIndex:i,displayIndex:n,showConfiguredOnly:e.showConfiguredOnly,isReset:e.isReset,target:s};this.telemetryService.publicLog2("settingsEditor.settingModified",r)}onSearchModeToggled(){this.rootElement.classList.remove("no-toc-search"),this.configurationService.getValue("workbench.settings.settingsSearchTocBehavior")==="hide"&&this.rootElement.classList.toggle("no-toc-search",!!this.searchResultModel)}scheduleRefresh(e,t=""){if(t&&this.scheduledRefreshes.has(t))return;t||(_t(this.scheduledRefreshes.values()),this.scheduledRefreshes.clear());const i=es(e);this.scheduledRefreshes.set(t,i),i.onDidBlur(()=>{i.dispose(),this.scheduledRefreshes.delete(t),this.onConfigUpdate(new Set([t]))})}addOrRemoveManageExtensionSetting(e,t,i){const n=i.filter(r=>{var c;const o=(c=r.extensionInfo)==null?void 0:c.id.toLowerCase();return o===e.stableExtensionId.toLowerCase()||o===e.prereleaseExtensionId.toLowerCase()}),s=e.displayExtensionId;if(n.length){if(n.length>=2){const r=n.findIndex(o=>o.sections.length===1&&o.sections[0].settings.length===1&&o.sections[0].settings[0].displayExtensionId);r!==-1&&i.splice(r,1)}}else{const r={sections:[{settings:[e]}],id:s,title:e.extensionGroupTitle,titleRange:K,range:K,extensionInfo:{id:s,displayName:t==null?void 0:t.displayName}};return i.push(r),r}}async onConfigUpdate(e,t=!1,i=!1){var f,m;if(e&&this.settingsTreeModel)return this.updateElementsByKey(e);if(!this.defaultSettingsEditorModel)return;const n=this.defaultSettingsEditorModel.settingsGroups.slice(1),s=n.filter(p=>!p.extensionInfo),r=Ns(fo,s,this.logService),o=r.tree;if(r.leftoverSettings.size&&!this.hasWarnedMissingSettings){const p=[];r.leftoverSettings.forEach(y=>{p.push(y.key)}),this.logService.warn(`SettingsEditor2: Settings not included in settingsLayout.ts: ${p.join(", ")}`),this.hasWarnedMissingSettings=!0}const c=[],d=await kr(this.workbenchAssignmentService,this.environmentService,this.productService);if(d&&n.filter(p=>p.extensionInfo).length)for(const p in d.settingsEditorRecommendedExtensions){const y=d.settingsEditorRecommendedExtensions[p].onSettingsEditorOpen.prerelease,x=typeof y=="string"&&this.productService.quality!=="stable"?y:p,[E]=await this.extensionGalleryService.getExtensions([{id:x}],ws.None);if(!E)continue;let S;const R=await this.extensionGalleryService.getManifest(E,ws.None),T=(f=R==null?void 0:R.contributes)==null?void 0:f.configuration;Array.isArray(T)?T.length===1&&(S=T[0].title):S=T==null?void 0:T.title;const te=(E==null?void 0:E.displayName)??(E==null?void 0:E.name)??x,q=`${p}.manageExtension`,ne={range:K,key:q,keyRange:K,value:null,valueRange:K,description:[(E==null?void 0:E.description)||""],descriptionIsMarkdown:!1,descriptionRanges:[],title:te,scope:3,type:"null",displayExtensionId:x,stableExtensionId:p,prereleaseExtensionId:typeof y=="string"?y:p,extensionGroupTitle:S??te},be=this.addOrRemoveManageExtensionSetting(ne,E,n);be&&c.push(be)}o.children.push(await wl(this.extensionService,n.filter(p=>p.extensionInfo)));const g=await Gd(this.workbenchAssignmentService,this.environmentService,this.productService),h=Ns(g,n,this.logService);if(o.children.unshift(h.tree),d&&this.defaultSettingsEditorModel.setAdditionalGroups(c),!this.workspaceTrustManagementService.isWorkspaceTrusted()&&(this.viewState.settingsTarget instanceof Y||this.viewState.settingsTarget===5)){const p=vl(n,this.viewState.settingsTarget,this.viewState.languageFilter,this.configurationService);p.length&&o.children.unshift({id:"workspaceTrust",label:l("settings require trust","Workspace Trust"),settings:p})}if((m=this.searchResultModel)==null||m.updateChildren(),this.settingsTreeModel){if(this.settingsTreeModel.update(o),i&&this.searchResultModel)return await this.onSearchInputChanged();this.refreshTOCTree(),this.renderTree(void 0,t)}else{this.settingsTreeModel=this.instantiationService.createInstance(Wi,this.viewState,this.workspaceTrustManagementService.isWorkspaceTrusted()),this.settingsTreeModel.update(o),this.tocTreeModel.settingsTreeRoot=this.settingsTreeModel.root;const p=this.viewState.query?void 0:this.restoreCachedState();p!=null&&p.searchQuery||this.searchWidget.getValue()?await this.onSearchInputChanged():(this.refreshTOCTree(),this.refreshTree(),this.tocTree.collapseAll())}}updateElementsByKey(e){if(e.size)this.searchResultModel&&e.forEach(t=>this.searchResultModel.updateElementsByName(t)),this.settingsTreeModel&&e.forEach(t=>this.settingsTreeModel.updateElementsByName(t)),e.forEach(t=>this.renderTree(t));else return this.renderTree()}getActiveControlInSettingsTree(){return document.activeElement&&_r(document.activeElement,this.settingsTree.getHTMLElement())?document.activeElement:null}renderTree(e,t=!1){if(!t&&e&&this.scheduledRefreshes.has(e)){this.updateModifiedLabelForKey(e);return}if(this.contextViewFocused()){const s=document.querySelector(".context-view");s&&this.scheduleRefresh(s,e);return}const i=this.getActiveControlInSettingsTree(),n=i&&this.settingRenderers.getSettingDOMElementForDOMElement(i);if(n&&!t)if(e){if(n.getAttribute(C.SETTING_KEY_ATTR)===e&&n.parentElement&&!n.parentElement.classList.contains("setting-item-list")){this.updateModifiedLabelForKey(e),this.scheduleRefresh(n,e);return}}else{this.scheduleRefresh(n);return}if(this.renderResultCountMessages(),e){const s=this.currentSettingsModel.getElementsByName(e);if(s&&s.length)this.refreshTree();else return}else this.refreshTree()}contextViewFocused(){return!!Ii(document.activeElement,"context-view")}refreshTree(){this.isVisible()&&this.settingsTree.setChildren(null,Go(this.currentSettingsModel.root))}refreshTOCTree(){this.isVisible()&&(this.tocTreeModel.update(),this.tocTree.setChildren(null,Uo(this.tocTreeModel)))}updateModifiedLabelForKey(e){const t=this.currentSettingsModel.getElementsByName(e),i=t&&t[0]&&t[0].isConfigured,n=this.settingRenderers.getDOMElementsForSettingKey(this.settingsTree.getHTMLElement(),e);n&&n[0]&&n[0].classList.toggle("is-configured",!!i)}async onSearchInputChanged(){if(!this.currentSettingsModel)return;const e=this.searchWidget.getValue().trim();this.viewState.query=e,this.delayedFilterLogging.cancel(),await this.triggerSearch(e.replace(/\u203A/g," ")),e&&this.searchResultModel&&this.delayedFilterLogging.trigger(()=>this.reportFilteringUsed(this.searchResultModel.getUniqueResults()))}parseSettingFromJSON(e){const t=e.match(/"([a-zA-Z.]+)": /);return t&&t[1]}triggerSearch(e){if(this.viewState.tagFilters=new Set,this.viewState.extensionFilters=new Set,this.viewState.featureFilters=new Set,this.viewState.idFilters=new Set,this.viewState.languageFilter=void 0,e){const t=fi(e);e=t.query,t.tags.forEach(i=>this.viewState.tagFilters.add(i)),t.extensionFilters.forEach(i=>this.viewState.extensionFilters.add(i)),t.featureFilters.forEach(i=>this.viewState.featureFilters.add(i)),t.idFilters.forEach(i=>this.viewState.idFilters.add(i)),this.viewState.languageFilter=t.languageFilter}return this.settingsTargetsWidget.updateLanguageFilterIndicators(this.viewState.languageFilter),e&&e!=="@"?(e=this.parseSettingFromJSON(e)||e,this.triggerFilterPreferences(e)):(this.viewState.tagFilters.size||this.viewState.extensionFilters.size||this.viewState.featureFilters.size||this.viewState.idFilters.size||this.viewState.languageFilter?this.searchResultModel=this.createFilterModel():this.searchResultModel=null,this.localSearchDelayer.cancel(),this.remoteSearchThrottle.cancel(),this.searchInProgress&&(this.searchInProgress.cancel(),this.searchInProgress.dispose(),this.searchInProgress=null),this.tocTree.setFocus([]),this.viewState.filterToCategory=void 0,this.tocTreeModel.currentSearchModel=this.searchResultModel,this.onSearchModeToggled(),this.searchResultModel?(this.tocTree.setSelection([]),this.tocTree.expandAll(),this.refreshTOCTree(),this.renderResultCountMessages(),this.refreshTree()):(this.tocTree.collapseAll(),this.refreshTOCTree(),this.renderResultCountMessages(),this.refreshTree()),Promise.resolve())}createFilterModel(){const e=this.instantiationService.createInstance(Pi,this.viewState,this.workspaceTrustManagementService.isWorkspaceTrusted()),t={filterMatches:[]};for(const i of this.defaultSettingsEditorModel.settingsGroups.slice(1))for(const n of i.sections)for(const s of n.settings)t.filterMatches.push({setting:s,matches:[],matchType:It.None,score:0});return e.setResult(0,t),e}reportFilteringUsed(e){const t=e[1],i=t==null?void 0:t.metadata,n={nlpResult:i==null?void 0:i.duration},s={},r=e[0];r&&(s.filterResult=r.filterMatches.length),t&&(s.nlpResult=t.filterMatches.length);const o=i==null?void 0:i.requestCount,c={"durations.nlpResult":n.nlpResult,"counts.nlpResult":s.nlpResult,"counts.filterResult":s.filterResult,requestCount:o};this.telemetryService.publicLog2("settingsEditor.filter",c)}triggerFilterPreferences(e){this.searchInProgress&&(this.searchInProgress.cancel(),this.searchInProgress=null);const t=this.searchInProgress=new Mc;return this.localSearchDelayer.trigger(()=>t&&!t.token.isCancellationRequested?this.localFilterPreferences(e).then(i=>{i&&!i.exactMatch&&this.remoteSearchThrottle.trigger(()=>t&&!t.token.isCancellationRequested?this.remoteSearchPreferences(e,this.searchInProgress.token):Promise.resolve())}):Promise.resolve())}localFilterPreferences(e,t){const i=this.preferencesSearchService.getLocalSearchProvider(e);return this.filterOrSearchPreferences(e,0,i,t)}remoteSearchPreferences(e,t){const i=this.preferencesSearchService.getRemoteSearchProvider(e),n=this.preferencesSearchService.getRemoteSearchProvider(e,!0);return Promise.all([this.filterOrSearchPreferences(e,1,i,t),this.filterOrSearchPreferences(e,2,n,t)]).then(()=>{})}filterOrSearchPreferences(e,t,i,n){return this._filterOrSearchPreferencesModel(e,this.defaultSettingsEditorModel,i,n).then(s=>n&&n.isCancellationRequested?null:(this.searchResultModel?(this.searchResultModel.setResult(t,s),this.tocTreeModel.update()):(this.searchResultModel=this.instantiationService.createInstance(Pi,this.viewState,this.workspaceTrustManagementService.isWorkspaceTrusted()),this.searchResultModel.setResult(t,s),this.tocTreeModel.currentSearchModel=this.searchResultModel,this.onSearchModeToggled()),t===0&&(this.tocTree.setFocus([]),this.viewState.filterToCategory=void 0,this.tocTree.expandAll()),this.settingsTree.scrollTop=0,this.refreshTOCTree(),this.renderTree(void 0,!0),s))}renderResultCountMessages(){if(this.currentSettingsModel)if(this.clearFilterLinkContainer.style.display=this.viewState.tagFilters&&this.viewState.tagFilters.size>0?"initial":"none",this.searchResultModel){const e=this.searchResultModel.getUniqueResultsCount();let t;switch(e){case 0:t=l("noResults","No Settings Found");break;case 1:t=l("oneResult","1 Setting Found");break;default:t=l("moreThanOneResult","{0} Settings Found",e)}this.searchResultLabel=t,this.updateInputAriaLabel(),this.countElement.innerText=t,Rc(t),this.countElement.style.display!=="block"&&(this.countElement.style.display="block",this.layout(this.dimension)),this.rootElement.classList.toggle("no-results",e===0),this.splitView.el.style.visibility=e===0?"hidden":"visible"}else{this.countElement.style.display!=="none"&&(this.searchResultLabel=null,this.updateInputAriaLabel(),this.countElement.style.display="none",this.layout(this.dimension)),this.rootElement.classList.remove("no-results"),this.splitView.el.style.visibility="visible";return}}_filterOrSearchPreferencesModel(e,t,i,n){return(i?i.searchModel(t,n):Promise.resolve(null)).then(void 0,r=>Ac(r)?Promise.reject(r):null)}layoutSplitView(e){const t=e.height-97;this.splitView.el.style.height=`${t}px`,this.splitView.layout(this.bodyContainer.clientWidth,t);const i=this.splitView.isViewVisible(0),n=this.bodyContainer.clientWidth>=V.NARROW_TOTAL_WIDTH;this.splitView.setViewVisible(0,n),!i&&n&&this.bodyContainer.clientWidth>=V.EDITOR_MIN_WIDTH+V.TOC_RESET_WIDTH&&this.splitView.resizeView(0,V.TOC_RESET_WIDTH),this.splitView.style({separatorBorder:n?this.theme.getColor(As):rt.transparent})}saveState(){if(this.isVisible()){const e=this.searchWidget.getValue().trim(),t=this.settingsTargetsWidget.settingsTarget;this.group&&this.input&&this.editorMemento.saveEditorState(this.group,this.input,{searchQuery:e,target:t})}else this.group&&this.input&&this.editorMemento.clearEditorState(this.input,this.group);super.saveState()}};N.ID="workbench.editor.settings2";N.NUM_INSTANCES=0;N.SEARCH_DEBOUNCE=200;N.SETTING_UPDATE_FAST_DEBOUNCE=200;N.SETTING_UPDATE_SLOW_DEBOUNCE=1e3;N.CONFIG_SCHEMA_UPDATE_DELAYER=500;N.TOC_MIN_WIDTH=100;N.TOC_RESET_WIDTH=200;N.EDITOR_MIN_WIDTH=500;N.NARROW_TOTAL_WIDTH=N.TOC_RESET_WIDTH+N.EDITOR_MIN_WIDTH;N.SUGGESTIONS=[`@${tt}`,"@tag:notebookLayout","@tag:notebookOutputLayout",`@tag:${Ir}`,`@tag:${yc}`,"@tag:sync","@tag:usesOnlineServices","@tag:telemetry","@tag:accessibility",`@${Gr}`,`@${Di}`,`@${de}scm`,`@${de}explorer`,`@${de}search`,`@${de}debug`,`@${de}extensions`,`@${de}terminal`,`@${de}task`,`@${de}problems`,`@${de}output`,`@${de}comments`,`@${de}remote`,`@${de}timeline`,`@${de}notebook`,`@${ht}`];N=v([u(0,os),u(1,ds),u(2,Sc),u(3,zi),u(4,F),u(5,j),u(6,jr),u(7,vc),u(8,_e),u(9,ar),u(10,zs),u(11,wc),u(12,qi),u(13,Tr),u(14,Ui),u(15,Pe),u(16,Qs),u(17,Ec),u(18,Yt),u(19,Cc),u(20,xc)],N);let Un=class extends ee{constructor(e,t,i,n){super(),this.commandService=t,this.userDataSyncService=i,this.userDataSyncEnablementService=n,this._onDidChangeLastSyncedLabel=this._register(new I),this.onDidChangeLastSyncedLabel=this._onDidChangeLastSyncedLabel.event;const s=b(e,re(".settings-right-controls")),r=b(s,re(".turn-on-sync"));this.turnOnSyncButton=this._register(new He(r,{title:!0,...$e})),this.lastSyncedLabel=b(s,re(".last-synced-label")),gi(this.lastSyncedLabel),this.turnOnSyncButton.enabled=!0,this.turnOnSyncButton.label=l("turnOnSyncButton","Turn on Settings Sync"),gi(this.turnOnSyncButton.element),this._register(this.turnOnSyncButton.onDidClick(async()=>{await this.commandService.executeCommand("workbench.userDataSync.actions.turnOn")})),this.updateLastSyncedTime(),this._register(this.userDataSyncService.onDidChangeLastSyncTime(()=>{this.updateLastSyncedTime()})),this._register(new Oc).cancelAndSet(()=>this.updateLastSyncedTime(),60*1e3),this.update(),this._register(this.userDataSyncService.onDidChangeStatus(()=>{this.update()})),this._register(this.userDataSyncEnablementService.onDidChangeEnablement(()=>{this.update()}))}updateLastSyncedTime(){const e=this.userDataSyncService.lastSyncTime;let t;if(typeof e=="number"){const i=Nc(e,!0,void 0,!0);t=l("lastSyncedLabel","Last synced: {0}",i)}else t="";this.lastSyncedLabel.textContent=t,this._onDidChangeLastSyncedLabel.fire(t)}update(){this.userDataSyncService.status!=="uninitialized"&&(this.userDataSyncEnablementService.isEnabled()||this.userDataSyncService.status!=="idle"?(Es(this.lastSyncedLabel),gi(this.turnOnSyncButton.element)):(gi(this.lastSyncedLabel),Es(this.turnOnSyncButton.element)))}};Un=v([u(1,ft),u(2,Tc),u(3,qi)],Un);const nn=ge.as(Wc.JSONContribution);let Gn=class{constructor(e,t,i,n,s,r,o,c,d){this.modelService=e,this.textModelResolverService=t,this.preferencesService=i,this.languageService=n,this.userDataProfileService=s,this.workspaceService=r,this.configurationService=o,this.editorResolverService=c,this.textEditorService=d,this.settingsListener=this.configurationService.onDidChangeConfiguration(g=>{(g.affectsConfiguration(an)||g.affectsConfiguration(cn))&&this.handleSettingsEditorRegistration()}),this.handleSettingsEditorRegistration(),this.start()}handleSettingsEditorRegistration(){_t(this.editorOpeningListener),(this.configurationService.getValue(an)||this.configurationService.getValue(cn))&&(this.editorOpeningListener=this.editorResolverService.registerEditor("**/settings.json",{id:Xs.ID,label:l("splitSettingsEditorLabel","Split Settings Editor"),priority:Kc.builtin},{},{createEditorInput:({resource:e,options:t})=>{if(je(e,this.userDataProfileService.currentProfile.settingsResource))return{editor:this.preferencesService.createSplitJsonEditorInput(3,e),options:t};const i=this.workspaceService.getWorkbenchState();if(i===2){const n=this.workspaceService.getWorkspace().folders;if(je(e,n[0].toResource(Ti)))return{editor:this.preferencesService.createSplitJsonEditorInput(5,e),options:t}}else if(i===3){const n=this.workspaceService.getWorkspace().folders;for(const s of n)if(je(e,s.toResource(Ti)))return{editor:this.preferencesService.createSplitJsonEditorInput(6,e),options:t}}return{editor:this.textEditorService.createTextEditor({resource:e}),options:t}}}))}start(){this.textModelResolverService.registerTextModelContentProvider("vscode",{provideTextContent:e=>{if(e.scheme!=="vscode")return null;if(e.authority==="schemas"){const t=this.getSchemaModel(e);if(t)return Promise.resolve(t)}return Promise.resolve(this.preferencesService.resolveModel(e))}})}getSchemaModel(e){let t=nn.getSchemaContributions().schemas[e.toString()];if(t){const i=JSON.stringify(t),n=this.languageService.createById("jsonc"),s=this.modelService.createModel(i,n,e),r=new G;return r.add(nn.onDidChangeSchema(o=>{o===e.toString()&&(t=nn.getSchemaContributions().schemas[e.toString()],s.setValue(JSON.stringify(t)))})),r.add(s.onWillDispose(()=>r.dispose())),s}return null}dispose(){_t(this.editorOpeningListener),_t(this.settingsListener)}};Gn=v([u(0,ji),u(1,Js),u(2,F),u(3,Pe),u(4,yt),u(5,it),u(6,ie),u(7,Pc),u(8,Ys)],Gn);const Jl=ge.as(Ie.Configuration);Jl.registerConfiguration({...Fc,properties:{"workbench.settings.enableNaturalLanguageSearch":{type:"boolean",description:l("enableNaturalLanguageSettingsSearch","Controls whether to enable the natural language search mode for settings. The natural language search is provided by a Microsoft online service."),default:!0,scope:3,tags:["usesOnlineServices"]},"workbench.settings.settingsSearchTocBehavior":{type:"string",enum:["hide","filter"],enumDescriptions:[l("settingsSearchTocBehavior.hide","Hide the Table of Contents while searching."),l("settingsSearchTocBehavior.filter","Filter the Table of Contents to just categories that have matching settings. Clicking a category will filter the results to that category.")],description:l("settingsSearchTocBehavior","Controls the behavior of the settings editor Table of Contents while searching."),default:"filter",scope:3}}});const Yl="settings.action.search",Xl="settings.action.focusSettingsFile",Ql="settings.action.focusSettingsFromSearch",Zl="settings.action.focusSettingsList",eg="settings.action.focusTOC",tg="settings.action.focusSettingControl",ig="settings.action.focusLevelUp",ng="settings.switchToJSON",sg="settings.switchToApplicationJSON",rg="settings.switchToCurrentProfileJSON",og="settings.filterByOnline",Bs="workbench.action.openSettings",ag="settings.filterByTelemetry";ge.as(zr.EditorPane).registerEditorPane(qr.create(N,N.ID,l("settingsEditor2","Settings Editor 2")),[new Dt(Nt)]);ge.as(zr.EditorPane).registerEditorPane(qr.create(B,B.ID,l("keybindingsEditor","Keybindings Editor")),[new Dt(Ot)]);const sn={value:l("openSettings2","Open Settings (UI)"),original:"Open Settings (UI)"},Vs={value:l("openUserSettingsJson","Open User Settings (JSON)"),original:"Open User Settings (JSON)"},Us={value:l("openCurrentProfileSettingsJson","Open Current Profile Settings (JSON)"),original:"Open Current Profile Settings (JSON)"},ce={value:l("preferences","Preferences"),original:"Preferences"};function qe(a){return $n(a)||(a={}),{openToSide:a.openToSide,query:a.query}}let jn=class extends ee{constructor(e,t,i,n,s,r,o){super(),this.environmentService=e,this.userDataProfileService=t,this.preferencesService=i,this.workspaceContextService=n,this.labelService=s,this.extensionService=r,this.userDataProfilesService=o,this.registerSettingsActions(),this.registerKeybindingsActions(),this.updatePreferencesEditorMenuItem(),this._register(n.onDidChangeWorkbenchState(()=>this.updatePreferencesEditorMenuItem())),this._register(n.onDidChangeWorkspaceFolders(()=>this.updatePreferencesEditorMenuItemForWorkspaceFolders()))}registerSettingsActions(){L(class extends M{constructor(){super({id:Bs,title:l("settings","Settings"),keybinding:{weight:200,when:null,primary:2135},menu:{id:W.GlobalActivity,group:"2_configuration",order:1}})}run(c,d){const g=typeof d=="string"?{query:d}:qe(d);return c.get(F).openSettings(g)}}),Me.appendMenuItem(W.MenubarPreferencesMenu,{command:{id:Bs,title:l({key:"miOpenSettings",comment:["&& denotes a mnemonic"]},"&&Settings")},group:"2_configuration",order:1}),L(class extends M{constructor(){super({id:"workbench.action.openSettings2",title:{value:l("openSettings2","Open Settings (UI)"),original:"Open Settings (UI)"},category:ce,f1:!0})}run(c,d){return d=qe(d),c.get(F).openSettings({jsonEditor:!1,...d})}});const e=this,t=this._register(new Yi),i=()=>{t.value=L(class extends M{constructor(){super({id:"workbench.action.openSettingsJson",title:e.userDataProfileService.currentProfile.isDefault?Vs:Us,category:ce,f1:!0})}run(c,d){return d=qe(d),c.get(F).openSettings({jsonEditor:!0,...d})}})};L(class extends M{constructor(){super({id:"workbench.action.openGlobalSettings",title:{value:l("openGlobalSettings","Open User Settings"),original:"Open User Settings"},category:ce,f1:!0})}run(c,d){return d=qe(d),c.get(F).openUserSettings(d)}}),L(class extends M{constructor(){super({id:"workbench.action.openRawDefaultSettings",title:{value:l("openRawDefaultSettings","Open Default Settings (JSON)"),original:"Open Default Settings (JSON)"},category:ce,f1:!0})}run(c){return c.get(F).openRawDefaultSettings()}});const n=this._register(new Yi),s=()=>{let c=k.and(nt.Resource.isEqualTo(this.userDataProfileService.currentProfile.settingsResource.toString()),k.not("isInDiffEditor"));this.userDataProfileService.currentProfile.isDefault||(c=k.or(c,k.and(nt.Resource.isEqualTo(this.userDataProfilesService.defaultProfile.settingsResource.toString()),k.not("isInDiffEditor")))),n.value=L(class extends M{constructor(){super({id:"_workbench.openUserSettingsEditor",title:sn,icon:ze,menu:[{id:W.EditorTitle,when:c,group:"navigation",order:1}]})}run(d,g){return g=qe(g),d.get(F).openUserSettings({jsonEditor:!1,...g})}})},r=this._register(new G),o=()=>{if(r.clear(),!this.userDataProfileService.currentProfile.isDefault){const d=W.for("PreferencesSubMenu");r.add(L(class extends M{constructor(){super({id:rg,title:Us,menu:[{id:d,order:1}]})}run(g){const h=g.get(O).activeEditorPane;return h instanceof N?h.switchToSettingsFile():null}})),r.add(L(class extends M{constructor(){super({id:sg,title:Vs,menu:[{id:d,order:2}]})}run(g){const h=g.get(O).activeEditorPane;return h instanceof N?h.switchToApplicationSettingsFile():null}})),r.add(Me.appendMenuItem(W.EditorTitle,{title:{value:l("openSettingsJson","Open Settings (JSON)"),original:"Open Settings (JSON)"},submenu:d,icon:ze,when:k.and(Te,dn,Xi.toNegated()),group:"navigation",order:1}))}let c=k.and(Te,Xi.toNegated());this.userDataProfileService.currentProfile.isDefault||(c=k.and(c,dn.toNegated())),r.add(L(class extends M{constructor(){super({id:ng,title:{value:l("openSettingsJson","Open Settings (JSON)"),original:"Open Settings (JSON)"},icon:ze,menu:[{id:W.EditorTitle,when:c,group:"navigation",order:1}]})}run(d){const g=d.get(O).activeEditorPane;return g instanceof N?g.switchToSettingsFile():null}}))};s(),o(),i(),this._register(this.userDataProfileService.onDidChangeCurrentProfile(()=>{s(),o(),i()})),L(class extends M{constructor(){super({id:Oe.ID,title:Oe.LABEL,category:ce,f1:!0})}run(c){return c.get(j).createInstance(Oe,Oe.ID,Oe.LABEL.value).run()}}),L(class extends M{constructor(){super({id:"workbench.action.openAccessibilitySettings",title:{value:l("openAccessibilitySettings","Open Accessibility Settings"),original:"Open Accessibility Settings"},category:ce,menu:{id:W.CommandPalette,when:ui.notEqualsTo("empty")}})}async run(c){await c.get(F).openSettings({jsonEditor:!1,query:"@tag:accessibility"})}}),L(class extends M{constructor(){super({id:"workbench.action.openFolderSettings",title:{value:l("openFolderSettings","Open Folder Settings"),original:"Open Folder Settings"},category:ce,menu:{id:W.CommandPalette,when:ui.isEqualTo("workspace")}})}async run(c,d){const g=c.get(ft),h=c.get(F),f=await g.executeCommand(Cs);f&&(d=qe(d),await h.openFolderSettings({folderUri:f.uri,...d}))}}),L(class extends M{constructor(){super({id:"workbench.action.openFolderSettingsFile",title:{value:l("openFolderSettingsFile","Open Folder Settings (JSON)"),original:"Open Folder Settings (JSON)"},category:ce,menu:{id:W.CommandPalette,when:ui.isEqualTo("workspace")}})}async run(c,d){const g=c.get(ft),h=c.get(F),f=await g.executeCommand(Cs);f&&(d=qe(d),await h.openFolderSettings({folderUri:f.uri,jsonEditor:!0,...d}))}}),L(class extends M{constructor(){super({id:"_workbench.action.openFolderSettings",title:{value:l("openFolderSettings","Open Folder Settings"),original:"Open Folder Settings"},category:ce,menu:{id:W.ExplorerContext,group:"2_workspace",order:20,when:k.and(Uc,Gc)}})}run(c,d){return c.get(F).openFolderSettings({folderUri:d})}}),L(class extends M{constructor(){super({id:og,title:l({key:"miOpenOnlineSettings",comment:["&& denotes a mnemonic"]},"&&Online Services Settings"),menu:{id:W.MenubarPreferencesMenu,group:"3_settings",order:1}})}run(c){const d=c.get(O).activeEditorPane;d instanceof N?d.focusSearch("@tag:usesOnlineServices"):c.get(F).openSettings({jsonEditor:!1,query:"@tag:usesOnlineServices"})}}),L(class extends M{constructor(){super({id:ag,title:l({key:"miOpenTelemetrySettings",comment:["&& denotes a mnemonic"]},"&&Telemetry Settings")})}run(c){const d=c.get(O).activeEditorPane;d instanceof N?d.focusSearch("@tag:telemetry"):c.get(F).openSettings({jsonEditor:!1,query:"@tag:telemetry"})}}),this.registerSettingsEditorActions(),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{const c=this.environmentService.remoteAuthority;this.labelService.getHostLabel(ye.vscodeRemote,c)})}registerSettingsEditorActions(){function e(i){const n=i.get(O).activeEditorPane;return n instanceof N?n:null}function t(i){const n=e(i);n==null||n.focusSearch()}L(class extends M{constructor(){super({id:Yl,precondition:Te,keybinding:{primary:2084,weight:100,when:null},category:ce,f1:!0,title:{value:l("settings.focusSearch","Focus Settings Search"),original:"Focus Settings Search"}})}run(i){t(i)}}),L(class extends M{constructor(){super({id:$r,precondition:Te,keybinding:{primary:9,weight:100,when:Tt},category:ce,f1:!0,title:{value:l("settings.clearResults","Clear Settings Search Results"),original:"Clear Settings Search Results"}})}run(i){const n=e(i);n==null||n.clearSearchResults()}}),L(class extends M{constructor(){super({id:Xl,precondition:k.and(Tt,hi.Visible.toNegated()),keybinding:{primary:18,weight:100,when:null},title:l("settings.focusFile","Focus settings file")})}run(i,n){const s=e(i);s==null||s.focusSettings()}}),L(class extends M{constructor(){super({id:Ql,precondition:k.and(Tt,hi.Visible.toNegated()),keybinding:{primary:18,weight:200,when:null},title:l("settings.focusFile","Focus settings file")})}run(i,n){const s=e(i);s==null||s.focusSettings()}}),L(class extends M{constructor(){super({id:Zl,precondition:k.and(Te,Hr),keybinding:{primary:3,weight:200,when:null},title:l("settings.focusSettingsList","Focus settings list")})}run(i){const n=e(i);n instanceof N&&n.focusSettings()}}),L(class extends M{constructor(){super({id:eg,precondition:Te,f1:!0,keybinding:[{primary:15,weight:200,when:un}],category:ce,title:{value:l("settings.focusSettingsTOC","Focus Settings Table of Contents"),original:"Focus Settings Table of Contents"}})}run(i){const n=e(i);n instanceof N&&n.focusTOC()}}),L(class extends M{constructor(){super({id:tg,precondition:k.and(Te,un),keybinding:{primary:3,weight:200},title:l("settings.focusSettingControl","Focus Setting Control")})}run(i){var s;const n=e(i);n instanceof N&&(s=document.activeElement)!=null&&s.classList.contains("monaco-list")&&n.focusSettings(!0)}}),L(class extends M{constructor(){super({id:Nr,precondition:Te,keybinding:{primary:1091,weight:200,when:null},f1:!0,category:ce,title:{value:l("settings.showContextMenu","Show Setting Context Menu"),original:"Show Setting Context Menu"}})}run(i){const n=e(i);n instanceof N&&n.showContextMenu()}}),L(class extends M{constructor(){super({id:ig,precondition:k.and(Te,Tt.toNegated(),Xi.toNegated()),keybinding:{primary:9,weight:200,when:null},f1:!0,category:ce,title:{value:l("settings.focusLevelUp","Move Focus Up One Level"),original:"Move Focus Up One Level"}})}run(i){const n=e(i);n instanceof N&&(n.currentFocusContext===3?n.focusSettings():n.currentFocusContext===2?n.focusTOC():n.currentFocusContext===1&&n.focusSearch())}})}registerKeybindingsActions(){const e=this,t={value:l("preferences","Preferences"),original:"Preferences"},i=this._register(new Yi),n=()=>{i.value=L(class extends M{constructor(){super({id:"workbench.action.openGlobalKeybindings",title:{value:l("openGlobalKeybindings","Open Keyboard Shortcuts"),original:"Open Keyboard Shortcuts"},category:t,icon:ze,keybinding:{when:null,weight:200,primary:pi(2089,2097)},menu:[{id:W.CommandPalette},{id:W.EditorTitle,when:nt.Resource.isEqualTo(e.userDataProfileService.currentProfile.keybindingsResource.toString()),group:"navigation",order:1}]})}run(s,r){const o=typeof r=="string"?r:void 0;return s.get(F).openGlobalKeybindingSettings(!1,{query:o})}})};n(),this._register(this.userDataProfileService.onDidChangeCurrentProfile(()=>n())),Me.appendMenuItem(W.GlobalActivity,{command:{id:"workbench.action.openGlobalKeybindings",title:{value:l("Keyboard Shortcuts","Keyboard Shortcuts"),original:"Keyboard Shortcuts"}},group:"2_configuration",order:3}),Me.appendMenuItem(W.MenubarPreferencesMenu,{command:{id:"workbench.action.openGlobalKeybindings",title:{value:l("Keyboard Shortcuts","Keyboard Shortcuts"),original:"Keyboard Shortcuts"}},group:"2_configuration",order:3}),L(class extends M{constructor(){super({id:"workbench.action.openDefaultKeybindingsFile",title:{value:l("openDefaultKeybindingsFile","Open Default Keyboard Shortcuts (JSON)"),original:"Open Default Keyboard Shortcuts (JSON)"},category:t,menu:{id:W.CommandPalette}})}run(s){return s.get(F).openDefaultKeybindingsFile()}}),L(class extends M{constructor(){super({id:"workbench.action.openGlobalKeybindingsFile",title:{value:l("openGlobalKeybindingsFile","Open Keyboard Shortcuts (JSON)"),original:"Open Keyboard Shortcuts (JSON)"},category:t,icon:ze,menu:[{id:W.CommandPalette},{id:W.EditorTitle,when:k.and($),group:"navigation"}]})}run(s){return s.get(F).openGlobalKeybindingSettings(!0)}}),L(class extends M{constructor(){super({id:jc,title:{value:l("showDefaultKeybindings","Show System Keybindings"),original:"Show System Keyboard Shortcuts"},menu:[{id:W.EditorTitle,when:k.and($),group:"1_keyboard_preferences_actions"}]})}run(s){const r=s.get(O).activeEditorPane;r instanceof B&&r.search("@source:system")}}),L(class extends M{constructor(){super({id:Hc,title:{value:l("showExtensionKeybindings","Show Extension Keybindings"),original:"Show Extension Keyboard Shortcuts"},menu:[{id:W.EditorTitle,when:k.and($),group:"1_keyboard_preferences_actions"}]})}run(s){const r=s.get(O).activeEditorPane;r instanceof B&&r.search("@source:extension")}}),L(class extends M{constructor(){super({id:$c,title:{value:l("showUserKeybindings","Show User Keybindings"),original:"Show User Keyboard Shortcuts"},menu:[{id:W.EditorTitle,when:k.and($),group:"1_keyboard_preferences_actions"}]})}run(s){const r=s.get(O).activeEditorPane;r instanceof B&&r.search("@source:user")}}),L(class extends M{constructor(){super({id:ur,title:l("clear","Clear Search Results"),keybinding:{weight:200,when:k.and($,bi),primary:9}})}run(s){const r=s.get(O).activeEditorPane;r instanceof B&&r.clearSearchResults()}}),L(class extends M{constructor(){super({id:zc,title:l("clearHistory","Clear Keyboard Shortcuts Search History"),category:t,menu:[{id:W.CommandPalette,when:k.and($)}]})}run(s){const r=s.get(O).activeEditorPane;r instanceof B&&r.clearKeyboardShortcutSearchHistory()}}),this.registerKeybindingEditorActions()}registerKeybindingEditorActions(){const e=this;se.registerCommandAndKeybindingRule({id:ki,weight:200,when:k.and($,Ce,xt.toNegated()),primary:3,handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.defineKeybinding(r.activeKeybindingEntry,!1)}}),se.registerCommandAndKeybindingRule({id:mr,weight:200,when:k.and($,Ce),primary:pi(2089,2079),handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.defineKeybinding(r.activeKeybindingEntry,!0)}}),se.registerCommandAndKeybindingRule({id:br,weight:200,when:k.and($,Ce),primary:pi(2089,2083),handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.activeKeybindingEntry.keybindingItem.keybinding&&r.defineWhenExpression(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:yr,weight:200,when:k.and($,Ce,qc.toNegated()),primary:20,mac:{primary:2049},handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.removeKeybinding(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:Sr,weight:200,when:k.and($,Ce),primary:0,handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.resetKeybinding(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:Jc,weight:200,when:k.and($),primary:2084,handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.focusSearch()}}),se.registerCommandAndKeybindingRule({id:lr,weight:200,when:k.and($,bi),primary:553,mac:{primary:2601},handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.recordSearchKeys()}}),se.registerCommandAndKeybindingRule({id:gr,weight:200,when:k.and($),primary:558,mac:{primary:2606},handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.toggleSortByPrecedence()}}),se.registerCommandAndKeybindingRule({id:vr,weight:200,when:k.and($,Ce),primary:0,handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.showSimilarKeybindings(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:wr,weight:200,when:k.and($,Ce,xt.negate()),primary:2081,handler:async(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&await r.copyKeybinding(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:Er,weight:200,when:k.and($,Ce),primary:0,handler:async(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&await r.copyKeybindingCommand(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:Cr,weight:200,when:k.and($,Ce),primary:0,handler:async(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&await r.copyKeybindingCommandTitle(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:Yc,weight:200,when:k.and($,bi),primary:2066,handler:(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.focusKeybindings()}}),se.registerCommandAndKeybindingRule({id:Xc,weight:200,when:k.and($,xt,hi.Visible.toNegated()),primary:9,handler:async(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.rejectWhenExpression(r.activeKeybindingEntry)}}),se.registerCommandAndKeybindingRule({id:Qc,weight:200,when:k.and($,xt,hi.Visible.toNegated()),primary:3,handler:async(n,s)=>{const r=n.get(O).activeEditorPane;r instanceof B&&r.acceptWhenExpression(r.activeKeybindingEntry)}});const t=this._register(new G),i=()=>{t.clear(),t.add(L(class extends M{constructor(){const s=nt.Resource.isEqualTo(e.userDataProfileService.currentProfile.keybindingsResource.toString());super({id:"editor.action.defineKeybinding",title:{value:l("defineKeybinding.start","Define Keybinding"),original:"Define Keybinding"},f1:!0,precondition:s,keybinding:{weight:200,when:s,primary:pi(2089,2089)},menu:{id:W.EditorContent,when:s}})}async run(s){var o;const r=s.get(O).activeTextEditorControl;Zc(r)&&((o=r.getContribution(ed))==null||o.showDefineKeybindingWidget())}}))};i(),this._register(this.userDataProfileService.onDidChangeCurrentProfile(()=>i()))}updatePreferencesEditorMenuItem(){const e="_workbench.openWorkspaceSettingsEditor";this.workspaceContextService.getWorkbenchState()===3&&!at.getCommand(e)&&(at.registerCommand(e,()=>this.preferencesService.openWorkspaceSettings({jsonEditor:!1})),Me.appendMenuItem(W.EditorTitle,{command:{id:e,title:sn,icon:ze},when:k.and(nt.Resource.isEqualTo(this.preferencesService.workspaceSettingsResource.toString()),ui.isEqualTo("workspace"),k.not("isInDiffEditor")),group:"navigation",order:1})),this.updatePreferencesEditorMenuItemForWorkspaceFolders()}updatePreferencesEditorMenuItemForWorkspaceFolders(){for(const e of this.workspaceContextService.getWorkspace().folders){const t=`_workbench.openFolderSettings.${e.uri.toString()}`;at.getCommand(t)||(at.registerCommand(t,()=>this.workspaceContextService.getWorkbenchState()===2?this.preferencesService.openWorkspaceSettings({jsonEditor:!1}):this.preferencesService.openFolderSettings({folderUri:e.uri,jsonEditor:!1})),Me.appendMenuItem(W.EditorTitle,{command:{id:t,title:sn,icon:ze},when:k.and(nt.Resource.isEqualTo(this.preferencesService.getFolderSettingsResource(e.uri).toString()),k.not("isInDiffEditor")),group:"navigation",order:1}))}}};jn=v([u(0,wt),u(1,yt),u(2,F),u(3,it),u(4,qn),u(5,Ui),u(6,Jt)],jn);const jo=ge.as(Bc.Workbench);jo.registerWorkbenchContribution(jn,1);jo.registerWorkbenchContribution(Gn,1);Vc(Gt.ID,Gt,1);function qg(){return{[F.toString()]:new Dt(Sn),[jr.toString()]:new Dt(vn),[or.toString()]:new Dt(td)}}export{qg as default};
